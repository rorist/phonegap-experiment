(function(a,b){function c(e){return i.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}function d(e){if(!$a[e]){var g=i("<"+e+">").appendTo("body"),j=g.css("display");g.remove();if(j==="none"||j==="")j="block";$a[e]=j}return $a[e]}function f(e,g){var j={};i.each(db.concat.apply([],db.slice(0,g)),function(){j[this]=e});return j}function h(){try{return new a.XMLHttpRequest}catch(e){}}function k(){i(a).unload(function(){for(var e in Pa)Pa[e](0,1)})}function o(e,g,j,l){if(i.isArray(g)&&
g.length)i.each(g,function(q,r){j||rb.test(e)?l(e,r):o(e+"["+(typeof r==="object"||i.isArray(r)?q:"")+"]",r,j,l)});else if(j||g==null||typeof g!=="object")l(e,g);else if(i.isArray(g)||i.isEmptyObject(g))l(e,"");else for(var m in g)o(e+"["+m+"]",g[m],j,l)}function n(e,g,j,l,m,q){m=m||g.dataTypes[0];q=q||{};q[m]=true;m=e[m];for(var r=0,z=m?m.length:0,x=e===ab,y;r<z&&(x||!y);r++){y=m[r](g,j,l);typeof y==="string"&&(!x||q[y]?y=b:(g.dataTypes.unshift(y),y=n(e,g,j,l,y,q)))}(x||!y)&&!q["*"]&&(y=n(e,g,j,
l,"*",q));return y}function s(e){return function(g,j){typeof g!=="string"&&(j=g,g="*");if(i.isFunction(j))for(var l=g.toLowerCase().split(eb),m=0,q=l.length,r,z;m<q;m++){r=l[m];(z=/^\+/.test(r))&&(r=r.substr(1)||"*");r=e[r]=e[r]||[];r[z?"unshift":"push"](j)}}}function t(e,g,j){var l=g==="width"?e.offsetWidth:e.offsetHeight;if(j==="border")return l;i.each(g==="width"?sb:tb,function(){j||(l-=parseFloat(i.css(e,"padding"+this))||0);j==="margin"?l+=parseFloat(i.css(e,"margin"+this))||0:l-=parseFloat(i.css(e,
"border"+this+"Width"))||0});return l}function D(e,g){g.src?i.ajax({url:g.src,async:false,dataType:"script"}):i.globalEval(g.text||g.textContent||g.innerHTML||"");g.parentNode&&g.parentNode.removeChild(g)}function w(e){return"getElementsByTagName"in e?e.getElementsByTagName("*"):"querySelectorAll"in e?e.querySelectorAll("*"):[]}function G(e,g){if(g.nodeType===1){var j=g.nodeName.toLowerCase();g.clearAttributes();g.mergeAttributes(e);if(j==="object")g.outerHTML=e.outerHTML;else if(j!=="input"||e.type!==
"checkbox"&&e.type!=="radio")if(j==="option")g.selected=e.defaultSelected;else{if(j==="input"||j==="textarea")g.defaultValue=e.defaultValue}else{e.checked&&(g.defaultChecked=g.checked=e.checked);g.value!==e.value&&(g.value=e.value)}g.removeAttribute(i.expando)}}function L(e,g){if(g.nodeType===1&&i.hasData(e)){var j=i.expando,l=i.data(e),m=i.data(g,l);if(l=l[j]){var q=l.events;m=m[j]=i.extend({},l);if(q){delete m.handle;m.events={};for(var r in q){j=0;for(l=q[r].length;j<l;j++)i.event.add(g,r+(q[r][j].namespace?
".":"")+q[r][j].namespace,q[r][j],q[r][j].data)}}}}}function O(e,g,j){if(i.isFunction(g))return i.grep(e,function(m,q){return!!g.call(m,q,m)===j});if(g.nodeType)return i.grep(e,function(m){return m===g===j});if(typeof g==="string"){var l=i.grep(e,function(m){return m.nodeType===1});if(ub.test(g))return i.filter(g,l,!j);g=i.filter(g,l)}return i.grep(e,function(m){return i.inArray(m,g)>=0===j})}function U(e,g){return(e&&e!=="*"?e+".":"")+g.replace(X,"`").replace(ha,"&")}function S(e){var g,j,l,m,q,
r,z,x,y,F,T,ea=[];m=[];q=i._data(this,"events");if(e.liveFired!==this&&q&&q.live&&!e.target.disabled&&(!e.button||e.type!=="click")){e.namespace&&(T=RegExp("(^|\\.)"+e.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)"));e.liveFired=this;var Z=q.live.slice(0);for(z=0;z<Z.length;z++){q=Z[z];q.origType.replace(N,"")===e.type?m.push(q.selector):Z.splice(z--,1)}m=i(e.target).closest(m,e.currentTarget);x=0;for(y=m.length;x<y;x++){F=m[x];for(z=0;z<Z.length;z++){q=Z[z];if(F.selector===q.selector&&(!T||
T.test(q.namespace))&&!F.elem.disabled){r=F.elem;l=null;if(q.preType==="mouseenter"||q.preType==="mouseleave"){e.type=q.preType;l=i(e.relatedTarget).closest(q.selector)[0]}(!l||l!==r)&&ea.push({elem:r,handleObj:q,level:F.level})}}}x=0;for(y=ea.length;x<y;x++){m=ea[x];if(j&&m.level>j)break;e.currentTarget=m.elem;e.data=m.handleObj.data;e.handleObj=m.handleObj;T=m.handleObj.origHandler.apply(m.elem,arguments);if(T===false||e.isPropagationStopped()){j=m.level;T===false&&(g=false);if(e.isImmediatePropagationStopped())break}}return g}}
function V(e,g,j){var l=i.extend({},j[0]);l.type=e;l.originalEvent={};l.liveFired=b;i.event.handle.call(g,l);l.isDefaultPrevented()&&j[0].preventDefault()}function ca(){return true}function J(){return false}function Q(e){for(var g in e)if(g!=="toJSON")return false;return true}function W(e,g,j){if(j===b&&e.nodeType===1){j=e.getAttribute("data-"+g);if(typeof j==="string"){try{j=j==="true"?true:j==="false"?false:j==="null"?null:i.isNaN(j)?ua.test(j)?i.parseJSON(j):j:parseFloat(j)}catch(l){}i.data(e,
g,j)}else j=b}return j}var I=a.document,i=function(){function e(){if(!g.isReady){try{I.documentElement.doScroll("left")}catch(u){setTimeout(e,1);return}g.ready()}}var g=function(u,H){return new g.fn.init(u,H,m)},j=a.jQuery,l=a.$,m,q=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,r=/\S/,z=/^\s+/,x=/\s+$/,y=/\d/,F=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,T=/^[\],:{}\s]*$/,ea=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,Z=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,fa=/(?:^|:|,)(?:\s*\[)+/g,la=/(webkit)[ \/]([\w.]+)/,
ia=/(opera)(?:.*version)?[ \/]([\w.]+)/,qa=/(msie) ([\w.]+)/,Fa=/(mozilla)(?:.*? rv:([\w.]+))?/,p=navigator.userAgent,v,C,A=Object.prototype.toString,B=Object.prototype.hasOwnProperty,E=Array.prototype.push,R=Array.prototype.slice,P=String.prototype.trim,da=Array.prototype.indexOf,ja={};g.fn=g.prototype={constructor:g,init:function(u,H,K){var M,Y;if(!u)return this;if(u.nodeType){this.context=this[0]=u;this.length=1;return this}if(u==="body"&&!H&&I.body){this.context=I;this[0]=I.body;this.selector=
"body";this.length=1;return this}if(typeof u==="string"){M=q.exec(u);if(!M||!M[1]&&H)return!H||H.jquery?(H||K).find(u):this.constructor(H).find(u);if(M[1]){Y=(H=H instanceof g?H[0]:H)?H.ownerDocument||H:I;(K=F.exec(u))?g.isPlainObject(H)?(u=[I.createElement(K[1])],g.fn.attr.call(u,H,true)):u=[Y.createElement(K[1])]:(K=g.buildFragment([M[1]],[Y]),u=(K.cacheable?g.clone(K.fragment):K.fragment).childNodes);return g.merge(this,u)}if((H=I.getElementById(M[2]))&&H.parentNode){if(H.id!==M[2])return K.find(u);
this.length=1;this[0]=H}this.context=I;this.selector=u;return this}if(g.isFunction(u))return K.ready(u);u.selector!==b&&(this.selector=u.selector,this.context=u.context);return g.makeArray(u,this)},selector:"",jquery:"1.5.2",length:0,size:function(){return this.length},toArray:function(){return R.call(this,0)},get:function(u){return u==null?this.toArray():u<0?this[this.length+u]:this[u]},pushStack:function(u,H,K){var M=this.constructor();g.isArray(u)?E.apply(M,u):g.merge(M,u);M.prevObject=this;M.context=
this.context;H==="find"?M.selector=this.selector+(this.selector?" ":"")+K:H&&(M.selector=this.selector+"."+H+"("+K+")");return M},each:function(u,H){return g.each(this,u,H)},ready:function(u){g.bindReady();v.done(u);return this},eq:function(u){return u===-1?this.slice(u):this.slice(u,+u+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(R.apply(this,arguments),"slice",R.call(arguments).join(","))},map:function(u){return this.pushStack(g.map(this,
function(H,K){return u.call(H,K,H)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice};g.fn.init.prototype=g.fn;g.extend=g.fn.extend=function(){var u,H,K,M,Y,ba,ga=arguments[0]||{},ma=1,Qa=arguments.length,Ha=false;typeof ga==="boolean"&&(Ha=ga,ga=arguments[1]||{},ma=2);typeof ga!=="object"&&!g.isFunction(ga)&&(ga={});for(Qa===ma&&(ga=this,--ma);ma<Qa;ma++)if((u=arguments[ma])!=null)for(H in u){K=ga[H];M=u[H];if(ga!==M)Ha&&M&&(g.isPlainObject(M)||
(Y=g.isArray(M)))?(Y?(Y=false,ba=K&&g.isArray(K)?K:[]):ba=K&&g.isPlainObject(K)?K:{},ga[H]=g.extend(Ha,ba,M)):M!==b&&(ga[H]=M)}return ga};g.extend({noConflict:function(u){a.$=l;u&&(a.jQuery=j);return g},isReady:false,readyWait:1,ready:function(u){u===true&&g.readyWait--;if(!g.readyWait||u!==true&&!g.isReady){if(!I.body)return setTimeout(g.ready,1);g.isReady=true;if(!(u!==true&&--g.readyWait>0)){v.resolveWith(I,[g]);g.fn.trigger&&g(I).trigger("ready").unbind("ready")}}},bindReady:function(){if(!v){v=
g._Deferred();if(I.readyState==="complete")return setTimeout(g.ready,1);if(I.addEventListener){I.addEventListener("DOMContentLoaded",C,false);a.addEventListener("load",g.ready,false)}else if(I.attachEvent){I.attachEvent("onreadystatechange",C);a.attachEvent("onload",g.ready);var u=false;try{u=a.frameElement==null}catch(H){}I.documentElement.doScroll&&u&&e()}}},isFunction:function(u){return g.type(u)==="function"},isArray:Array.isArray||function(u){return g.type(u)==="array"},isWindow:function(u){return u&&
typeof u==="object"&&"setInterval"in u},isNaN:function(u){return u==null||!y.test(u)||isNaN(u)},type:function(u){return u==null?String(u):ja[A.call(u)]||"object"},isPlainObject:function(u){if(!u||g.type(u)!=="object"||u.nodeType||g.isWindow(u))return false;if(u.constructor&&!B.call(u,"constructor")&&!B.call(u.constructor.prototype,"isPrototypeOf"))return false;for(var H in u);return H===b||B.call(u,H)},isEmptyObject:function(u){for(var H in u)return false;return true},error:function(u){throw u;},
parseJSON:function(u){if(typeof u!=="string"||!u)return null;u=g.trim(u);if(T.test(u.replace(ea,"@").replace(Z,"]").replace(fa,"")))return a.JSON&&a.JSON.parse?a.JSON.parse(u):(new Function("return "+u))();g.error("Invalid JSON: "+u)},parseXML:function(u,H,K){a.DOMParser?(K=new DOMParser,H=K.parseFromString(u,"text/xml")):(H=new ActiveXObject("Microsoft.XMLDOM"),H.async="false",H.loadXML(u));K=H.documentElement;(!K||!K.nodeName||K.nodeName==="parsererror")&&g.error("Invalid XML: "+u);return H},noop:function(){},
globalEval:function(u){if(u&&r.test(u)){var H=I.head||I.getElementsByTagName("head")[0]||I.documentElement,K=I.createElement("script");g.support.scriptEval()?K.appendChild(I.createTextNode(u)):K.text=u;H.insertBefore(K,H.firstChild);H.removeChild(K)}},nodeName:function(u,H){return u.nodeName&&u.nodeName.toUpperCase()===H.toUpperCase()},each:function(u,H,K){var M,Y=0,ba=u.length,ga=ba===b||g.isFunction(u);if(K)if(ga)for(M in u){if(H.apply(u[M],K)===false)break}else for(;Y<ba;){if(H.apply(u[Y++],K)===
false)break}else if(ga)for(M in u){if(H.call(u[M],M,u[M])===false)break}else for(K=u[0];Y<ba&&H.call(K,Y,K)!==false;K=u[++Y]);return u},trim:P?function(u){return u==null?"":P.call(u)}:function(u){return u==null?"":(u+"").replace(z,"").replace(x,"")},makeArray:function(u,H){var K=H||[];if(u!=null){var M=g.type(u);u.length==null||M==="string"||M==="function"||M==="regexp"||g.isWindow(u)?E.call(K,u):g.merge(K,u)}return K},inArray:function(u,H){if(H.indexOf)return H.indexOf(u);for(var K=0,M=H.length;K<
M;K++)if(H[K]===u)return K;return-1},merge:function(u,H){var K=u.length,M=0;if(typeof H.length==="number")for(var Y=H.length;M<Y;M++)u[K++]=H[M];else for(;H[M]!==b;)u[K++]=H[M++];u.length=K;return u},grep:function(u,H,K){var M=[],Y;K=!!K;for(var ba=0,ga=u.length;ba<ga;ba++){Y=!!H(u[ba],ba);K!==Y&&M.push(u[ba])}return M},map:function(u,H,K){for(var M=[],Y,ba=0,ga=u.length;ba<ga;ba++){Y=H(u[ba],ba,K);Y!=null&&(M[M.length]=Y)}return M.concat.apply([],M)},guid:1,proxy:function(u,H,K){arguments.length===
2&&(typeof H==="string"?(K=u,u=K[H],H=b):H&&!g.isFunction(H)&&(K=H,H=b));!H&&u&&(H=function(){return u.apply(K||this,arguments)});u&&(H.guid=u.guid=u.guid||H.guid||g.guid++);return H},access:function(u,H,K,M,Y,ba){var ga=u.length;if(typeof H==="object"){for(var ma in H)g.access(u,ma,H[ma],M,Y,K);return u}if(K!==b){M=!ba&&M&&g.isFunction(K);for(ma=0;ma<ga;ma++)Y(u[ma],H,M?K.call(u[ma],ma,Y(u[ma],H)):K,ba);return u}return ga?Y(u[0],H):b},now:function(){return(new Date).getTime()},uaMatch:function(u){u=
u.toLowerCase();u=la.exec(u)||ia.exec(u)||qa.exec(u)||u.indexOf("compatible")<0&&Fa.exec(u)||[];return{browser:u[1]||"",version:u[2]||"0"}},sub:function(){function u(K,M){return new u.fn.init(K,M)}g.extend(true,u,this);u.superclass=this;u.fn=u.prototype=this();u.fn.constructor=u;u.subclass=this.subclass;u.fn.init=function K(K,M){M&&M instanceof g&&!(M instanceof u)&&(M=u(M));return g.fn.init.call(this,K,M,H)};u.fn.init.prototype=u.fn;var H=u(I);return u},browser:{}});g.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(u,H){ja["[object "+H+"]"]=H.toLowerCase()});p=g.uaMatch(p);p.browser&&(g.browser[p.browser]=true,g.browser.version=p.version);g.browser.webkit&&(g.browser.safari=true);da&&(g.inArray=function(u,H){return da.call(H,u)});r.test("\u00a0")&&(z=/^[\s\xA0]+/,x=/[\s\xA0]+$/);m=g(I);I.addEventListener?C=function(){I.removeEventListener("DOMContentLoaded",C,false);g.ready()}:I.attachEvent&&(C=function(){I.readyState==="complete"&&(I.detachEvent("onreadystatechange",C),g.ready())});return g}(),oa=
"then done fail isResolved isRejected promise".split(" "),Ba=[].slice;i.extend({_Deferred:function(){var e=[],g,j,l,m={done:function(){if(!l){var q=arguments,r,z,x,y,F;g&&(F=g,g=0);r=0;for(z=q.length;r<z;r++){x=q[r];y=i.type(x);y==="array"?m.done.apply(m,x):y==="function"&&e.push(x)}F&&m.resolveWith(F[0],F[1])}return this},resolveWith:function(q,r){if(!l&&!g&&!j){r=r||[];j=1;try{for(;e[0];)e.shift().apply(q,r)}finally{g=[q,r];j=0}}return this},resolve:function(){m.resolveWith(this,arguments);return this},
isResolved:function(){return j||g},cancel:function(){l=1;e=[];return this}};return m},Deferred:function(e){var g=i._Deferred(),j=i._Deferred(),l;i.extend(g,{then:function(m,q){g.done(m).fail(q);return this},fail:j.done,rejectWith:j.resolveWith,reject:j.resolve,isRejected:j.isResolved,promise:function(m){if(m==null){if(l)return l;l=m={}}for(var q=oa.length;q--;)m[oa[q]]=g[oa[q]];return m}});g.done(j.cancel).fail(g.cancel);delete g.cancel;e&&e.call(g,g);return g},when:function(e){function g(z){return function(x){j[z]=
arguments.length>1?Ba.call(arguments,0):x;--q||r.resolveWith(r,Ba.call(j,0))}}var j=arguments,l=0,m=j.length,q=m,r=m<=1&&e&&i.isFunction(e.promise)?e:i.Deferred();if(m>1){for(;l<m;l++)j[l]&&i.isFunction(j[l].promise)?j[l].promise().then(g(l),r.reject):--q;q||r.resolveWith(r,j)}else r!==e&&r.resolveWith(r,m?[e]:[]);return r.promise()}});(function(){i.support={};var e=I.createElement("div");e.style.display="none";e.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
var g=e.getElementsByTagName("*"),j=e.getElementsByTagName("a")[0],l=I.createElement("select"),m=l.appendChild(I.createElement("option")),q=e.getElementsByTagName("input")[0];if(g&&g.length&&j){i.support={leadingWhitespace:e.firstChild.nodeType===3,tbody:!e.getElementsByTagName("tbody").length,htmlSerialize:!!e.getElementsByTagName("link").length,style:/red/.test(j.getAttribute("style")),hrefNormalized:j.getAttribute("href")==="/a",opacity:/^0.55$/.test(j.style.opacity),cssFloat:!!j.style.cssFloat,
checkOn:q.value==="on",optSelected:m.selected,deleteExpando:true,optDisabled:false,checkClone:false,noCloneEvent:true,noCloneChecked:true,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true,reliableMarginRight:true};q.checked=true;i.support.noCloneChecked=q.cloneNode(true).checked;l.disabled=true;i.support.optDisabled=!m.disabled;var r=null;i.support.scriptEval=function(){if(r===null){var x=I.documentElement,y=I.createElement("script"),F="script"+i.now();try{y.appendChild(I.createTextNode("window."+
F+"=1;"))}catch(T){}x.insertBefore(y,x.firstChild);a[F]?(r=true,delete a[F]):r=false;x.removeChild(y)}return r};try{delete e.test}catch(z){i.support.deleteExpando=false}!e.addEventListener&&e.attachEvent&&e.fireEvent&&(e.attachEvent("onclick",function x(){i.support.noCloneEvent=false;e.detachEvent("onclick",x)}),e.cloneNode(true).fireEvent("onclick"));e=I.createElement("div");e.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";g=I.createDocumentFragment();g.appendChild(e.firstChild);
i.support.checkClone=g.cloneNode(true).cloneNode(true).lastChild.checked;i(function(){var x=I.createElement("div"),y=I.getElementsByTagName("body")[0];if(y){x.style.width=x.style.paddingLeft="1px";y.appendChild(x);i.boxModel=i.support.boxModel=x.offsetWidth===2;"zoom"in x.style&&(x.style.display="inline",x.style.zoom=1,i.support.inlineBlockNeedsLayout=x.offsetWidth===2,x.style.display="",x.innerHTML="<div style='width:4px;'></div>",i.support.shrinkWrapBlocks=x.offsetWidth!==2);x.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";
var F=x.getElementsByTagName("td");i.support.reliableHiddenOffsets=F[0].offsetHeight===0;F[0].style.display="";F[1].style.display="none";i.support.reliableHiddenOffsets=i.support.reliableHiddenOffsets&&F[0].offsetHeight===0;x.innerHTML="";I.defaultView&&I.defaultView.getComputedStyle&&(x.style.width="1px",x.style.marginRight="0",i.support.reliableMarginRight=(parseInt(I.defaultView.getComputedStyle(x,null).marginRight,10)||0)===0);y.removeChild(x).style.display="none"}});g=function(x){var y=I.createElement("div");
x="on"+x;if(!y.attachEvent)return true;var F=x in y;F||(y.setAttribute(x,"return;"),F=typeof y[x]==="function");return F};i.support.submitBubbles=g("submit");i.support.changeBubbles=g("change");e=g=j=null}})();var ua=/^(?:\{.*\}|\[.*\])$/;i.extend({cache:{},uuid:0,expando:"jQuery"+(i.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?i.cache[e[i.expando]]:e[i.expando];return!!e&&!Q(e)},data:function(e,
g,j,l){if(i.acceptData(e)){var m=i.expando,q=typeof g==="string",r=e.nodeType,z=r?i.cache:e,x=r?e[i.expando]:e[i.expando]&&i.expando;if(!((!x||l&&x&&!z[x][m])&&q&&j===b)){x||(r?e[i.expando]=x=++i.uuid:x=i.expando);z[x]||(z[x]={},r||(z[x].toJSON=i.noop));if(typeof g==="object"||typeof g==="function")l?z[x][m]=i.extend(z[x][m],g):z[x]=i.extend(z[x],g);e=z[x];l&&(e[m]||(e[m]={}),e=e[m]);j!==b&&(e[g]=j);if(g==="events"&&!e[g])return e[m]&&e[m].events;return q?e[g]:e}}},removeData:function(e,g,j){if(i.acceptData(e)){var l=
i.expando,m=e.nodeType,q=m?i.cache:e,r=m?e[i.expando]:i.expando;if(q[r]){if(g){var z=j?q[r][l]:q[r];if(z){delete z[g];if(!Q(z))return}}if(j){delete q[r][l];if(!Q(q[r]))return}g=q[r][l];i.support.deleteExpando||q!=a?delete q[r]:q[r]=null;g?(q[r]={},m||(q[r].toJSON=i.noop),q[r][l]=g):m&&(i.support.deleteExpando?delete e[i.expando]:e.removeAttribute?e.removeAttribute(i.expando):e[i.expando]=null)}}},_data:function(e,g,j){return i.data(e,g,j,true)},acceptData:function(e){if(e.nodeName){var g=i.noData[e.nodeName.toLowerCase()];
if(g)return g!==true&&e.getAttribute("classid")===g}return true}});i.fn.extend({data:function(e,g){var j=null;if(typeof e==="undefined"){if(this.length){j=i.data(this[0]);if(this[0].nodeType===1)for(var l=this[0].attributes,m,q=0,r=l.length;q<r;q++){m=l[q].name;m.indexOf("data-")===0&&(m=m.substr(5),W(this[0],m,j[m]))}}return j}if(typeof e==="object")return this.each(function(){i.data(this,e)});var z=e.split(".");z[1]=z[1]?"."+z[1]:"";if(g===b){j=this.triggerHandler("getData"+z[1]+"!",[z[0]]);j===
b&&this.length&&(j=i.data(this[0],e),j=W(this[0],e,j));return j===b&&z[1]?this.data(z[0]):j}return this.each(function(){var x=i(this),y=[z[0],g];x.triggerHandler("setData"+z[1]+"!",y);i.data(this,e,g);x.triggerHandler("changeData"+z[1]+"!",y)})},removeData:function(e){return this.each(function(){i.removeData(this,e)})}});i.extend({queue:function(e,g,j){if(e){g=(g||"fx")+"queue";var l=i._data(e,g);if(!j)return l||[];!l||i.isArray(j)?l=i._data(e,g,i.makeArray(j)):l.push(j);return l}},dequeue:function(e,
g){g=g||"fx";var j=i.queue(e,g),l=j.shift();l==="inprogress"&&(l=j.shift());l&&(g==="fx"&&j.unshift("inprogress"),l.call(e,function(){i.dequeue(e,g)}));j.length||i.removeData(e,g+"queue",true)}});i.fn.extend({queue:function(e,g){typeof e!=="string"&&(g=e,e="fx");if(g===b)return i.queue(this[0],e);return this.each(function(){var j=i.queue(this,e,g);e==="fx"&&j[0]!=="inprogress"&&i.dequeue(this,e)})},dequeue:function(e){return this.each(function(){i.dequeue(this,e)})},delay:function(e,g){e=i.fx?i.fx.speeds[e]||
e:e;g=g||"fx";return this.queue(g,function(){var j=this;setTimeout(function(){i.dequeue(j,g)},e)})},clearQueue:function(e){return this.queue(e||"fx",[])}});var wa=/[\n\t\r]/g,ya=/\s+/,pa=/\r/g,ka=/^(?:href|src|style)$/,ra=/^(?:button|input)$/i,Ca=/^(?:button|input|object|select|textarea)$/i,Da=/^a(?:rea)?$/i,Ga=/^(?:radio|checkbox)$/i;i.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",
usemap:"useMap",frameborder:"frameBorder"};i.fn.extend({attr:function(e,g){return i.access(this,e,g,true,i.attr)},removeAttr:function(e){return this.each(function(){i.attr(this,e,"");this.nodeType===1&&this.removeAttribute(e)})},addClass:function(e){if(i.isFunction(e))return this.each(function(y){var F=i(this);F.addClass(e.call(this,y,F.attr("class")))});if(e&&typeof e==="string")for(var g=(e||"").split(ya),j=0,l=this.length;j<l;j++){var m=this[j];if(m.nodeType===1)if(m.className){for(var q=" "+m.className+
" ",r=m.className,z=0,x=g.length;z<x;z++)q.indexOf(" "+g[z]+" ")<0&&(r+=" "+g[z]);m.className=i.trim(r)}else m.className=e}return this},removeClass:function(e){if(i.isFunction(e))return this.each(function(x){var y=i(this);y.removeClass(e.call(this,x,y.attr("class")))});if(e&&typeof e==="string"||e===b)for(var g=(e||"").split(ya),j=0,l=this.length;j<l;j++){var m=this[j];if(m.nodeType===1&&m.className)if(e){for(var q=(" "+m.className+" ").replace(wa," "),r=0,z=g.length;r<z;r++)q=q.replace(" "+g[r]+
" "," ");m.className=i.trim(q)}else m.className=""}return this},toggleClass:function(e,g){var j=typeof e,l=typeof g==="boolean";if(i.isFunction(e))return this.each(function(m){var q=i(this);q.toggleClass(e.call(this,m,q.attr("class"),g),g)});return this.each(function(){if(j==="string")for(var m,q=0,r=i(this),z=g,x=e.split(ya);m=x[q++];){z=l?z:!r.hasClass(m);r[z?"addClass":"removeClass"](m)}else if(j==="undefined"||j==="boolean"){this.className&&i._data(this,"__className__",this.className);this.className=
this.className||e===false?"":i._data(this,"__className__")||""}})},hasClass:function(e){e=" "+e+" ";for(var g=0,j=this.length;g<j;g++)if((" "+this[g].className+" ").replace(wa," ").indexOf(e)>-1)return true;return false},val:function(e){if(!arguments.length){var g=this[0];if(g){if(i.nodeName(g,"option")){var j=g.attributes.value;return!j||j.specified?g.value:g.text}if(i.nodeName(g,"select")){j=g.selectedIndex;var l=[],m=g.options;g=g.type==="select-one";if(j<0)return null;for(var q=g?j:0,r=g?j+1:
m.length;q<r;q++){var z=m[q];if(z.selected&&(i.support.optDisabled?!z.disabled:z.getAttribute("disabled")===null)&&(!z.parentNode.disabled||!i.nodeName(z.parentNode,"optgroup"))){e=i(z).val();if(g)return e;l.push(e)}}if(g&&!l.length&&m.length)return i(m[j]).val();return l}if(Ga.test(g.type)&&!i.support.checkOn)return g.getAttribute("value")===null?"on":g.value;return(g.value||"").replace(pa,"")}return b}var x=i.isFunction(e);return this.each(function(y){var F=i(this),T=e;if(this.nodeType===1){x&&
(T=e.call(this,y,F.val()));T==null?T="":typeof T==="number"?T+="":i.isArray(T)&&(T=i.map(T,function(Z){return Z==null?"":Z+""}));if(i.isArray(T)&&Ga.test(this.type))this.checked=i.inArray(F.val(),T)>=0;else if(i.nodeName(this,"select")){var ea=i.makeArray(T);i("option",this).each(function(){this.selected=i.inArray(i(this).val(),ea)>=0});ea.length||(this.selectedIndex=-1)}else this.value=T}})}});i.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(e,
g,j,l){if(!e||e.nodeType===3||e.nodeType===8||e.nodeType===2)return b;if(l&&g in i.attrFn)return i(e)[g](j);l=e.nodeType!==1||!i.isXMLDoc(e);var m=j!==b;g=l&&i.props[g]||g;if(e.nodeType===1){var q=ka.test(g);if((g in e||e[g]!==b)&&l&&!q){m&&(g==="type"&&ra.test(e.nodeName)&&e.parentNode&&i.error("type property can't be changed"),j===null?e.nodeType===1&&e.removeAttribute(g):e[g]=j);if(i.nodeName(e,"form")&&e.getAttributeNode(g))return e.getAttributeNode(g).nodeValue;if(g==="tabIndex")return(g=e.getAttributeNode("tabIndex"))&&
g.specified?g.value:Ca.test(e.nodeName)||Da.test(e.nodeName)&&e.href?0:b;return e[g]}if(!i.support.style&&l&&g==="style"){m&&(e.style.cssText=""+j);return e.style.cssText}m&&e.setAttribute(g,""+j);if(!e.attributes[g]&&e.hasAttribute&&!e.hasAttribute(g))return b;e=!i.support.hrefNormalized&&l&&q?e.getAttribute(g,2):e.getAttribute(g);return e===null?b:e}m&&(e[g]=j);return e[g]}});var N=/\.(.*)$/,aa=/^(?:textarea|input|select)$/i,X=/\./g,ha=/ /g,na=/[^\w\s.|`]/g,sa=function(e){return e.replace(na,"\\$&")};
i.event={add:function(e,g,j,l){if(e.nodeType!==3&&e.nodeType!==8){try{i.isWindow(e)&&e!==a&&!e.frameElement&&(e=a)}catch(m){}if(j===false)j=J;else if(!j)return;var q,r;j.handler&&(q=j,j=q.handler);j.guid||(j.guid=i.guid++);if(r=i._data(e)){var z=r.events,x=r.handle;z||(r.events=z={});x||(r.handle=x=function(fa){return typeof i!=="undefined"&&i.event.triggered!==fa.type?i.event.handle.apply(x.elem,arguments):b});x.elem=e;g=g.split(" ");for(var y,F=0,T;y=g[F++];){r=q?i.extend({},q):{handler:j,data:l};
y.indexOf(".")>-1?(T=y.split("."),y=T.shift(),r.namespace=T.slice(0).sort().join(".")):(T=[],r.namespace="");r.type=y;r.guid||(r.guid=j.guid);var ea=z[y],Z=i.event.special[y]||{};if(!ea){ea=z[y]=[];if(!Z.setup||Z.setup.call(e,l,T,x)===false)e.addEventListener?e.addEventListener(y,x,false):e.attachEvent&&e.attachEvent("on"+y,x)}Z.add&&(Z.add.call(e,r),r.handler.guid||(r.handler.guid=j.guid));ea.push(r);i.event.global[y]=true}e=null}}},global:{},remove:function(e,g,j,l){if(e.nodeType!==3&&e.nodeType!==
8){j===false&&(j=J);var m,q,r=0,z,x,y,F,T,ea,Z=i.hasData(e)&&i._data(e),fa=Z&&Z.events;if(Z&&fa){g&&g.type&&(j=g.handler,g=g.type);if(!g||typeof g==="string"&&g.charAt(0)==="."){g=g||"";for(m in fa)i.event.remove(e,m+g)}else{for(g=g.split(" ");m=g[r++];){F=m;z=m.indexOf(".")<0;x=[];z||(x=m.split("."),m=x.shift(),y=RegExp("(^|\\.)"+i.map(x.slice(0).sort(),sa).join("\\.(?:.*\\.)?")+"(\\.|$)"));if(T=fa[m])if(j){F=i.event.special[m]||{};for(q=l||0;q<T.length;q++){ea=T[q];if(j.guid===ea.guid){if(z||y.test(ea.namespace)){l==
null&&T.splice(q--,1);F.remove&&F.remove.call(e,ea)}if(l!=null)break}}if(T.length===0||l!=null&&T.length===1){(!F.teardown||F.teardown.call(e,x)===false)&&i.removeEvent(e,m,Z.handle);delete fa[m]}}else for(q=0;q<T.length;q++){ea=T[q];if(z||y.test(ea.namespace)){i.event.remove(e,F,ea.handler,q);T.splice(q--,1)}}}if(i.isEmptyObject(fa)){(g=Z.handle)&&(g.elem=null);delete Z.events;delete Z.handle;i.isEmptyObject(Z)&&i.removeData(e,b,true)}}}}},trigger:function(e,g,j,l){var m=e.type||e;if(!l){e=typeof e===
"object"?e[i.expando]?e:i.extend(i.Event(m),e):i.Event(m);m.indexOf("!")>=0&&(e.type=m=m.slice(0,-1),e.exclusive=true);j||(e.stopPropagation(),i.event.global[m]&&i.each(i.cache,function(){var T=this[i.expando];T&&T.events&&T.events[m]&&i.event.trigger(e,g,T.handle.elem)}));if(!j||j.nodeType===3||j.nodeType===8)return b;e.result=b;e.target=j;g=i.makeArray(g);g.unshift(e)}e.currentTarget=j;(l=i._data(j,"handle"))&&l.apply(j,g);l=j.parentNode||j.ownerDocument;try{j&&j.nodeName&&i.noData[j.nodeName.toLowerCase()]||
j["on"+m]&&j["on"+m].apply(j,g)===false&&(e.result=false,e.preventDefault())}catch(q){}if(!e.isPropagationStopped()&&l)i.event.trigger(e,g,l,true);else if(!e.isDefaultPrevented()){var r;l=e.target;var z=m.replace(N,""),x=i.nodeName(l,"a")&&z==="click",y=i.event.special[z]||{};if((!y._default||y._default.call(j,e)===false)&&!x&&!(l&&l.nodeName&&i.noData[l.nodeName.toLowerCase()])){try{l[z]&&(r=l["on"+z],r&&(l["on"+z]=null),i.event.triggered=e.type,l[z]())}catch(F){}r&&(l["on"+z]=r);i.event.triggered=
b}}},handle:function(e){var g,j,l,m;m=[];var q=i.makeArray(arguments);e=q[0]=i.event.fix(e||a.event);e.currentTarget=this;(g=e.type.indexOf(".")<0&&!e.exclusive)||(j=e.type.split("."),e.type=j.shift(),m=j.slice(0).sort(),l=RegExp("(^|\\.)"+m.join("\\.(?:.*\\.)?")+"(\\.|$)"));e.namespace=e.namespace||m.join(".");m=i._data(this,"events");j=(m||{})[e.type];if(m&&j){j=j.slice(0);m=0;for(var r=j.length;m<r;m++){var z=j[m];if(g||l.test(z.namespace)){e.handler=z.handler;e.data=z.data;e.handleObj=z;z=z.handler.apply(this,
q);z!==b&&(e.result=z,z===false&&(e.preventDefault(),e.stopPropagation()));if(e.isImmediatePropagationStopped())break}}}return e.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(e){if(e[i.expando])return e;
var g=e;e=i.Event(g);for(var j=this.props.length,l;j;){l=this.props[--j];e[l]=g[l]}e.target||(e.target=e.srcElement||I);e.target.nodeType===3&&(e.target=e.target.parentNode);!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement);if(e.pageX==null&&e.clientX!=null){g=I.documentElement;j=I.body;e.pageX=e.clientX+(g&&g.scrollLeft||j&&j.scrollLeft||0)-(g&&g.clientLeft||j&&j.clientLeft||0);e.pageY=e.clientY+(g&&g.scrollTop||j&&j.scrollTop||0)-(g&&g.clientTop||
j&&j.clientTop||0)}e.which==null&&(e.charCode!=null||e.keyCode!=null)&&(e.which=e.charCode!=null?e.charCode:e.keyCode);!e.metaKey&&e.ctrlKey&&(e.metaKey=e.ctrlKey);!e.which&&e.button!==b&&(e.which=e.button&1?1:e.button&2?3:e.button&4?2:0);return e},guid:1E8,proxy:i.proxy,special:{ready:{setup:i.bindReady,teardown:i.noop},live:{add:function(e){i.event.add(this,U(e.origType,e.selector),i.extend({},e,{handler:S,guid:e.handler.guid}))},remove:function(e){i.event.remove(this,U(e.origType,e.selector),e)}},
beforeunload:{setup:function(e,g,j){i.isWindow(this)&&(this.onbeforeunload=j)},teardown:function(e,g){this.onbeforeunload===g&&(this.onbeforeunload=null)}}}};i.removeEvent=I.removeEventListener?function(e,g,j){e.removeEventListener&&e.removeEventListener(g,j,false)}:function(e,g,j){e.detachEvent&&e.detachEvent("on"+g,j)};i.Event=function(e){if(!this.preventDefault)return new i.Event(e);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===false||
e.getPreventDefault&&e.getPreventDefault()?ca:J):this.type=e;this.timeStamp=i.now();this[i.expando]=true};i.Event.prototype={preventDefault:function(){this.isDefaultPrevented=ca;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=false)},stopPropagation:function(){this.isPropagationStopped=ca;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=true)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ca;this.stopPropagation()},
isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J};var ta=function(e){var g=e.relatedTarget;try{if(!(g&&g!==I&&!g.parentNode)){for(;g&&g!==this;)g=g.parentNode;g!==this&&(e.type=e.data,i.event.handle.apply(this,arguments))}}catch(j){}},za=function(e){e.type=e.data;i.event.handle.apply(this,arguments)};i.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,g){i.event.special[e]={setup:function(j){i.event.add(this,g,j&&j.selector?za:ta,e)},teardown:function(j){i.event.remove(this,
g,j&&j.selector?za:ta)}}});i.support.submitBubbles||(i.event.special.submit={setup:function(){if(this.nodeName&&this.nodeName.toLowerCase()!=="form"){i.event.add(this,"click.specialSubmit",function(e){var g=e.target,j=g.type;(j==="submit"||j==="image")&&i(g).closest("form").length&&V("submit",this,arguments)});i.event.add(this,"keypress.specialSubmit",function(e){var g=e.target,j=g.type;(j==="text"||j==="password")&&i(g).closest("form").length&&e.keyCode===13&&V("submit",this,arguments)})}else return false},
teardown:function(){i.event.remove(this,".specialSubmit")}});if(!i.support.changeBubbles){var xa,Ia=function(e){var g=e.type,j=e.value;g==="radio"||g==="checkbox"?j=e.checked:g==="select-multiple"?j=e.selectedIndex>-1?i.map(e.options,function(l){return l.selected}).join("-"):"":e.nodeName.toLowerCase()==="select"&&(j=e.selectedIndex);return j},va=function(e,g){var j=e.target,l,m;if(aa.test(j.nodeName)&&!j.readOnly){l=i._data(j,"_change_data");m=Ia(j);(e.type!=="focusout"||j.type!=="radio")&&i._data(j,
"_change_data",m);if(!(l===b||m===l))if(l!=null||m){e.type="change";e.liveFired=b;i.event.trigger(e,g,j)}}};i.event.special.change={filters:{focusout:va,beforedeactivate:va,click:function(e){var g=e.target,j=g.type;(j==="radio"||j==="checkbox"||g.nodeName.toLowerCase()==="select")&&va.call(this,e)},keydown:function(e){var g=e.target,j=g.type;(e.keyCode===13&&g.nodeName.toLowerCase()!=="textarea"||e.keyCode===32&&(j==="checkbox"||j==="radio")||j==="select-multiple")&&va.call(this,e)},beforeactivate:function(e){e=
e.target;i._data(e,"_change_data",Ia(e))}},setup:function(){if(this.type==="file")return false;for(var e in xa)i.event.add(this,e+".specialChange",xa[e]);return aa.test(this.nodeName)},teardown:function(){i.event.remove(this,".specialChange");return aa.test(this.nodeName)}};xa=i.event.special.change.filters;xa.focus=xa.beforeactivate}I.addEventListener&&i.each({focus:"focusin",blur:"focusout"},function(e,g){function j(m){var q=i.event.fix(m);q.type=g;q.originalEvent={};i.event.trigger(q,null,q.target);
q.isDefaultPrevented()&&m.preventDefault()}var l=0;i.event.special[g]={setup:function(){l++===0&&I.addEventListener(e,j,true)},teardown:function(){--l===0&&I.removeEventListener(e,j,true)}}});i.each(["bind","one"],function(e,g){i.fn[g]=function(j,l,m){if(typeof j==="object"){for(var q in j)this[g](q,l,j[q],m);return this}if(i.isFunction(l)||l===false){m=l;l=b}var r=g==="one"?i.proxy(m,function(x){i(this).unbind(x,r);return m.apply(this,arguments)}):m;if(j==="unload"&&g!=="one")this.one(j,l,m);else{q=
0;for(var z=this.length;q<z;q++)i.event.add(this[q],j,r,l)}return this}});i.fn.extend({unbind:function(e,g){if(typeof e!=="object"||e.preventDefault)for(var j=0,l=this.length;j<l;j++)i.event.remove(this[j],e,g);else for(j in e)this.unbind(j,e[j]);return this},delegate:function(e,g,j,l){return this.live(g,j,l,e)},undelegate:function(e,g,j){return arguments.length===0?this.unbind("live"):this.die(g,null,j,e)},trigger:function(e,g){return this.each(function(){i.event.trigger(e,g,this)})},triggerHandler:function(e,
g){if(this[0]){var j=i.Event(e);j.preventDefault();j.stopPropagation();i.event.trigger(j,g,this[0]);return j.result}},toggle:function(e){for(var g=arguments,j=1;j<g.length;)i.proxy(e,g[j++]);return this.click(i.proxy(e,function(l){var m=(i._data(this,"lastToggle"+e.guid)||0)%j;i._data(this,"lastToggle"+e.guid,m+1);l.preventDefault();return g[m].apply(this,arguments)||false}))},hover:function(e,g){return this.mouseenter(e).mouseleave(g||e)}});var Ea={focus:"focusin",blur:"focusout",mouseenter:"mouseover",
mouseleave:"mouseout"};i.each(["live","die"],function(e,g){i.fn[g]=function(j,l,m,q){var r,z=0,x,y,F=q||this.selector;q=q?this:i(this.context);if(typeof j==="object"&&!j.preventDefault){for(r in j)q[g](r,l,j[r],F);return this}i.isFunction(l)&&(m=l,l=b);for(j=(j||"").split(" ");(r=j[z++])!=null;){x=N.exec(r);y="";x&&(y=x[0],r=r.replace(N,""));if(r==="hover")j.push("mouseenter"+y,"mouseleave"+y);else{x=r;r==="focus"||r==="blur"?(j.push(Ea[r]+y),r+=y):r=(Ea[r]||r)+y;if(g==="live"){y=0;for(var T=q.length;y<
T;y++)i.event.add(q[y],"live."+U(r,F),{data:l,selector:F,handler:m,origType:r,origHandler:m,preType:x})}else q.unbind("live."+U(r,F),m)}}return this}});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(e,g){i.fn[g]=function(j,l){l==null&&(l=j,j=null);return arguments.length>0?this.bind(g,j,l):this.trigger(g)};i.attrFn&&(i.attrFn[g]=
true)});(function(){function e(p,v,C,A,B,E){B=0;for(var R=A.length;B<R;B++){var P=A[B];if(P){var da=false;for(P=P[p];P;){if(P.sizcache===C){da=A[P.sizset];break}if(P.nodeType===1){E||(P.sizcache=C,P.sizset=B);if(typeof v!=="string"){if(P===v){da=true;break}}else if(y.filter(v,[P]).length>0){da=P;break}}P=P[p]}A[B]=da}}}function g(p,v,C,A,B,E){B=0;for(var R=A.length;B<R;B++){var P=A[B];if(P){var da=false;for(P=P[p];P;){if(P.sizcache===C){da=A[P.sizset];break}P.nodeType===1&&!E&&(P.sizcache=C,P.sizset=
B);if(P.nodeName.toLowerCase()===v){da=P;break}P=P[p]}A[B]=da}}}var j=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,l=0,m=Object.prototype.toString,q=false,r=true,z=/\\/g,x=/\W/;[0,0].sort(function(){r=false;return 0});var y=function(p,v,C,A){C=C||[];var B=v=v||I;if(v.nodeType!==1&&v.nodeType!==9)return[];if(!p||typeof p!=="string")return C;var E,R,P,da,ja,u,H=true,K=y.isXML(v),M=[],Y=p;do{j.exec("");if(E=j.exec(Y)){Y=
E[3];M.push(E[1]);if(E[2]){da=E[3];break}}}while(E);if(M.length>1&&T.exec(p))if(M.length===2&&F.relative[M[0]])R=Fa(M[0]+M[1],v);else for(R=F.relative[M[0]]?[v]:y(M.shift(),v);M.length;){p=M.shift();F.relative[p]&&(p+=M.shift());R=Fa(p,R)}else{!A&&M.length>1&&v.nodeType===9&&!K&&F.match.ID.test(M[0])&&!F.match.ID.test(M[M.length-1])&&(ja=y.find(M.shift(),v,K),v=ja.expr?y.filter(ja.expr,ja.set)[0]:ja.set[0]);if(v){ja=A?{expr:M.pop(),set:fa(A)}:y.find(M.pop(),M.length===1&&(M[0]==="~"||M[0]==="+")&&
v.parentNode?v.parentNode:v,K);R=ja.expr?y.filter(ja.expr,ja.set):ja.set;for(M.length>0?P=fa(R):H=false;M.length;){E=u=M.pop();F.relative[u]?E=M.pop():u="";E==null&&(E=v);F.relative[u](P,E,K)}}else P=[]}P||(P=R);P||y.error(u||p);if(m.call(P)==="[object Array]")if(H)if(v&&v.nodeType===1)for(p=0;P[p]!=null;p++)P[p]&&(P[p]===true||P[p].nodeType===1&&y.contains(v,P[p]))&&C.push(R[p]);else for(p=0;P[p]!=null;p++)P[p]&&P[p].nodeType===1&&C.push(R[p]);else C.push.apply(C,P);else fa(P,C);da&&(y(da,B,C,A),
y.uniqueSort(C));return C};y.uniqueSort=function(p){if(ia){q=r;p.sort(ia);if(q)for(var v=1;v<p.length;v++)p[v]===p[v-1]&&p.splice(v--,1)}return p};y.matches=function(p,v){return y(p,null,null,v)};y.matchesSelector=function(p,v){return y(v,null,null,[p]).length>0};y.find=function(p,v,C){var A;if(!p)return[];for(var B=0,E=F.order.length;B<E;B++){var R,P=F.order[B];if(R=F.leftMatch[P].exec(p)){var da=R[1];R.splice(1,1);if(da.substr(da.length-1)!=="\\"){R[1]=(R[1]||"").replace(z,"");A=F.find[P](R,v,C);
if(A!=null){p=p.replace(F.match[P],"");break}}}}A||(A=typeof v.getElementsByTagName!=="undefined"?v.getElementsByTagName("*"):[]);return{set:A,expr:p}};y.filter=function(p,v,C,A){for(var B,E,R=p,P=[],da=v,ja=v&&v[0]&&y.isXML(v[0]);p&&v.length;){for(var u in F.filter)if((B=F.leftMatch[u].exec(p))!=null&&B[2]){var H,K,M=F.filter[u];K=B[1];E=false;B.splice(1,1);if(K.substr(K.length-1)!=="\\"){da===P&&(P=[]);if(F.preFilter[u])if(B=F.preFilter[u](B,da,C,P,A,ja)){if(B===true)continue}else E=H=true;if(B)for(var Y=
0;(K=da[Y])!=null;Y++)if(K){H=M(K,B,Y,da);var ba=A^!!H;C&&H!=null?ba?E=true:da[Y]=false:ba&&(P.push(K),E=true)}if(H!==b){C||(da=P);p=p.replace(F.match[u],"");if(!E)return[];break}}}if(p===R)if(E==null)y.error(p);else break;R=p}return da};y.error=function(p){throw"Syntax error, unrecognized expression: "+p;};var F=y.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(p){return p.getAttribute("href")},type:function(p){return p.getAttribute("type")}},relative:{"+":function(p,v){var C=
typeof v==="string",A=C&&!x.test(v);C=C&&!A;A&&(v=v.toLowerCase());A=0;for(var B=p.length,E;A<B;A++)if(E=p[A]){for(;(E=E.previousSibling)&&E.nodeType!==1;);p[A]=C||E&&E.nodeName.toLowerCase()===v?E||false:E===v}C&&y.filter(v,p,true)},">":function(p,v){var C,A=typeof v==="string",B=0,E=p.length;if(A&&!x.test(v))for(v=v.toLowerCase();B<E;B++){if(C=p[B]){C=C.parentNode;p[B]=C.nodeName.toLowerCase()===v?C:false}}else{for(;B<E;B++)(C=p[B])&&(p[B]=A?C.parentNode:C.parentNode===v);A&&y.filter(v,p,true)}},
"":function(p,v,C){var A,B=l++,E=e;typeof v==="string"&&!x.test(v)&&(v=v.toLowerCase(),A=v,E=g);E("parentNode",v,B,p,A,C)},"~":function(p,v,C){var A,B=l++,E=e;typeof v==="string"&&!x.test(v)&&(v=v.toLowerCase(),A=v,E=g);E("previousSibling",v,B,p,A,C)}},find:{ID:function(p,v,C){if(typeof v.getElementById!=="undefined"&&!C)return(p=v.getElementById(p[1]))&&p.parentNode?[p]:[]},NAME:function(p,v){if(typeof v.getElementsByName!=="undefined"){for(var C=[],A=v.getElementsByName(p[1]),B=0,E=A.length;B<E;B++)A[B].getAttribute("name")===
p[1]&&C.push(A[B]);return C.length===0?null:C}},TAG:function(p,v){if(typeof v.getElementsByTagName!=="undefined")return v.getElementsByTagName(p[1])}},preFilter:{CLASS:function(p,v,C,A,B,E){p=" "+p[1].replace(z,"")+" ";if(E)return p;E=0;for(var R;(R=v[E])!=null;E++)R&&(B^(R.className&&(" "+R.className+" ").replace(/[\t\n\r]/g," ").indexOf(p)>=0)?C||A.push(R):C&&(v[E]=false));return false},ID:function(p){return p[1].replace(z,"")},TAG:function(p){return p[1].replace(z,"").toLowerCase()},CHILD:function(p){if(p[1]===
"nth"){p[2]||y.error(p[0]);p[2]=p[2].replace(/^\+|\s*/g,"");var v=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(p[2]==="even"&&"2n"||p[2]==="odd"&&"2n+1"||!/\D/.test(p[2])&&"0n+"+p[2]||p[2]);p[2]=v[1]+(v[2]||1)-0;p[3]=v[3]-0}else p[2]&&y.error(p[0]);p[0]=l++;return p},ATTR:function(p,v,C,A,B,E){v=p[1]=p[1].replace(z,"");!E&&F.attrMap[v]&&(p[1]=F.attrMap[v]);p[4]=(p[4]||p[5]||"").replace(z,"");p[2]==="~="&&(p[4]=" "+p[4]+" ");return p},PSEUDO:function(p,v,C,A,B){if(p[1]==="not")if((j.exec(p[3])||"").length>1||
/^\w/.test(p[3]))p[3]=y(p[3],null,null,v);else{p=y.filter(p[3],v,C,true^B);C||A.push.apply(A,p);return false}else if(F.match.POS.test(p[0])||F.match.CHILD.test(p[0]))return true;return p},POS:function(p){p.unshift(true);return p}},filters:{enabled:function(p){return p.disabled===false&&p.type!=="hidden"},disabled:function(p){return p.disabled===true},checked:function(p){return p.checked===true},selected:function(p){return p.selected===true},parent:function(p){return!!p.firstChild},empty:function(p){return!p.firstChild},
has:function(p,v,C){return!!y(C[3],p).length},header:function(p){return/h\d/i.test(p.nodeName)},text:function(p){var v=p.getAttribute("type");p=p.type;return"text"===p&&(v===p||v===null)},radio:function(p){return"radio"===p.type},checkbox:function(p){return"checkbox"===p.type},file:function(p){return"file"===p.type},password:function(p){return"password"===p.type},submit:function(p){return"submit"===p.type},image:function(p){return"image"===p.type},reset:function(p){return"reset"===p.type},button:function(p){return"button"===
p.type||p.nodeName.toLowerCase()==="button"},input:function(p){return/input|select|textarea|button/i.test(p.nodeName)}},setFilters:{first:function(p,v){return v===0},last:function(p,v,C,A){return v===A.length-1},even:function(p,v){return v%2===0},odd:function(p,v){return v%2===1},lt:function(p,v,C){return v<C[3]-0},gt:function(p,v,C){return v>C[3]-0},nth:function(p,v,C){return C[3]-0===v},eq:function(p,v,C){return C[3]-0===v}},filter:{PSEUDO:function(p,v,C,A){var B=v[1],E=F.filters[B];if(E)return E(p,
C,v,A);if(B==="contains")return(p.textContent||p.innerText||y.getText([p])||"").indexOf(v[3])>=0;if(B==="not"){v=v[3];C=0;for(A=v.length;C<A;C++)if(v[C]===p)return false;return true}y.error(B)},CHILD:function(p,v){var C=v[1],A=p;switch(C){case "only":case "first":for(;A=A.previousSibling;)if(A.nodeType===1)return false;if(C==="first")return true;A=p;case "last":for(;A=A.nextSibling;)if(A.nodeType===1)return false;return true;case "nth":C=v[2];var B=v[3];if(C===1&&B===0)return true;var E=v[0],R=p.parentNode;
if(R&&(R.sizcache!==E||!p.nodeIndex)){var P=0;for(A=R.firstChild;A;A=A.nextSibling)A.nodeType===1&&(A.nodeIndex=++P);R.sizcache=E}A=p.nodeIndex-B;return C===0?A===0:A%C===0&&A/C>=0}},ID:function(p,v){return p.nodeType===1&&p.getAttribute("id")===v},TAG:function(p,v){return v==="*"&&p.nodeType===1||p.nodeName.toLowerCase()===v},CLASS:function(p,v){return(" "+(p.className||p.getAttribute("class"))+" ").indexOf(v)>-1},ATTR:function(p,v){var C=v[1];C=F.attrHandle[C]?F.attrHandle[C](p):p[C]!=null?p[C]:
p.getAttribute(C);var A=C+"",B=v[2],E=v[4];return C==null?B==="!=":B==="="?A===E:B==="*="?A.indexOf(E)>=0:B==="~="?(" "+A+" ").indexOf(E)>=0:E?B==="!="?A!==E:B==="^="?A.indexOf(E)===0:B==="$="?A.substr(A.length-E.length)===E:B==="|="?A===E||A.substr(0,E.length+1)===E+"-":false:A&&C!==false},POS:function(p,v,C,A){var B=F.setFilters[v[2]];if(B)return B(p,C,v,A)}}},T=F.match.POS,ea=function(p,v){return"\\"+(v-0+1)},Z;for(Z in F.match){F.match[Z]=RegExp(F.match[Z].source+/(?![^\[]*\])(?![^\(]*\))/.source);
F.leftMatch[Z]=RegExp(/(^(?:.|\r|\n)*?)/.source+F.match[Z].source.replace(/\\(\d+)/g,ea))}var fa=function(p,v){p=Array.prototype.slice.call(p,0);if(v){v.push.apply(v,p);return v}return p};try{Array.prototype.slice.call(I.documentElement.childNodes,0)}catch(la){fa=function(p,v){var C=0,A=v||[];if(m.call(p)==="[object Array]")Array.prototype.push.apply(A,p);else if(typeof p.length==="number")for(var B=p.length;C<B;C++)A.push(p[C]);else for(;p[C];C++)A.push(p[C]);return A}}var ia,qa;I.documentElement.compareDocumentPosition?
ia=function(p,v){if(p===v){q=true;return 0}if(!p.compareDocumentPosition||!v.compareDocumentPosition)return p.compareDocumentPosition?-1:1;return p.compareDocumentPosition(v)&4?-1:1}:(ia=function(p,v){var C,A,B=[],E=[];C=p.parentNode;A=v.parentNode;var R=C;if(p===v){q=true;return 0}if(C===A)return qa(p,v);if(!C)return-1;if(!A)return 1;for(;R;){B.unshift(R);R=R.parentNode}for(R=A;R;){E.unshift(R);R=R.parentNode}C=B.length;A=E.length;for(R=0;R<C&&R<A;R++)if(B[R]!==E[R])return qa(B[R],E[R]);return R===
C?qa(p,E[R],-1):qa(B[R],v,1)},qa=function(p,v,C){if(p===v)return C;for(p=p.nextSibling;p;){if(p===v)return-1;p=p.nextSibling}return 1});y.getText=function(p){for(var v="",C,A=0;p[A];A++){C=p[A];C.nodeType===3||C.nodeType===4?v+=C.nodeValue:C.nodeType!==8&&(v+=y.getText(C.childNodes))}return v};(function(){var p=I.createElement("div"),v="script"+(new Date).getTime(),C=I.documentElement;p.innerHTML="<a name='"+v+"'/>";C.insertBefore(p,C.firstChild);I.getElementById(v)&&(F.find.ID=function(A,B,E){if(typeof B.getElementById!==
"undefined"&&!E)return(B=B.getElementById(A[1]))?B.id===A[1]||typeof B.getAttributeNode!=="undefined"&&B.getAttributeNode("id").nodeValue===A[1]?[B]:b:[]},F.filter.ID=function(A,B){var E=typeof A.getAttributeNode!=="undefined"&&A.getAttributeNode("id");return A.nodeType===1&&E&&E.nodeValue===B});C.removeChild(p);C=p=null})();(function(){var p=I.createElement("div");p.appendChild(I.createComment(""));p.getElementsByTagName("*").length>0&&(F.find.TAG=function(v,C){var A=C.getElementsByTagName(v[1]);
if(v[1]==="*"){for(var B=[],E=0;A[E];E++)A[E].nodeType===1&&B.push(A[E]);A=B}return A});p.innerHTML="<a href='#'></a>";p.firstChild&&typeof p.firstChild.getAttribute!=="undefined"&&p.firstChild.getAttribute("href")!=="#"&&(F.attrHandle.href=function(v){return v.getAttribute("href",2)});p=null})();I.querySelectorAll&&function(){var p=y,v=I.createElement("div");v.innerHTML="<p class='TEST'></p>";if(!v.querySelectorAll||v.querySelectorAll(".TEST").length!==0){y=function(A,B,E,R){B=B||I;if(!R&&!y.isXML(B)){var P=
/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(A);if(P&&(B.nodeType===1||B.nodeType===9)){if(P[1])return fa(B.getElementsByTagName(A),E);if(P[2]&&F.find.CLASS&&B.getElementsByClassName)return fa(B.getElementsByClassName(P[2]),E)}if(B.nodeType===9){if(A==="body"&&B.body)return fa([B.body],E);if(P&&P[3]){var da=B.getElementById(P[3]);if(!da||!da.parentNode)return fa([],E);if(da.id===P[3])return fa([da],E)}try{return fa(B.querySelectorAll(A),E)}catch(ja){}}else if(B.nodeType===1&&B.nodeName.toLowerCase()!==
"object"){P=B;var u=(da=B.getAttribute("id"))||"__sizzle__",H=B.parentNode,K=/^\s*[+~]/.test(A);da?u=u.replace(/'/g,"\\$&"):B.setAttribute("id",u);K&&H&&(B=B.parentNode);try{if(!K||H)return fa(B.querySelectorAll("[id='"+u+"'] "+A),E)}catch(M){}finally{da||P.removeAttribute("id")}}}return p(A,B,E,R)};for(var C in p)y[C]=p[C];v=null}}();(function(){var p=I.documentElement,v=p.matchesSelector||p.mozMatchesSelector||p.webkitMatchesSelector||p.msMatchesSelector;if(v){var C=!v.call(I.createElement("div"),
"div"),A=false;try{v.call(I.documentElement,"[test!='']:sizzle")}catch(B){A=true}y.matchesSelector=function(E,R){R=R.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!y.isXML(E))try{if(A||!F.match.PSEUDO.test(R)&&!/!=/.test(R)){var P=v.call(E,R);if(P||!C||E.document&&E.document.nodeType!==11)return P}}catch(da){}return y(R,null,null,[E]).length>0}}})();(function(){var p=I.createElement("div");p.innerHTML="<div class='test e'></div><div class='test'></div>";if(p.getElementsByClassName&&p.getElementsByClassName("e").length!==
0){p.lastChild.className="e";if(p.getElementsByClassName("e").length!==1){F.order.splice(1,0,"CLASS");F.find.CLASS=function(v,C,A){if(typeof C.getElementsByClassName!=="undefined"&&!A)return C.getElementsByClassName(v[1])};p=null}}})();I.documentElement.contains?y.contains=function(p,v){return p!==v&&(p.contains?p.contains(v):true)}:I.documentElement.compareDocumentPosition?y.contains=function(p,v){return!!(p.compareDocumentPosition(v)&16)}:y.contains=function(){return false};y.isXML=function(p){return(p=
(p?p.ownerDocument||p:0).documentElement)?p.nodeName!=="HTML":false};var Fa=function(p,v){for(var C,A=[],B="",E=v.nodeType?[v]:v;C=F.match.PSEUDO.exec(p);){B+=C[0];p=p.replace(F.match.PSEUDO,"")}p=F.relative[p]?p+"*":p;C=0;for(var R=E.length;C<R;C++)y(p,E[C],A);return y.filter(B,A)};i.find=y;i.expr=y.selectors;i.expr[":"]=i.expr.filters;i.unique=y.uniqueSort;i.text=y.getText;i.isXMLDoc=y.isXML;i.contains=y.contains})();var Ra=/Until$/,vb=/^(?:parents|prevUntil|prevAll)/,wb=/,/,ub=/^.[^:#\[\.,]*$/,
xb=Array.prototype.slice,yb=i.expr.match.POS,zb={children:true,contents:true,next:true,prev:true};i.fn.extend({find:function(e){for(var g=this.pushStack("","find",e),j=0,l=0,m=this.length;l<m;l++){j=g.length;i.find(e,this[l],g);if(l>0)for(var q=j;q<g.length;q++)for(var r=0;r<j;r++)if(g[r]===g[q]){g.splice(q--,1);break}}return g},has:function(e){var g=i(e);return this.filter(function(){for(var j=0,l=g.length;j<l;j++)if(i.contains(this,g[j]))return true})},not:function(e){return this.pushStack(O(this,
e,false),"not",e)},filter:function(e){return this.pushStack(O(this,e,true),"filter",e)},is:function(e){return!!e&&i.filter(e,this).length>0},closest:function(e,g){var j=[],l,m,q=this[0];if(i.isArray(e)){var r,z={},x=1;if(q&&e.length){l=0;for(m=e.length;l<m;l++){r=e[l];z[r]||(z[r]=i.expr.match.POS.test(r)?i(r,g||this.context):r)}for(;q&&q.ownerDocument&&q!==g;){for(r in z){l=z[r];(l.jquery?l.index(q)>-1:i(q).is(l))&&j.push({selector:r,elem:q,level:x})}q=q.parentNode;x++}}return j}r=yb.test(e)?i(e,
g||this.context):null;l=0;for(m=this.length;l<m;l++)for(q=this[l];q;){if(r?r.index(q)>-1:i.find.matchesSelector(q,e)){j.push(q);break}q=q.parentNode;if(!q||!q.ownerDocument||q===g)break}j=j.length>1?i.unique(j):j;return this.pushStack(j,"closest",e)},index:function(e){if(!e||typeof e==="string")return i.inArray(this[0],e?i(e):this.parent().children());return i.inArray(e.jquery?e[0]:e,this)},add:function(e,g){var j=typeof e==="string"?i(e,g):i.makeArray(e),l=i.merge(this.get(),j);return this.pushStack(!j[0]||
!j[0].parentNode||j[0].parentNode.nodeType===11||!l[0]||!l[0].parentNode||l[0].parentNode.nodeType===11?l:i.unique(l))},andSelf:function(){return this.add(this.prevObject)}});i.each({parent:function(e){return(e=e.parentNode)&&e.nodeType!==11?e:null},parents:function(e){return i.dir(e,"parentNode")},parentsUntil:function(e,g,j){return i.dir(e,"parentNode",j)},next:function(e){return i.nth(e,2,"nextSibling")},prev:function(e){return i.nth(e,2,"previousSibling")},nextAll:function(e){return i.dir(e,"nextSibling")},
prevAll:function(e){return i.dir(e,"previousSibling")},nextUntil:function(e,g,j){return i.dir(e,"nextSibling",j)},prevUntil:function(e,g,j){return i.dir(e,"previousSibling",j)},siblings:function(e){return i.sibling(e.parentNode.firstChild,e)},children:function(e){return i.sibling(e.firstChild)},contents:function(e){return i.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:i.makeArray(e.childNodes)}},function(e,g){i.fn[e]=function(j,l){var m=i.map(this,g,j),q=xb.call(arguments);Ra.test(e)||
(l=j);l&&typeof l==="string"&&(m=i.filter(l,m));m=this.length>1&&!zb[e]?i.unique(m):m;(this.length>1||wb.test(l))&&vb.test(e)&&(m=m.reverse());return this.pushStack(m,e,q.join(","))}});i.extend({filter:function(e,g,j){j&&(e=":not("+e+")");return g.length===1?i.find.matchesSelector(g[0],e)?[g[0]]:[]:i.find.matches(e,g)},dir:function(e,g,j){var l=[];for(e=e[g];e&&e.nodeType!==9&&(j===b||e.nodeType!==1||!i(e).is(j));){e.nodeType===1&&l.push(e);e=e[g]}return l},nth:function(e,g,j){g=g||1;for(var l=0;e;e=
e[j])if(e.nodeType===1&&++l===g)break;return e},sibling:function(e,g){for(var j=[];e;e=e.nextSibling)e.nodeType===1&&e!==g&&j.push(e);return j}});var Ab=/ jQuery\d+="(?:\d+|null)"/g,bb=/^\s+/,fb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,gb=/<([\w:]+)/,Bb=/<tbody/i,Cb=/<|&#?\w+;/,hb=/<(?:script|object|embed|option|style)/i,ib=/checked\s*(?:[^=]|=\s*.checked.)/i,Aa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>",
"</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};Aa.optgroup=Aa.option;Aa.tbody=Aa.tfoot=Aa.colgroup=Aa.caption=Aa.thead;Aa.th=Aa.td;i.support.htmlSerialize||(Aa._default=[1,"div<div>","</div>"]);i.fn.extend({text:function(e){if(i.isFunction(e))return this.each(function(g){var j=i(this);j.text(e.call(this,g,j.text()))});if(typeof e!==
"object"&&e!==b)return this.empty().append((this[0]&&this[0].ownerDocument||I).createTextNode(e));return i.text(this)},wrapAll:function(e){if(i.isFunction(e))return this.each(function(j){i(this).wrapAll(e.call(this,j))});if(this[0]){var g=i(e,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&g.insertBefore(this[0]);g.map(function(){for(var j=this;j.firstChild&&j.firstChild.nodeType===1;)j=j.firstChild;return j}).append(this)}return this},wrapInner:function(e){if(i.isFunction(e))return this.each(function(g){i(this).wrapInner(e.call(this,
g))});return this.each(function(){var g=i(this),j=g.contents();j.length?j.wrapAll(e):g.append(e)})},wrap:function(e){return this.each(function(){i(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,true,function(e){this.nodeType===1&&this.insertBefore(e,
this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(g){this.parentNode.insertBefore(g,this)});if(arguments.length){var e=i(arguments[0]);e.push.apply(e,this.toArray());return this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(g){this.parentNode.insertBefore(g,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);e.push.apply(e,
i(arguments[0]).toArray());return e}},remove:function(e,g){for(var j=0,l;(l=this[j])!=null;j++)if(!e||i.filter(e,[l]).length){!g&&l.nodeType===1&&(i.cleanData(l.getElementsByTagName("*")),i.cleanData([l]));l.parentNode&&l.parentNode.removeChild(l)}return this},empty:function(){for(var e=0,g;(g=this[e])!=null;e++)for(g.nodeType===1&&i.cleanData(g.getElementsByTagName("*"));g.firstChild;)g.removeChild(g.firstChild);return this},clone:function(e,g){e=e==null?false:e;g=g==null?e:g;return this.map(function(){return i.clone(this,
e,g)})},html:function(e){if(e===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Ab,""):null;if(typeof e!=="string"||hb.test(e)||!i.support.leadingWhitespace&&bb.test(e)||Aa[(gb.exec(e)||["",""])[1].toLowerCase()])i.isFunction(e)?this.each(function(m){var q=i(this);q.html(e.call(this,m,q.html()))}):this.empty().append(e);else{e=e.replace(fb,"<$1></$2>");try{for(var g=0,j=this.length;g<j;g++)this[g].nodeType===1&&(i.cleanData(this[g].getElementsByTagName("*")),this[g].innerHTML=e)}catch(l){this.empty().append(e)}}return this},
replaceWith:function(e){if(this[0]&&this[0].parentNode){if(i.isFunction(e))return this.each(function(g){var j=i(this),l=j.html();j.replaceWith(e.call(this,g,l))});typeof e!=="string"&&(e=i(e).detach());return this.each(function(){var g=this.nextSibling,j=this.parentNode;i(this).remove();g?i(g).before(e):i(j).append(e)})}return this.length?this.pushStack(i(i.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,true)},domManip:function(e,g,j){var l,m,q,r=e[0],z=[];if(!i.support.checkClone&&
arguments.length===3&&typeof r==="string"&&ib.test(r))return this.each(function(){i(this).domManip(e,g,j,true)});if(i.isFunction(r))return this.each(function(F){var T=i(this);e[0]=r.call(this,F,g?T.html():b);T.domManip(e,g,j)});if(this[0]){q=r&&r.parentNode;i.support.parentNode&&q&&q.nodeType===11&&q.childNodes.length===this.length?l={fragment:q}:l=i.buildFragment(e,this,z);q=l.fragment;q.childNodes.length===1?m=q=q.firstChild:m=q.firstChild;if(m){g=g&&i.nodeName(m,"tr");m=0;for(var x=this.length,
y=x-1;m<x;m++)j.call(g?i.nodeName(this[m],"table")?this[m].getElementsByTagName("tbody")[0]||this[m].appendChild(this[m].ownerDocument.createElement("tbody")):this[m]:this[m],l.cacheable||x>1&&m<y?i.clone(q,true,true):q)}z.length&&i.each(z,D)}return this}});i.buildFragment=function(e,g,j){var l,m,q;g=g&&g[0]?g[0].ownerDocument||g[0]:I;e.length===1&&typeof e[0]==="string"&&e[0].length<512&&g===I&&e[0].charAt(0)==="<"&&!hb.test(e[0])&&(i.support.checkClone||!ib.test(e[0]))&&(m=true,q=i.fragments[e[0]],
q&&q!==1&&(l=q));l||(l=g.createDocumentFragment(),i.clean(e,g,l,j));m&&(i.fragments[e[0]]=q?l:1);return{fragment:l,cacheable:m}};i.fragments={};i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,g){i.fn[e]=function(j){var l=[];j=i(j);var m=this.length===1&&this[0].parentNode;if(m&&m.nodeType===11&&m.childNodes.length===1&&j.length===1){j[g](this[0]);return this}m=0;for(var q=j.length;m<q;m++){var r=(m>0?this.clone(true):this).get();
i(j[m])[g](r);l=l.concat(r)}return this.pushStack(l,e,j.selector)}});i.extend({clone:function(e,g,j){var l=e.cloneNode(true),m,q,r;if((!i.support.noCloneEvent||!i.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!i.isXMLDoc(e)){G(e,l);m=w(e);q=w(l);for(r=0;m[r];++r)G(m[r],q[r])}if(g){L(e,l);if(j){m=w(e);q=w(l);for(r=0;m[r];++r)L(m[r],q[r])}}return l},clean:function(e,g,j,l){g=g||I;typeof g.createElement==="undefined"&&(g=g.ownerDocument||g[0]&&g[0].ownerDocument||I);for(var m=[],q=0,r;(r=
e[q])!=null;q++){typeof r==="number"&&(r+="");if(r){if(typeof r!=="string"||Cb.test(r)){if(typeof r==="string"){r=r.replace(fb,"<$1></$2>");var z=(gb.exec(r)||["",""])[1].toLowerCase(),x=Aa[z]||Aa._default,y=x[0],F=g.createElement("div");for(F.innerHTML=x[1]+r+x[2];y--;)F=F.lastChild;if(!i.support.tbody){y=Bb.test(r);z=z==="table"&&!y?F.firstChild&&F.firstChild.childNodes:x[1]==="<table>"&&!y?F.childNodes:[];for(x=z.length-1;x>=0;--x)i.nodeName(z[x],"tbody")&&!z[x].childNodes.length&&z[x].parentNode.removeChild(z[x])}!i.support.leadingWhitespace&&
bb.test(r)&&F.insertBefore(g.createTextNode(bb.exec(r)[0]),F.firstChild);r=F.childNodes}}else r=g.createTextNode(r);r.nodeType?m.push(r):m=i.merge(m,r)}}if(j)for(q=0;m[q];q++)!l||!i.nodeName(m[q],"script")||m[q].type&&m[q].type.toLowerCase()!=="text/javascript"?(m[q].nodeType===1&&m.splice.apply(m,[q+1,0].concat(i.makeArray(m[q].getElementsByTagName("script")))),j.appendChild(m[q])):l.push(m[q].parentNode?m[q].parentNode.removeChild(m[q]):m[q]);return m},cleanData:function(e){for(var g,j,l=i.cache,
m=i.expando,q=i.event.special,r=i.support.deleteExpando,z=0,x;(x=e[z])!=null;z++)if(!(x.nodeName&&i.noData[x.nodeName.toLowerCase()]))if(j=x[i.expando]){if((g=l[j]&&l[j][m])&&g.events){for(var y in g.events)q[y]?i.event.remove(x,y):i.removeEvent(x,y,g.handle);g.handle&&(g.handle.elem=null)}r?delete x[i.expando]:x.removeAttribute&&x.removeAttribute(i.expando);delete l[j]}}});var jb=/alpha\([^)]*\)/i,Db=/opacity=([^)]*)/,Eb=/-([a-z])/ig,Fb=/([A-Z]|^ms)/g,kb=/^-?\d+(?:px)?$/i,Gb=/^-?\d/,Hb={position:"absolute",
visibility:"hidden",display:"block"},sb=["Left","Right"],tb=["Top","Bottom"],Sa,La,Va,Ib=function(e,g){return g.toUpperCase()};i.fn.css=function(e,g){if(arguments.length===2&&g===b)return this;return i.access(this,e,g,true,function(j,l,m){return m!==b?i.style(j,l,m):i.css(j,l)})};i.extend({cssHooks:{opacity:{get:function(e,g){if(g){var j=Sa(e,"opacity","opacity");return j===""?"1":j}return e.style.opacity}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,zoom:true,lineHeight:true},cssProps:{"float":i.support.cssFloat?
"cssFloat":"styleFloat"},style:function(e,g,j,l){if(e&&e.nodeType!==3&&e.nodeType!==8&&e.style){var m,q=i.camelCase(g),r=e.style,z=i.cssHooks[q];g=i.cssProps[q]||q;if(j===b){if(z&&"get"in z&&(m=z.get(e,false,l))!==b)return m;return r[g]}if(!(typeof j==="number"&&isNaN(j)||j==null)){typeof j==="number"&&!i.cssNumber[q]&&(j+="px");if(!z||!("set"in z)||(j=z.set(e,j))!==b)try{r[g]=j}catch(x){}}}},css:function(e,g,j){var l,m=i.camelCase(g),q=i.cssHooks[m];g=i.cssProps[m]||m;if(q&&"get"in q&&(l=q.get(e,
true,j))!==b)return l;if(Sa)return Sa(e,g,m)},swap:function(e,g,j){var l={},m;for(m in g){l[m]=e.style[m];e.style[m]=g[m]}j.call(e);for(m in g)e.style[m]=l[m]},camelCase:function(e){return e.replace(Eb,Ib)}});i.curCSS=i.css;i.each(["height","width"],function(e,g){i.cssHooks[g]={get:function(j,l,m){var q;if(l){j.offsetWidth!==0?q=t(j,g,m):i.swap(j,Hb,function(){q=t(j,g,m)});if(q<=0){q=Sa(j,g,g);q==="0px"&&Va&&(q=Va(j,g,g));if(q!=null)return q===""||q==="auto"?"0px":q}if(q<0||q==null){q=j.style[g];
return q===""||q==="auto"?"0px":q}return typeof q==="string"?q:q+"px"}},set:function(j,l){if(!kb.test(l))return l;l=parseFloat(l);if(l>=0)return l+"px"}}});i.support.opacity||(i.cssHooks.opacity={get:function(e,g){return Db.test((g&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":g?"1":""},set:function(e,g){var j=e.style;j.zoom=1;var l=i.isNaN(g)?"":"alpha(opacity="+g*100+")",m=j.filter||"";j.filter=jb.test(m)?m.replace(jb,l):j.filter+" "+l}});i(function(){i.support.reliableMarginRight||
(i.cssHooks.marginRight={get:function(e,g){var j;i.swap(e,{display:"inline-block"},function(){g?j=Sa(e,"margin-right","marginRight"):j=e.style.marginRight});return j}})});I.defaultView&&I.defaultView.getComputedStyle&&(La=function(e,g,j){var l;j=j.replace(Fb,"-$1").toLowerCase();if(!(g=e.ownerDocument.defaultView))return b;if(g=g.getComputedStyle(e,null)){l=g.getPropertyValue(j);l===""&&!i.contains(e.ownerDocument.documentElement,e)&&(l=i.style(e,j))}return l});I.documentElement.currentStyle&&(Va=
function(e,g){var j,l=e.currentStyle&&e.currentStyle[g],m=e.runtimeStyle&&e.runtimeStyle[g],q=e.style;!kb.test(l)&&Gb.test(l)&&(j=q.left,m&&(e.runtimeStyle.left=e.currentStyle.left),q.left=g==="fontSize"?"1em":l||0,l=q.pixelLeft+"px",q.left=j,m&&(e.runtimeStyle.left=m));return l===""?"auto":l});Sa=La||Va;i.expr&&i.expr.filters&&(i.expr.filters.hidden=function(e){var g=e.offsetHeight;return e.offsetWidth===0&&g===0||!i.support.reliableHiddenOffsets&&(e.style.display||i.css(e,"display"))==="none"},
i.expr.filters.visible=function(e){return!i.expr.filters.hidden(e)});var Jb=/%20/g,rb=/\[\]$/,lb=/\r?\n/g,Kb=/#.*$/,Lb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Mb=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Nb=/^(?:GET|HEAD)$/,Ob=/^\/\//,mb=/\?/,Pb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Qb=/^(?:select|textarea)/i,eb=/\s+/,Rb=/([?&])_=[^&]*/,Sb=/(^|\-)([a-z])/g,Tb=function(e,g,j){return g+j.toUpperCase()},nb=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,
ob=i.fn.load,ab={},pb={},Ma,Na;try{Ma=I.location.href}catch(ac){Ma=I.createElement("a");Ma.href="";Ma=Ma.href}Na=nb.exec(Ma.toLowerCase())||[];i.fn.extend({load:function(e,g,j){if(typeof e!=="string"&&ob)return ob.apply(this,arguments);if(!this.length)return this;var l=e.indexOf(" ");if(l>=0){var m=e.slice(l,e.length);e=e.slice(0,l)}l="GET";g&&(i.isFunction(g)?(j=g,g=b):typeof g==="object"&&(g=i.param(g,i.ajaxSettings.traditional),l="POST"));var q=this;i.ajax({url:e,type:l,dataType:"html",data:g,
complete:function(r,z,x){x=r.responseText;r.isResolved()&&(r.done(function(y){x=y}),q.html(m?i("<div>").append(x.replace(Pb,"")).find(m):x));j&&q.each(j,[x,z,r])}});return this},serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?i.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Qb.test(this.nodeName)||Mb.test(this.type))}).map(function(e,g){var j=i(this).val();return j==
null?null:i.isArray(j)?i.map(j,function(l){return{name:g.name,value:l.replace(lb,"\r\n")}}):{name:g.name,value:j.replace(lb,"\r\n")}}).get()}});i.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,g){i.fn[g]=function(j){return this.bind(g,j)}});i.each(["get","post"],function(e,g){i[g]=function(j,l,m,q){i.isFunction(l)&&(q=q||m,m=l,l=b);return i.ajax({type:g,url:j,data:l,success:m,dataType:q})}});i.extend({getScript:function(e,g){return i.get(e,b,g,"script")},
getJSON:function(e,g,j){return i.get(e,g,j,"json")},ajaxSetup:function(e,g){g?i.extend(true,e,i.ajaxSettings,g):(g=e,e=i.extend(true,i.ajaxSettings,g));for(var j in{context:1,url:1})j in g?e[j]=g[j]:j in i.ajaxSettings&&(e[j]=i.ajaxSettings[j]);return e},ajaxSettings:{url:Ma,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(Na[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",
text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":true,"text json":i.parseJSON,"text xml":i.parseXML}},ajaxPrefilter:s(ab),ajaxTransport:s(pb),ajax:function(e,g){function j(A,B,E,R){if(ia!==2){ia=2;fa&&clearTimeout(fa);Z=b;T=R||"";p.readyState=A?4:0;var P,da,ja;if(E){R=l;var u=p,H=R.contents,K=R.dataTypes,M=R.responseFields,Y,ba,ga,ma;for(ba in M)ba in
E&&(u[M[ba]]=E[ba]);for(;K[0]==="*";){K.shift();Y===b&&(Y=R.mimeType||u.getResponseHeader("content-type"))}if(Y)for(ba in H)if(H[ba]&&H[ba].test(Y)){K.unshift(ba);break}if(K[0]in E)ga=K[0];else{for(ba in E){if(!K[0]||R.converters[ba+" "+K[0]]){ga=ba;break}ma||(ma=ba)}ga=ga||ma}if(ga){ga!==K[0]&&K.unshift(ga);E=E[ga]}else E=void 0}else E=b;E=E;if(A>=200&&A<300||A===304){if(l.ifModified){if(Y=p.getResponseHeader("Last-Modified"))i.lastModified[y]=Y;if(Y=p.getResponseHeader("Etag"))i.etag[y]=Y}if(A===
304){B="notmodified";P=true}else try{Y=l;E=E;Y.dataFilter&&(E=Y.dataFilter(E,Y.dataType));var Qa=Y.dataTypes;ba={};var Ha,Wa,Ub=Qa.length,Xa,Ja=Qa[0],Ta,cb,Ka,Oa,Ua;for(Ha=1;Ha<Ub;Ha++){if(Ha===1)for(Wa in Y.converters)typeof Wa==="string"&&(ba[Wa.toLowerCase()]=Y.converters[Wa]);Ta=Ja;Ja=Qa[Ha];if(Ja==="*")Ja=Ta;else if(Ta!=="*"&&Ta!==Ja){cb=Ta+" "+Ja;Ka=ba[cb]||ba["* "+Ja];if(!Ka){Ua=b;for(Oa in ba){Xa=Oa.split(" ");if(Xa[0]===Ta||Xa[0]==="*")if(Ua=ba[Xa[1]+" "+Ja]){Oa=ba[Oa];Oa===true?Ka=Ua:Ua===
true&&(Ka=Oa);break}}}!Ka&&!Ua&&i.error("No conversion from "+cb.replace(" "," to "));Ka!==true&&(E=Ka?Ka(E):Ua(Oa(E)))}}da=E;B="success";P=true}catch(Vb){B="parsererror";ja=Vb}}else{ja=B;if(!B||A){B="error";A<0&&(A=0)}}p.status=A;p.statusText=B;P?r.resolveWith(m,[da,B,p]):r.rejectWith(m,[p,B,ja]);p.statusCode(x);x=b;qa&&q.trigger("ajax"+(P?"Success":"Error"),[p,l,P?da:ja]);z.resolveWith(m,[p,B]);qa&&(q.trigger("ajaxComplete",[p,l]),--i.active||i.event.trigger("ajaxStop"))}}typeof e==="object"&&(g=
e,e=b);g=g||{};var l=i.ajaxSetup({},g),m=l.context||l,q=m!==l&&(m.nodeType||m instanceof i)?i(m):i.event,r=i.Deferred(),z=i._Deferred(),x=l.statusCode||{},y,F={},T,ea,Z,fa,la,ia=0,qa,Fa,p={readyState:0,setRequestHeader:function(A,B){ia||(F[A.toLowerCase().replace(Sb,Tb)]=B);return this},getAllResponseHeaders:function(){return ia===2?T:null},getResponseHeader:function(A){var B;if(ia===2){if(!ea)for(ea={};B=Lb.exec(T);)ea[B[1].toLowerCase()]=B[2];B=ea[A.toLowerCase()]}return B===b?null:B},overrideMimeType:function(A){ia||
(l.mimeType=A);return this},abort:function(A){A=A||"abort";Z&&Z.abort(A);j(0,A);return this}};r.promise(p);p.success=p.done;p.error=p.fail;p.complete=z.done;p.statusCode=function(A){if(A){var B;if(ia<2)for(B in A)x[B]=[x[B],A[B]];else{B=A[p.status];p.then(B,B)}}return this};l.url=((e||l.url)+"").replace(Kb,"").replace(Ob,Na[1]+"//");l.dataTypes=i.trim(l.dataType||"*").toLowerCase().split(eb);l.crossDomain==null&&(la=nb.exec(l.url.toLowerCase()),l.crossDomain=la&&(la[1]!=Na[1]||la[2]!=Na[2]||(la[3]||
(la[1]==="http:"?80:443))!=(Na[3]||(Na[1]==="http:"?80:443))));l.data&&l.processData&&typeof l.data!=="string"&&(l.data=i.param(l.data,l.traditional));n(ab,l,g,p);if(ia===2)return false;qa=l.global;l.type=l.type.toUpperCase();l.hasContent=!Nb.test(l.type);qa&&i.active++===0&&i.event.trigger("ajaxStart");if(!l.hasContent){l.data&&(l.url+=(mb.test(l.url)?"&":"?")+l.data);y=l.url;if(l.cache===false){la=i.now();var v=l.url.replace(Rb,"$1_="+la);l.url=v+(v===l.url?(mb.test(l.url)?"&":"?")+"_="+la:"")}}if(l.data&&
l.hasContent&&l.contentType!==false||g.contentType)F["Content-Type"]=l.contentType;l.ifModified&&(y=y||l.url,i.lastModified[y]&&(F["If-Modified-Since"]=i.lastModified[y]),i.etag[y]&&(F["If-None-Match"]=i.etag[y]));F.Accept=l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", */*; q=0.01":""):l.accepts["*"];for(Fa in l.headers)p.setRequestHeader(Fa,l.headers[Fa]);if(l.beforeSend&&(l.beforeSend.call(m,p,l)===false||ia===2)){p.abort();return false}for(Fa in{success:1,
error:1,complete:1})p[Fa](l[Fa]);if(Z=n(pb,l,g,p)){p.readyState=1;qa&&q.trigger("ajaxSend",[p,l]);l.async&&l.timeout>0&&(fa=setTimeout(function(){p.abort("timeout")},l.timeout));try{ia=1;Z.send(F,j)}catch(C){status<2?j(-1,C):i.error(C)}}else j(-1,"No Transport");return p},param:function(e,g){var j=[],l=function(q,r){r=i.isFunction(r)?r():r;j[j.length]=encodeURIComponent(q)+"="+encodeURIComponent(r)};g===b&&(g=i.ajaxSettings.traditional);if(i.isArray(e)||e.jquery&&!i.isPlainObject(e))i.each(e,function(){l(this.name,
this.value)});else for(var m in e)o(m,e[m],g,l);return j.join("&").replace(Jb,"+")}});i.extend({active:0,lastModified:{},etag:{}});var Wb=i.now(),Ya=/(\=)\?(&|$)|\?\?/i;i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return i.expando+"_"+Wb++}});i.ajaxPrefilter("json jsonp",function(e,g,j){var l=typeof e.data==="string";if(e.dataTypes[0]==="jsonp"||g.jsonpCallback||g.jsonp!=null||e.jsonp!==false&&(Ya.test(e.url)||l&&Ya.test(e.data))){var m,q=e.jsonpCallback=i.isFunction(e.jsonpCallback)?e.jsonpCallback():
e.jsonpCallback,r=a[q];g=e.url;var z=e.data,x="$1"+q+"$2",y=function(){a[q]=r;m&&i.isFunction(r)&&a[q](m[0])};e.jsonp!==false&&(g=g.replace(Ya,x),e.url===g&&(l&&(z=z.replace(Ya,x)),e.data===z&&(g+=(/\?/.test(g)?"&":"?")+e.jsonp+"="+q)));e.url=g;e.data=z;a[q]=function(F){m=[F]};j.then(y,y);e.converters["script json"]=function(){m||i.error(q+" was not called");return m[0]};e.dataTypes[0]="json";return"script"}});i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){i.globalEval(e);return e}}});i.ajaxPrefilter("script",function(e){e.cache===b&&(e.cache=false);e.crossDomain&&(e.type="GET",e.global=false)});i.ajaxTransport("script",function(e){if(e.crossDomain){var g,j=I.head||I.getElementsByTagName("head")[0]||I.documentElement;return{send:function(l,m){g=I.createElement("script");g.async="async";e.scriptCharset&&(g.charset=e.scriptCharset);g.src=e.url;g.onload=g.onreadystatechange=
function(q,r){if(!g.readyState||/loaded|complete/.test(g.readyState)){g.onload=g.onreadystatechange=null;j&&g.parentNode&&j.removeChild(g);g=b;r||m(200,"success")}};j.insertBefore(g,j.firstChild)},abort:function(){g&&g.onload(0,1)}}}});var Xb=i.now(),Pa;i.ajaxSettings.xhr=a.ActiveXObject?function(){var e;if(!(e=!this.isLocal&&h()))a:{try{e=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(g){}e=void 0}return e}:h;La=i.ajaxSettings.xhr();i.support.ajax=!!La;i.support.cors=La&&"withCredentials"in
La;La=b;i.support.ajax&&i.ajaxTransport(function(e){if(!e.crossDomain||i.support.cors){var g;return{send:function(j,l){var m=e.xhr(),q,r;e.username?m.open(e.type,e.url,e.async,e.username,e.password):m.open(e.type,e.url,e.async);if(e.xhrFields)for(r in e.xhrFields)m[r]=e.xhrFields[r];e.mimeType&&m.overrideMimeType&&m.overrideMimeType(e.mimeType);!e.crossDomain&&!j["X-Requested-With"]&&(j["X-Requested-With"]="XMLHttpRequest");try{for(r in j)m.setRequestHeader(r,j[r])}catch(z){}m.send(e.hasContent&&
e.data||null);g=function(x,y){var F,T,ea,Z,fa;try{if(g&&(y||m.readyState===4)){g=b;q&&(m.onreadystatechange=i.noop,delete Pa[q]);if(y)m.readyState!==4&&m.abort();else{F=m.status;ea=m.getAllResponseHeaders();Z={};(fa=m.responseXML)&&fa.documentElement&&(Z.xml=fa);Z.text=m.responseText;try{T=m.statusText}catch(la){T=""}F||!e.isLocal||e.crossDomain?F===1223&&(F=204):F=Z.text?200:404}}}catch(ia){y||l(-1,ia)}Z&&l(F,T,Z,ea)};e.async&&m.readyState!==4?(Pa||(Pa={},k()),q=Xb++,m.onreadystatechange=Pa[q]=g):
g()},abort:function(){g&&g(0,1)}}}});var $a={},Yb=/^(?:toggle|show|hide)$/,Zb=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Za,db=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];i.fn.extend({show:function(e,g,j){if(e||e===0)return this.animate(f("show",3),e,g,j);j=0;for(var l=this.length;j<l;j++){e=this[j];g=e.style.display;!i._data(e,"olddisplay")&&g==="none"&&(g=e.style.display="");g===""&&i.css(e,"display")===
"none"&&i._data(e,"olddisplay",d(e.nodeName))}for(j=0;j<l;j++){e=this[j];g=e.style.display;if(g===""||g==="none")e.style.display=i._data(e,"olddisplay")||""}return this},hide:function(e,g,j){if(e||e===0)return this.animate(f("hide",3),e,g,j);e=0;for(g=this.length;e<g;e++){j=i.css(this[e],"display");j!=="none"&&!i._data(this[e],"olddisplay")&&i._data(this[e],"olddisplay",j)}for(e=0;e<g;e++)this[e].style.display="none";return this},_toggle:i.fn.toggle,toggle:function(e,g,j){var l=typeof e==="boolean";
i.isFunction(e)&&i.isFunction(g)?this._toggle.apply(this,arguments):e==null||l?this.each(function(){var m=l?e:i(this).is(":hidden");i(this)[m?"show":"hide"]()}):this.animate(f("toggle",3),e,g,j);return this},fadeTo:function(e,g,j,l){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:g},e,j,l)},animate:function(e,g,j,l){var m=i.speed(g,j,l);if(i.isEmptyObject(e))return this.each(m.complete);return this[m.queue===false?"each":"queue"](function(){var q=i.extend({},m),r,z=this.nodeType===
1,x=z&&i(this).is(":hidden"),y=this;for(r in e){var F=i.camelCase(r);r!==F&&(e[F]=e[r],delete e[r],r=F);if(e[r]==="hide"&&x||e[r]==="show"&&!x)return q.complete.call(this);if(z&&(r==="height"||r==="width")){q.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(i.css(this,"display")==="inline"&&i.css(this,"float")==="none")if(i.support.inlineBlockNeedsLayout)d(this.nodeName)==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1);else this.style.display=
"inline-block"}i.isArray(e[r])&&((q.specialEasing=q.specialEasing||{})[r]=e[r][1],e[r]=e[r][0])}q.overflow!=null&&(this.style.overflow="hidden");q.curAnim=i.extend({},e);i.each(e,function(T,ea){var Z=new i.fx(y,q,T);if(Yb.test(ea))Z[ea==="toggle"?x?"show":"hide":ea](e);else{var fa=Zb.exec(ea),la=Z.cur();if(fa){var ia=parseFloat(fa[2]),qa=fa[3]||(i.cssNumber[T]?"":"px");qa!=="px"&&(i.style(y,T,(ia||1)+qa),la=(ia||1)/Z.cur()*la,i.style(y,T,la+qa));fa[1]&&(ia=(fa[1]==="-="?-1:1)*ia+la);Z.custom(la,ia,
qa)}else Z.custom(la,ea,"")}});return true})},stop:function(e,g){var j=i.timers;e&&this.queue([]);this.each(function(){for(var l=j.length-1;l>=0;l--)j[l].elem===this&&(g&&j[l](true),j.splice(l,1))});g||this.dequeue();return this}});i.each({slideDown:f("show",1),slideUp:f("hide",1),slideToggle:f("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,g){i.fn[e]=function(j,l,m){return this.animate(g,j,l,m)}});i.extend({speed:function(e,g,j){var l=e&&typeof e===
"object"?i.extend({},e):{complete:j||!j&&g||i.isFunction(e)&&e,duration:e,easing:j&&g||g&&!i.isFunction(g)&&g};l.duration=i.fx.off?0:typeof l.duration==="number"?l.duration:l.duration in i.fx.speeds?i.fx.speeds[l.duration]:i.fx.speeds._default;l.old=l.complete;l.complete=function(){l.queue!==false&&i(this).dequeue();i.isFunction(l.old)&&l.old.call(this)};return l},easing:{linear:function(e,g,j,l){return j+l*e},swing:function(e,g,j,l){return(-Math.cos(e*Math.PI)/2+0.5)*l+j}},timers:[],fx:function(e,
g,j){this.options=g;this.elem=e;this.prop=j;g.orig||(g.orig={})}});i.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(i.fx.step[this.prop]||i.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var e,g=i.css(this.elem,this.prop);return isNaN(e=parseFloat(g))?!g||g==="auto"?0:g:e},custom:function(e,g,j){function l(r){return m.step(r)}var m=this,q=i.fx;
this.startTime=i.now();this.start=e;this.end=g;this.unit=j||this.unit||(i.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;l.elem=this.elem;l()&&i.timers.push(l)&&!Za&&(Za=setInterval(q.tick,q.interval))},show:function(){this.options.orig[this.prop]=i.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());i(this.elem).show()},hide:function(){this.options.orig[this.prop]=i.style(this.elem,this.prop);this.options.hide=
true;this.custom(this.cur(),0)},step:function(e){var g=i.now(),j=true;if(e||g>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var l in this.options.curAnim)this.options.curAnim[l]!==true&&(j=false);if(j){if(this.options.overflow!=null&&!i.support.shrinkWrapBlocks){var m=this.elem,q=this.options;i.each(["","X","Y"],function(z,x){m.style["overflow"+x]=q.overflow[z]})}this.options.hide&&i(this.elem).hide();if(this.options.hide||
this.options.show)for(var r in this.options.curAnim)i.style(this.elem,r,this.options.orig[r]);this.options.complete.call(this.elem)}return false}e=g-this.startTime;this.state=e/this.options.duration;g=this.options.easing||(i.easing.swing?"swing":"linear");this.pos=i.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||g](this.state,e,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update();return true}};i.extend(i.fx,{tick:function(){for(var e=
i.timers,g=0;g<e.length;g++)e[g]()||e.splice(g--,1);e.length||i.fx.stop()},interval:13,stop:function(){clearInterval(Za);Za=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){i.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=(e.prop==="width"||e.prop==="height"?Math.max(0,e.now):e.now)+e.unit:e.elem[e.prop]=e.now}}});i.expr&&i.expr.filters&&(i.expr.filters.animated=function(e){return i.grep(i.timers,function(g){return e===
g.elem}).length});var $b=/^t(?:able|d|h)$/i,qb=/^(?:body|html)$/i;"getBoundingClientRect"in I.documentElement?i.fn.offset=function(e){var g=this[0],j;if(e)return this.each(function(r){i.offset.setOffset(this,e,r)});if(!g||!g.ownerDocument)return null;if(g===g.ownerDocument.body)return i.offset.bodyOffset(g);try{j=g.getBoundingClientRect()}catch(l){}var m=g.ownerDocument,q=m.documentElement;if(!j||!i.contains(q,g))return j?{top:j.top,left:j.left}:{top:0,left:0};g=m.body;m=c(m);return{top:j.top+(m.pageYOffset||
i.support.boxModel&&q.scrollTop||g.scrollTop)-(q.clientTop||g.clientTop||0),left:j.left+(m.pageXOffset||i.support.boxModel&&q.scrollLeft||g.scrollLeft)-(q.clientLeft||g.clientLeft||0)}}:i.fn.offset=function(e){var g=this[0];if(e)return this.each(function(y){i.offset.setOffset(this,e,y)});if(!g||!g.ownerDocument)return null;if(g===g.ownerDocument.body)return i.offset.bodyOffset(g);i.offset.initialize();var j,l=g.offsetParent,m=g.ownerDocument,q=m.documentElement,r=m.body;j=(m=m.defaultView)?m.getComputedStyle(g,
null):g.currentStyle;for(var z=g.offsetTop,x=g.offsetLeft;(g=g.parentNode)&&g!==r&&g!==q;){if(i.offset.supportsFixedPosition&&j.position==="fixed")break;j=m?m.getComputedStyle(g,null):g.currentStyle;z-=g.scrollTop;x-=g.scrollLeft;g===l&&(z+=g.offsetTop,x+=g.offsetLeft,i.offset.doesNotAddBorder&&(!i.offset.doesAddBorderForTableAndCells||!$b.test(g.nodeName))&&(z+=parseFloat(j.borderTopWidth)||0,x+=parseFloat(j.borderLeftWidth)||0),l=g.offsetParent);i.offset.subtractsBorderForOverflowNotVisible&&j.overflow!==
"visible"&&(z+=parseFloat(j.borderTopWidth)||0,x+=parseFloat(j.borderLeftWidth)||0);j=j}if(j.position==="relative"||j.position==="static"){z+=r.offsetTop;x+=r.offsetLeft}i.offset.supportsFixedPosition&&j.position==="fixed"&&(z+=Math.max(q.scrollTop,r.scrollTop),x+=Math.max(q.scrollLeft,r.scrollLeft));return{top:z,left:x}};i.offset={initialize:function(){var e=I.body,g=I.createElement("div"),j,l,m,q=parseFloat(i.css(e,"marginTop"))||0;i.extend(g.style,{position:"absolute",top:0,left:0,margin:0,border:0,
width:"1px",height:"1px",visibility:"hidden"});g.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";e.insertBefore(g,e.firstChild);j=g.firstChild;l=j.firstChild;m=j.nextSibling.firstChild.firstChild;this.doesNotAddBorder=l.offsetTop!==5;this.doesAddBorderForTableAndCells=
m.offsetTop===5;l.style.position="fixed";l.style.top="20px";this.supportsFixedPosition=l.offsetTop===20||l.offsetTop===15;l.style.position=l.style.top="";j.style.overflow="hidden";j.style.position="relative";this.subtractsBorderForOverflowNotVisible=l.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=e.offsetTop!==q;e.removeChild(g);i.offset.initialize=i.noop},bodyOffset:function(e){var g=e.offsetTop,j=e.offsetLeft;i.offset.initialize();i.offset.doesNotIncludeMarginInBodyOffset&&(g+=parseFloat(i.css(e,
"marginTop"))||0,j+=parseFloat(i.css(e,"marginLeft"))||0);return{top:g,left:j}},setOffset:function(e,g,j){var l=i.css(e,"position");l==="static"&&(e.style.position="relative");var m=i(e),q=m.offset(),r=i.css(e,"top"),z=i.css(e,"left"),x=(l==="absolute"||l==="fixed")&&i.inArray("auto",[r,z])>-1;l={};var y={};x&&(y=m.position());r=x?y.top:parseInt(r,10)||0;z=x?y.left:parseInt(z,10)||0;i.isFunction(g)&&(g=g.call(e,j,q));g.top!=null&&(l.top=g.top-q.top+r);g.left!=null&&(l.left=g.left-q.left+z);"using"in
g?g.using.call(e,l):m.css(l)}};i.fn.extend({position:function(){if(!this[0])return null;var e=this[0],g=this.offsetParent(),j=this.offset(),l=qb.test(g[0].nodeName)?{top:0,left:0}:g.offset();j.top-=parseFloat(i.css(e,"marginTop"))||0;j.left-=parseFloat(i.css(e,"marginLeft"))||0;l.top+=parseFloat(i.css(g[0],"borderTopWidth"))||0;l.left+=parseFloat(i.css(g[0],"borderLeftWidth"))||0;return{top:j.top-l.top,left:j.left-l.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||
I.body;e&&!qb.test(e.nodeName)&&i.css(e,"position")==="static";)e=e.offsetParent;return e})}});i.each(["Left","Top"],function(e,g){var j="scroll"+g;i.fn[j]=function(l){var m=this[0],q;if(!m)return null;if(l!==b)return this.each(function(){(q=c(this))?q.scrollTo(e?i(q).scrollLeft():l,e?l:i(q).scrollTop()):this[j]=l});return(q=c(m))?"pageXOffset"in q?q[e?"pageYOffset":"pageXOffset"]:i.support.boxModel&&q.document.documentElement[j]||q.document.body[j]:m[j]}});i.each(["Height","Width"],function(e,g){var j=
g.toLowerCase();i.fn["inner"+g]=function(){return this[0]?parseFloat(i.css(this[0],j,"padding")):null};i.fn["outer"+g]=function(l){return this[0]?parseFloat(i.css(this[0],j,l?"margin":"border")):null};i.fn[j]=function(l){var m=this[0];if(!m)return l==null?null:this;if(i.isFunction(l))return this.each(function(r){var z=i(this);z[j](l.call(this,r,z[j]()))});if(i.isWindow(m)){var q=m.document.documentElement["client"+g];return m.document.compatMode==="CSS1Compat"&&q||m.document.body["client"+g]||q}if(m.nodeType===
9)return Math.max(m.documentElement["client"+g],m.body["scroll"+g],m.documentElement["scroll"+g],m.body["offset"+g],m.documentElement["offset"+g]);if(l===b){m=i.css(m,j);q=parseFloat(m);return i.isNaN(q)?m:q}return this.css(j,typeof l==="string"?l:l+"px")}});a.jQuery=a.$=i})(window);(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(f){for(var h=0,k;(k=f[h])!=null;h++)a(k).triggerHandler("remove");c(f)}}else{var d=a.fn.remove;a.fn.remove=function(f,h){return this.each(function(){if(!h)if(!f||a.filter(f,[this]).length)a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return d.call(a(this),f,h)})}}a.widget=function(f,h,k){var o=f.split(".")[0],n;f=f.split(".")[1];n=o+"-"+f;if(!k){k=h;h=a.Widget}a.expr[":"][n]=function(s){return!!a.data(s,
f)};a[o]=a[o]||{};a[o][f]=function(s,t){arguments.length&&this._createWidget(s,t)};h=new h;h.options=a.extend(true,{},h.options);a[o][f].prototype=a.extend(true,h,{namespace:o,widgetName:f,widgetEventPrefix:a[o][f].prototype.widgetEventPrefix||f,widgetBaseClass:n},k);a.widget.bridge(f,a[o][f])};a.widget.bridge=function(f,h){a.fn[f]=function(k){var o=typeof k==="string",n=Array.prototype.slice.call(arguments,1),s=this;k=!o&&n.length?a.extend.apply(null,[true,k].concat(n)):k;if(o&&k.charAt(0)==="_")return s;
o?this.each(function(){var t=a.data(this,f);if(!t)throw"cannot call methods on "+f+" prior to initialization; attempted to call method '"+k+"'";if(!a.isFunction(t[k]))throw"no such method '"+k+"' for "+f+" widget instance";var D=t[k].apply(t,n);if(D!==t&&D!==b){s=D;return false}}):this.each(function(){var t=a.data(this,f);t?t.option(k||{})._init():a.data(this,f,new h(k,this))});return s}};a.Widget=function(f,h){arguments.length&&this._createWidget(f,h)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",
options:{disabled:false},_createWidget:function(f,h){a.data(h,this.widgetName,this);this.element=a(h);this.options=a.extend(true,{},this.options,this._getCreateOptions(),f);var k=this;this.element.bind("remove."+this.widgetName,function(){k.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){var f={};if(a.metadata)f=a.metadata.get(element)[this.widgetName];return f},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);
this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(f,h){var k=f;if(arguments.length===0)return a.extend({},this.options);if(typeof f==="string"){if(h===b)return this.options[f];k={};k[f]=h}this._setOptions(k);return this},_setOptions:function(f){var h=this;a.each(f,function(k,o){h._setOption(k,o)});return this},_setOption:function(f,h){this.options[f]=h;if(f===
"disabled")this.widget()[h?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",h);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(f,h,k){var o=this.options[f];h=a.Event(h);h.type=(f===this.widgetEventPrefix?f:this.widgetEventPrefix+f).toLowerCase();k=k||{};if(h.originalEvent){f=a.event.props.length;for(var n;f;){n=a.event.props[--f];h[n]=h.originalEvent[n]}}this.element.trigger(h,
k);return!(a.isFunction(o)&&o.call(this.element[0],h,k)===false||h.isDefaultPrevented())}}})(jQuery);(function(a,b){a.widget("mobile.widget",{_getCreateOptions:function(){var c=this.element,d={};a.each(this.options,function(f){var h=c.jqmData(f.replace(/[A-Z]/g,function(k){return"-"+k.toLowerCase()}));if(h!==b)d[f]=h});return d}})})(jQuery);
(function(a){function b(){var h=c.width(),k=[],o=[],n;d.removeClass("min-width-"+f.join("px min-width-")+"px max-width-"+f.join("px max-width-")+"px");a.each(f,function(s,t){h>=t&&k.push("min-width-"+t+"px");h<=t&&o.push("max-width-"+t+"px")});if(k.length)n=k.join(" ");if(o.length)n+=" "+o.join(" ");d.addClass(n)}var c=a(window),d=a("html"),f=[320,480,768,1024];a.mobile.media=function(){var h={},k=a("<div id='jquery-mediatest'>"),o=a("<body>").append(k);return function(n){if(!(n in h)){var s=document.createElement("style"),
t="@media "+n+" { #jquery-mediatest { position:absolute; } }";s.type="text/css";if(s.styleSheet)s.styleSheet.cssText=t;else s.appendChild(document.createTextNode(t));d.prepend(o).prepend(s);h[n]=k.css("position")==="absolute";o.add(s).remove()}return h[n]}}();a.mobile.addResolutionBreakpoints=function(h){if(a.type(h)==="array")f=f.concat(h);else f.push(h);f.sort(function(k,o){return k-o});b()};a(document).bind("mobileinit.htmlclass",function(){c.bind("orientationchange.htmlclass resize.htmlclass",
function(h){h.orientation&&d.removeClass("portrait landscape").addClass(h.orientation);b()})});a(function(){c.trigger("orientationchange.htmlclass")})})(jQuery);
(function(a,b){function c(n){var s=n.charAt(0).toUpperCase()+n.substr(1);n=(n+" "+h.join(s+" ")+s).split(" ");for(var t in n)if(f[t]!==b)return true}var d=a("<body>").prependTo("html"),f=d[0].style,h=["webkit","moz","o"],k=window.palmGetResource||window.PalmServiceBridge,o=window.blackberry;a.mobile.browser={};a.mobile.browser.ie=function(){for(var n=3,s=document.createElement("div"),t=s.all||[];s.innerHTML="<!--[if gt IE "+ ++n+"]><br><![endif]--\>",t[0];);return n>4?n:!n}();a.extend(a.support,{orientation:"orientation"in
window,touch:"ontouchend"in document,cssTransitions:"WebKitTransitionEvent"in window,pushState:!!history.pushState,mediaquery:a.mobile.media("only all"),cssPseudoElement:!!c("content"),boxShadow:!!c("boxShadow")&&!o,scrollTop:("pageXOffset"in window||"scrollTop"in document.documentElement||"scrollTop"in d[0])&&!k,dynamicBaseTag:function(){var n=location.protocol+"//"+location.host+location.pathname+"ui-dir/",s=a("head base"),t=null,D="";if(s.length)D=s.attr("href");else s=t=a("<base>",{href:n}).appendTo("head");
var w=a("<a href='testurl'></a>").prependTo(d)[0].href;s[0].href=D?D:location.pathname;t&&t.remove();return w.indexOf(n)===0}(),eventCapture:"addEventListener"in document});d.remove();a.support.boxShadow||a("html").addClass("ui-mobile-nosupport-boxshadow")})(jQuery);
(function(a,b,c,d){function f(N){for(;N&&typeof N.originalEvent!=="undefined";)N=N.originalEvent;return N}function h(N){var aa={};for(N=a(N);N&&N.length;){var X=N.data(S),ha;for(ha in X)if(X[ha])aa[ha]=aa.hasVirtualBinding=true;N=N.parent()}return aa}function k(){if(Q.touchbindings){ra.unbind("touchmove",w).unbind("touchend",G).unbind("scroll",D);Q.touchbindings=0}}function o(){if(W){clearTimeout(W);W=0}W=setTimeout(function(){Da=W=0;wa.length=0;ya=false;k()},a.vmouse.resetTimerDuration)}function n(N,
aa,X){var ha=false,na;if(!(na=X&&X[N])){if(X=!X)a:{for(X=a(aa.target);X&&X.length;){if((na=X.data(S))&&(!N||na[N]))break a;X=X.parent()}X=null}na=X}if(na){ha=aa;X=ha.type;ha=a.Event(ha);ha.type=N;var sa=ha.originalEvent,ta=a.event.props;if(sa)for(N=ta.length;N;){na=ta[--N];ha[na]=sa[na]}if(X.search(/^touch/)!==-1){N=f(sa);X=N.touches;N=N.changedTouches;if(X=X&&X.length?X[0]:N&&N.length?N[0]:d){N=0;for(sa=J.length;N<sa;N++){na=J[N];ha[na]=X[na]}}}a(aa.target).trigger(ha);ha=ha.isDefaultPrevented()}return ha}
function s(N){var aa=a(N.target).data(V);if(!ya&&(!Da||Da!==aa))n("v"+N.type,N)}function t(N){var aa=f(N).touches;if(aa&&aa.length===1){var X=N.target;aa=h(X);if(aa.hasVirtualBinding){Da=Ca++;a(X).data(V,Da);if(W){clearTimeout(W);W=0}if(!Q.touchbindings){ra.bind("touchend",G).bind("touchmove",w).bind("scroll",D);Q.touchbindings=1}ua=false;X=f(N).touches[0];I=X.pageX;i=X.pageY;if(pa){oa=b.pageXOffset;Ba=b.pageYOffset}n("vmouseover",N,aa);n("vmousedown",N,aa)}}}function D(N){ua||n("vmousecancel",N,
h(N.target));ua=true;o()}function w(N){var aa=f(N).touches[0],X=ua,ha=a.vmouse.moveDistanceThreshold;ua=ua||pa&&(oa!==b.pageXOffset||Ba!==b.pageYOffset)||Math.abs(aa.pageX-I)>ha||Math.abs(aa.pageY-i)>ha;aa=h(N.target);ua&&!X&&n("vmousecancel",N,aa);n("vmousemove",N,aa);o()}function G(N){k();var aa=h(N.target);n("vmouseup",N,aa);if(!ua)if(n("vclick",N,aa)){var X=f(N).changedTouches[0];wa.push({touchID:Da,x:X.clientX,y:X.clientY});ya=true}n("vmouseout",N,aa);ua=false;o()}function L(N){N=N.data(S);var aa;
if(N)for(aa in N)if(N[aa])return true;return false}function O(){}function U(N){var aa=N.substr(1);return{setup:function(){var X=a(this);L(X)||X.data(S,{});X.data(S)[N]=true;Q[N]=(Q[N]||0)+1;Q[N]===1&&ra.bind(aa,s);X.bind(aa,O);if(ka){Q.touchstart=(Q.touchstart||0)+1;Q.touchstart===1&&ra.bind("touchstart",t)}},teardown:function(){--Q[N];Q[N]||ra.unbind(aa,s);if(ka){--Q.touchstart;Q.touchstart||ra.unbind("touchstart",t)}var X=a(this);X.data(S)[N]=false;X.unbind(aa,O);L(X)||X.removeData(S)}}}var S="virtualMouseBindings",
V="virtualTouchID",ca="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),J="clientX clientY pageX pageY screenX screenY".split(" "),Q={},W=0,I=0,i=0,oa=0,Ba=0,ua=false,wa=[],ya=false,pa=a.support.scrollTop,ka=a.support.eventCapture,ra=a(c),Ca=1,Da=0;a.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var Ga=0;Ga<ca.length;Ga++)a.event.special[ca[Ga]]=U(ca[Ga]);ka&&c.addEventListener("click",function(N){var aa=wa.length,X=N.target;
if(aa)for(var ha=N.clientX,na=N.clientY,sa=a.vmouse.clickDistanceThreshold,ta=X;ta;){for(var za=0;za<aa;za++){var xa=wa[za];if(ta===X&&Math.abs(xa.x-ha)<sa&&Math.abs(xa.y-na)<sa||a(ta).data(V)===xa.touchID){N.preventDefault();N.stopPropagation();return}}ta=ta.parentNode}},true)})(jQuery,window,document);
(function(a,b){function c(o,n,s){var t=s.type;s.type=n;a.event.handle.call(o,s);s.type=t}a.each("touchstart touchmove touchend orientationchange tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(o,n){a.fn[n]=function(s){return s?this.bind(n,s):this.trigger(n)};a.attrFn[n]=true});var d=a.support.touch,f=d?"touchstart":"mousedown",h=d?"touchend":"mouseup",k=d?"touchmove":"mousemove";a.event.special.scrollstart={enabled:true,setup:function(){function o(D,w){s=w;c(n,s?
"scrollstart":"scrollstop",D)}var n=this,s,t;a(n).bind("touchmove scroll",function(D){if(a.event.special.scrollstart.enabled){s||o(D,true);clearTimeout(t);t=setTimeout(function(){o(D,false)},50)}})}};a.event.special.tap={setup:function(){var o=this,n=a(o);n.bind("vmousedown",function(s){function t(){w=false;clearTimeout(L);n.unbind("vclick",D).unbind("vmousecancel",t)}function D(O){t();G==O.target&&c(o,"tap",O)}if(s.which&&s.which!==1)return false;var w=true,G=s.target,L;n.bind("vmousecancel",t).bind("vclick",
D);L=setTimeout(function(){w&&c(o,"taphold",s)},750)})}};a.event.special.swipe={setup:function(){var o=a(this);o.bind(f,function(n){function s(G){if(D){var L=G.originalEvent.touches?G.originalEvent.touches[0]:G;w={time:(new Date).getTime(),coords:[L.pageX,L.pageY]};Math.abs(D.coords[0]-w.coords[0])>10&&G.preventDefault()}}var t=n.originalEvent.touches?n.originalEvent.touches[0]:n,D={time:(new Date).getTime(),coords:[t.pageX,t.pageY],origin:a(n.target)},w;o.bind(k,s).one(h,function(){o.unbind(k,s);
if(D&&w)if(w.time-D.time<1E3&&Math.abs(D.coords[0]-w.coords[0])>30&&Math.abs(D.coords[1]-w.coords[1])<75)D.origin.trigger("swipe").trigger(D.coords[0]>w.coords[0]?"swipeleft":"swiperight");D=w=b})})}};(function(o){function n(){var w=t();if(w!==D){D=w;s.trigger("orientationchange")}}var s=o(window),t,D;o.event.special.orientationchange={setup:function(){if(o.support.orientation)return false;D=t();s.bind("resize",n)},teardown:function(){if(o.support.orientation)return false;s.unbind("resize",n)},add:function(w){var G=
w.handler;w.handler=function(L){L.orientation=t();return G.apply(this,arguments)}}};t=function(){var w=document.documentElement;return w&&w.clientWidth/w.clientHeight<1.1?"portrait":"landscape"}})(jQuery);a.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(o,n){a.event.special[o]={setup:function(){a(this).bind(n,a.noop)}}})})(jQuery);
(function(a,b,c){function d(t){t=t||location.href;return"#"+t.replace(/^[^#]*#?(.*)$/,"$1")}var f="hashchange",h=document,k,o=a.event.special,n=h.documentMode,s="on"+f in b&&(n===c||n>7);a.fn[f]=function(t){return t?this.bind(f,t):this.trigger(f)};a.fn[f].delay=50;o[f]=a.extend(o[f],{setup:function(){if(s)return false;a(k.start)},teardown:function(){if(s)return false;a(k.stop)}});k=function(){function t(){var S=d(),V=U(G);if(S!==G){O(G=S,V);a(b).trigger(f)}else if(V!==G)location.href=location.href.replace(/#.*/,
"")+V;w=setTimeout(t,a.fn[f].delay)}var D={},w,G=d(),L=function(S){return S},O=L,U=L;D.start=function(){w||t()};D.stop=function(){w&&clearTimeout(w);w=c};a.browser.msie&&!s&&function(){var S,V;D.start=function(){if(!S){V=(V=a.fn[f].src)&&V+d();S=a('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){V||O(d());t()}).attr("src",V||"javascript:0").insertAfter("body")[0].contentWindow;h.onpropertychange=function(){try{if(event.propertyName==="title")S.document.title=h.title}catch(ca){}}}};
D.stop=L;U=function(){return d(S.location.href)};O=function(ca,J){var Q=S.document,W=a.fn[f].domain;if(ca!==J){Q.title=h.title;Q.open();W&&Q.write('<script>document.domain="'+W+'"<\/script>');Q.close();S.location.hash=ca}}}();return D}()})(jQuery,this);
(function(a){a.widget("mobile.page",a.mobile.widget,{options:{backBtnText:"Back",addBackBtn:true,backBtnTheme:null,degradeInputs:{color:false,date:false,datetime:false,"datetime-local":false,email:false,month:false,number:false,range:"number",search:true,tel:false,time:false,url:false,week:false},keepNative:null},_create:function(){var b=this.element,c=this.options;this.keepNative=":jqmData(role='none'), :jqmData(role='nojs')"+(c.keepNative?", "+c.keepNative:"");if(this._trigger("beforeCreate")!==
false){b.find(":jqmData(role='page'), :jqmData(role='content')").andSelf().each(function(){a(this).addClass("ui-"+a(this).jqmData("role"))});b.find(":jqmData(role='nojs')").addClass("ui-nojs");b.find(":jqmData(role)").andSelf().each(function(){var d=a(this),f=d.jqmData("role"),h=d.jqmData("theme");if(f==="header"||f==="footer"){d.addClass("ui-bar-"+(h||d.parent(":jqmData(role='page')").jqmData("theme")||"a"));d.attr("role",f==="header"?"banner":"contentinfo");h=d.children("a");var k=h.hasClass("ui-btn-left"),
o=h.hasClass("ui-btn-right");if(!k)k=h.eq(0).not(".ui-btn-right").addClass("ui-btn-left").length;o||h.eq(1).addClass("ui-btn-right");if(c.addBackBtn&&f==="header"&&a(".ui-page").length>1&&b.jqmData("url")!==a.mobile.path.stripHash(location.hash)&&!k&&d.jqmData("backbtn")!==false){h=a("<a href='#' class='ui-btn-left' data-"+a.mobile.ns+"rel='back' data-"+a.mobile.ns+"icon='arrow-l'>"+c.backBtnText+"</a>").prependTo(d);c.backBtnTheme&&h.attr("data-"+a.mobile.ns+"theme",c.backBtnTheme)}d.children("h1, h2, h3, h4, h5, h6").addClass("ui-title").attr({tabindex:"0",
role:"heading","aria-level":"1"})}else if(f==="content"){h&&d.addClass("ui-body-"+h);d.attr("role","main")}else if(f==="page")d.addClass("ui-body-"+(h||"c"));switch(f){case "header":case "footer":case "page":case "content":d.addClass("ui-"+f);break;case "collapsible":case "fieldcontain":case "navbar":case "listview":case "dialog":d[f]()}});this._enhanceControls();b.find(":jqmData(role='button'), .ui-bar > a, .ui-header > a, .ui-footer > a").not(".ui-btn").not(this.keepNative).buttonMarkup();b.find(":jqmData(role='controlgroup')").controlgroup();
b.find("a:not(.ui-btn):not(.ui-link-inherit)").not(this.keepNative).addClass("ui-link");b.fixHeaderFooter()}},_typeAttributeRegex:/\s+type=["']?\w+['"]?/,_enhanceControls:function(){var b=this.options,c=this;this.element.find("input").not(this.keepNative).each(function(){var h=this.getAttribute("type"),k=b.degradeInputs[h]||"text";b.degradeInputs[h]&&a(this).replaceWith(a("<div>").html(a(this).clone()).html().replace(c._typeAttributeRegex,' type="'+k+'" data-'+a.mobile.ns+'type="'+h+'" '))});var d=
this.element.find("input, textarea, select, button"),f=d.not(this.keepNative);d=d.filter("input[type=text]");d.length&&typeof d[0].autocorrect!=="undefined"&&d.each(function(){this.setAttribute("autocorrect","off");this.setAttribute("autocomplete","off")});f.filter("[type='radio'], [type='checkbox']").checkboxradio();f.filter("button, [type='button'], [type='submit'], [type='reset'], [type='image']").button();f.filter("input, textarea").not("[type='radio'], [type='checkbox'], [type='button'], [type='submit'], [type='reset'], [type='image'], [type='hidden']").textinput();
f.filter("input, select").filter(":jqmData(role='slider'), :jqmData(type='range')").slider();f.filter("select:not(:jqmData(role='slider'))").selectmenu()}})})(jQuery);
(function(a,b){a.extend(a.mobile,{ns:"",subPageUrlKey:"ui-page",nonHistorySelectors:"dialog",activePageClass:"ui-page-active",activeBtnClass:"ui-btn-active",ajaxEnabled:true,hashListeningEnabled:true,ajaxLinksEnabled:true,ajaxFormsEnabled:true,defaultTransition:"slide",loadingMessage:"loading",pageLoadErrorMessage:"Error Loading Page",metaViewportContent:"width=device-width, minimum-scale=1, maximum-scale=1",gradeA:function(){return a.support.mediaquery||a.mobile.browser.ie&&a.mobile.browser.ie>=
7},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},silentScroll:function(d){d=d||0;a.event.special.scrollstart.enabled=false;setTimeout(function(){b.scrollTo(0,d);a(document).trigger("silentscroll",
{x:0,y:d})},20);setTimeout(function(){a.event.special.scrollstart.enabled=true},150)}});a.fn.jqmData=function(d,f){return this.data(d?a.mobile.ns+d:d,f)};a.jqmData=function(d,f,h){return a.data(d,f&&a.mobile.ns+f,h)};a.fn.jqmRemoveData=function(d){return this.removeData(a.mobile.ns+d)};a.jqmRemoveData=function(d,f){return a.removeData(d,f&&a.mobile.ns+f)};a.jqmHasData=function(d,f){return a.hasData(d,f&&a.mobile.ns+f)};var c=a.find;a.find=function(d,f,h,k){d=d.replace(/:jqmData\(([^)]*)\)/g,"[data-"+
(a.mobile.ns||"")+"$1]");return c.call(this,d,f,h,k)};a.extend(a.find,c);a.find.matches=function(d,f){return a.find(d,null,null,f)};a.find.matchesSelector=function(d,f){return a.find(f,null,null,[d]).length>0}})(jQuery,this);
(function(a,b){function c(J){if(o&&(!o.closest(".ui-page-active").length||J))o.removeClass(a.mobile.activeBtnClass);o=null}var d=a(window),f=a("html"),h=a("head"),k={get:function(J){if(J===b)J=location.hash;return k.stripHash(J).replace(/[^\/]*\.[^\/*]+$/,"")},getFilePath:function(J){var Q="&"+a.mobile.subPageUrlKey;return J&&J.split(Q)[0].split(G)[0]},set:function(J){location.hash=J},origin:"",setOrigin:function(){k.origin=k.get(location.protocol+"//"+location.host+location.pathname)},makeAbsolute:function(J){return k.isPath(window.location.hash)?
k.get()+J:J},isPath:function(J){return/\//.test(J)},clean:function(J){return J.replace(RegExp("^"+location.protocol+"//"+location.host+location.pathname),"")},stripHash:function(J){return J.replace(/^#/,"")},isExternal:function(J){return k.hasProtocol(k.clean(J))},hasProtocol:function(J){return/^(:?\w+:)/.test(J)},isRelative:function(J){return/^[^\/|#]/.test(J)&&!k.hasProtocol(J)},isEmbeddedPage:function(J){return/^#/.test(J)}},o=null,n={stack:[],activeIndex:0,getActive:function(){return n.stack[n.activeIndex]},
getPrev:function(){return n.stack[n.activeIndex-1]},getNext:function(){return n.stack[n.activeIndex+1]},addNew:function(J,Q,W,I){n.getNext()&&n.clearForward();n.stack.push({url:J,transition:Q,title:W,page:I});n.activeIndex=n.stack.length-1},clearForward:function(){n.stack=n.stack.slice(0,n.activeIndex+1)},directHashChange:function(J){var Q,W,I;a.each(n.stack,function(i,oa){if(J.currentUrl===oa.url){Q=i<n.activeIndex;W=!Q;I=i}});this.activeIndex=I!==b?I:this.activeIndex;if(Q)J.isBack();else W&&J.isForward()},
ignoreNextHashChange:true},s="[tabindex],a,button:visible,select:visible,input",t=null,D=[],w=false,G="&ui-state=dialog",L=h.children("base"),O=location.protocol+"//"+location.host,U=k.get(O+location.pathname),S=U;if(L.length){var V=L.attr("href");if(V)S=V.search(/^[^:\/]+:\/\/[^\/]+\/?/)===-1?V.charAt(0)==="/"?O+V:U+V:V;S+=S.charAt(S.length-1)==="/"?" ":"/"}var ca=a.support.dynamicBaseTag?{element:L.length?L:a("<base>",{href:S}).prependTo(h),set:function(J){ca.element.attr("href",S+k.get(J))},reset:function(){ca.element.attr("href",
S)}}:b;k.setOrigin();a.fn.animationComplete=function(J){if(a.support.cssTransitions)return a(this).one("webkitAnimationEnd",J);else{setTimeout(J,0);return a(this)}};a.mobile.updateHash=k.set;a.mobile.path=k;a.mobile.base=ca;a.mobile.urlstack=n.stack;a.mobile.urlHistory=n;a.mobile.allowCrossDomainPages=false;a.mobile.changePage=function(J,Q,W,I,i){function oa(){w=false;D.length>0&&a.mobile.changePage.apply(a.mobile,D.pop())}function Ba(){function sa(){if(I!==false&&ka){n.ignoreNextHashChange=false;
k.set(ka)}var va=J.jqmData("title")||J.find(".ui-header .ui-title").text();if(va&&na==document.title)na=va;!X&&!ha&&n.addNew(ka,Q,na,J);document.title=n.getActive().title;c();a.mobile.silentScroll(J.jqmData("lastScroll"));va=J;var Ea=va.jqmData("lastClicked");if(Ea&&Ea.length)Ea.focus();else{Ea=va.find(".ui-title:eq(0)");Ea.length?Ea.focus():va.find(s).eq(0).focus()}pa&&pa.data("page")._trigger("hide",null,{nextPage:J});J.data("page")._trigger("show",null,{prevPage:pa||a("")});a.mobile.activePage=
J;N!==null&&N.remove();f.removeClass("ui-mobile-rendering");oa()}function ta(va){a.mobile.pageContainer.addClass(va);Ia.push(va)}a.mobile.silentScroll();var za=d.scrollTop(),xa=["flip"],Ia=[];if(ka.indexOf("&"+a.mobile.subPageUrlKey)>-1)J=a(":jqmData(url='"+ka+"')");if(pa){pa.jqmData("lastScroll",za).jqmData("lastClicked",o);pa.data("page")._trigger("beforehide",null,{nextPage:J})}J.data("page")._trigger("beforeshow",null,{prevPage:pa||a("")});if(Q&&Q!=="none"){a.mobile.pageLoading(true);a.inArray(Q,
xa)>=0&&ta("ui-mobile-viewport-perspective");ta("ui-mobile-viewport-transitioning");if(pa)pa.addClass(Q+" out "+(W?"reverse":""));J.addClass(a.mobile.activePageClass+" "+Q+" in "+(W?"reverse":""));J.animationComplete(function(){J.add(pa).removeClass("out in reverse "+Q);pa&&pa.removeClass(a.mobile.activePageClass);sa();a.mobile.pageContainer.removeClass(Ia.join(" "));Ia=[]})}else{a.mobile.pageLoading(true);pa&&pa.removeClass(a.mobile.activePageClass);J.addClass(a.mobile.activePageClass);sa()}}function ua(){if(t||
J.jqmData("role")==="dialog"){ka=n.getActive().url+G;if(t){J.attr("data-"+a.mobile.ns+"role",t);t=null}}J.page()}var wa=a.type(J)==="array",ya=a.type(J)==="object",pa=wa?J[0]:a.mobile.activePage;J=wa?J[1]:J;var ka=a.type(J)==="string"?k.stripHash(J):"",ra=ka,Ca,Da="get",Ga=false,N=null,aa=n.getActive(),X=false,ha=false,na=document.title;if(!(aa&&n.stack.length>1&&aa.url===ka&&!wa&&!ya))if(w)D.unshift(arguments);else{w=true;i&&n.directHashChange({currentUrl:ka,isBack:function(){ha=!(X=true);W=true;
Q=Q||aa.transition},isForward:function(){ha=!(X=false);Q=Q||n.getActive().transition}});if(ya&&J.url){ka=J.url;Ca=J.data;Da=J.type;Ga=true;if(Ca&&Da==="get"){if(a.type(Ca)==="object")Ca=a.param(Ca);ka+="?"+Ca;Ca=b}}ca&&ca.reset();if(window.document.activeElement)a(window.document.activeElement||"").add("input:focus, textarea:focus, select:focus").blur();if(ka){J=a(":jqmData(url='"+ka+"')");ra=k.getFilePath(ka)}else{wa=J.attr("data-"+a.mobile.ns+"url");ya=k.getFilePath(wa);if(wa!==ya)ra=ya}if(Q===
b)Q=t&&t==="dialog"?"pop":a.mobile.defaultTransition;if(J.length&&!Ga){ra&&ca&&ca.set(ra);ua();Ba()}else{if(J.length)N=J;a.mobile.pageLoading();a.ajax({url:ra,type:Da,data:Ca,dataType:"html",success:function(sa){var ta=a("<div></div>"),za,xa=sa.match(/<title[^>]*>([^<]*)/)&&RegExp.$1,Ia=RegExp("\\bdata-"+a.mobile.ns+"url=[\"']?([^\"'>]*)[\"']?");if(RegExp(".*(<[^>]+\\bdata-"+a.mobile.ns+"role=[\"']?page[\"']?[^>]*>).*").test(sa)&&RegExp.$1&&Ia.test(RegExp.$1)&&RegExp.$1)za=RegExp.$1;if(za){ca&&ca.set(za);
ka=ra=k.getFilePath(za)}else ca&&ca.set(ra);ta.get(0).innerHTML=sa;J=ta.find(":jqmData(role='page'), :jqmData(role='dialog')").first();if(xa)na=xa;if(!a.support.dynamicBaseTag){var va=k.get(ra);J.find("[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]").each(function(){var Ea=a(this).is("[href]")?"href":"src",Ra=a(this).attr(Ea);Ra=Ra.replace(location.protocol+"//"+location.host+location.pathname,"");/^(\w+:|#|\/)/.test(Ra)||a(this).attr(Ea,va+Ra)})}J.attr("data-"+a.mobile.ns+
"url",ra).appendTo(a.mobile.pageContainer);ua();setTimeout(function(){Ba()},0)},error:function(){a.mobile.pageLoading(true);c(true);ca&&ca.set(k.get());oa();a("<div class='ui-loader ui-overlay-shadow ui-body-e ui-corner-all'><h1>"+a.mobile.pageLoadErrorMessage+"</h1></div>").css({display:"block",opacity:0.96,top:a(window).scrollTop()+100}).appendTo(a.mobile.pageContainer).delay(800).fadeOut(400,function(){a(this).remove()})}})}}};a("form").live("submit",function(J){if(!(!a.mobile.ajaxEnabled||!a.mobile.ajaxFormsEnabled||
a(this).is(":jqmData(ajax='false')"))){var Q=a(this).attr("method"),W=k.clean(a(this).attr("action")),I=a(this).attr("target");if(!(k.isExternal(W)||I)){if(k.isRelative(W))W=k.makeAbsolute(W);a.mobile.changePage({url:W.length&&W||k.get(),type:Q.length&&Q.toLowerCase()||"get",data:a(this).serialize()},a(this).jqmData("transition"),a(this).jqmData("direction"),true);J.preventDefault()}}});a("a").live("vclick",function(){a(this).closest(".ui-btn").not(".ui-disabled").addClass(a.mobile.activeBtnClass)});
a("a").live("click",function(J){var Q=a(this),W=Q.attr("href")||"#",I=k.hasProtocol(W);W=k.clean(W);var i=Q.is("[rel='external']"),oa=k.isEmbeddedPage(W),Ba=a.mobile.allowCrossDomainPages&&location.protocol==="file:"&&W.search(/^https?:/)!=-1;i=k.isExternal(W)&&!Ba||i&&!oa;oa=Q.is("[target]");Ba=Q.is(":jqmData(ajax='false')");var ua=k.stripHash(W)==a.mobile.activePage.jqmData("url");if(Q.is(":jqmData(rel='back')")){window.history.back();return false}if(W.replace(k.get(),"")=="#"||ua)J.preventDefault();
else{o=Q.closest(".ui-btn");if(i||Ba||oa||!a.mobile.ajaxEnabled||!a.mobile.ajaxLinksEnabled)window.setTimeout(function(){c(true)},200);else{i=Q.jqmData("transition");oa=(oa=Q.jqmData("direction"))&&oa==="reverse"||Q.jqmData("back");t=Q.attr("data-"+a.mobile.ns+"rel");if(k.isRelative(W)&&!I)W=k.makeAbsolute(W);W=k.stripHash(W);a.mobile.changePage(W,i,oa);J.preventDefault()}}});d.bind("hashchange",function(){var J=k.stripHash(location.hash),Q=a.mobile.urlHistory.stack.length===0?false:b;if(!a.mobile.hashListeningEnabled||
!n.ignoreNextHashChange){if(!n.ignoreNextHashChange)n.ignoreNextHashChange=true}else{if(n.stack.length>1&&J.indexOf(G)>-1)if(a.mobile.activePage.is(".ui-dialog")){var W=function(){J=a.mobile.urlHistory.getActive().page};n.directHashChange({currentUrl:J,isBack:W,isForward:W})}else{n.directHashChange({currentUrl:J,isBack:function(){window.history.back()},isForward:function(){window.history.forward()}});return}J?a.mobile.changePage(J,Q,b,false,true):a.mobile.changePage(a.mobile.firstPage,Q,true,false,
true)}})})(jQuery);
(function(a,b){a.fn.fixHeaderFooter=function(){if(!a.support.scrollTop)return this;return this.each(function(){var c=a(this);c.jqmData("fullscreen")&&c.addClass("ui-page-fullscreen");c.find(".ui-header:jqmData(position='fixed')").addClass("ui-header-fixed ui-fixed-inline fade");c.find(".ui-footer:jqmData(position='fixed')").addClass("ui-footer-fixed ui-fixed-inline fade")})};a.fixedToolbars=function(){function c(){if(!k&&h=="overlay"){o||a.fixedToolbars.hide(true);a.fixedToolbars.startShowTimer()}}function d(w){var G=
0;if(w){var L=w.offsetParent,O=document.body;for(G=w.offsetTop;w&&w!=O;){G+=w.scrollTop||0;if(w==L){G+=L.offsetTop;L=w.offsetParent}w=w.parentNode}}return G}function f(w){var G=a(window).scrollTop(),L=d(w[0]),O=w.css("top")=="auto"?0:parseFloat(w.css("top")),U=window.innerHeight,S=w.outerHeight(),V=w.parents(".ui-page:not(.ui-page-fullscreen)").length;if(w.is(".ui-header-fixed")){O=G-L+O;if(O<L)O=0;return w.css("top",V?O:G)}else{O=G+U-S-(L-O);return w.css("top",V?O:G+U-S)}}if(a.support.scrollTop){var h=
"inline",k=false,o,n,s=null,t=false,D=true;a(function(){a(document).bind("vmousedown",function(){if(D)s=h}).bind("vclick",function(w){if(D)if(!a(w.target).closest("a,input,textarea,select,button,label,.ui-header-fixed,.ui-footer-fixed").length)if(!t){a.fixedToolbars.toggle(s);s=null}}).bind("scrollstart",function(){t=true;if(s==null)s=h;var w=s=="overlay";if(k=w||!!o){a.fixedToolbars.clearShowTimer();w&&a.fixedToolbars.hide(true)}}).bind("scrollstop",function(w){if(!a(w.target).closest("a,input,textarea,select,button,label,.ui-header-fixed,.ui-footer-fixed").length){t=
false;if(k){k=false;a.fixedToolbars.startShowTimer()}s=null}}).bind("silentscroll",c);a(window).bind("resize",c)});a(".ui-page").live("pagebeforeshow",function(w,G){var L=a(w.target).find(":jqmData(role='footer')"),O=L.data("id"),U=G.prevPage;prevFooter=U&&U.find(":jqmData(role='footer')");U=prevFooter.jqmData("id")===O;if(O&&U){n=L;f(n.removeClass("fade in out").appendTo(a.mobile.pageContainer))}});a(".ui-page").live("pageshow",function(){var w=a(this);n&&n.length&&setTimeout(function(){f(n.appendTo(w).addClass("fade"));
n=null},500);a.fixedToolbars.show(true,this)});return{show:function(w,G){a.fixedToolbars.clearShowTimer();h="overlay";return(G?a(G):a.mobile.activePage?a.mobile.activePage:a(".ui-page-active")).children(".ui-header-fixed:first, .ui-footer-fixed:not(.ui-footer-duplicate):last").each(function(){var L=a(this),O=a(window).scrollTop(),U=d(L[0]),S=window.innerHeight,V=L.outerHeight();O=L.is(".ui-header-fixed")&&O<=U+V||L.is(".ui-footer-fixed")&&U<=O+S;L.addClass("ui-fixed-overlay").removeClass("ui-fixed-inline");
!O&&!w&&L.animationComplete(function(){L.removeClass("in")}).addClass("in");f(L)})},hide:function(w){h="inline";return(a.mobile.activePage?a.mobile.activePage:a(".ui-page-active")).children(".ui-header-fixed:first, .ui-footer-fixed:not(.ui-footer-duplicate):last").each(function(){var G=a(this),L=G.css("top");L=L=="auto"?0:parseFloat(L);G.addClass("ui-fixed-inline").removeClass("ui-fixed-overlay");if(L<0||G.is(".ui-header-fixed")&&L!=0)if(w)G.css("top",0);else G.css("top")!=="auto"&&parseFloat(G.css("top"))!==
0&&G.animationComplete(function(){G.removeClass("out reverse");G.css("top",0)}).addClass("out reverse")})},startShowTimer:function(){a.fixedToolbars.clearShowTimer();var w=a.makeArray(arguments);o=setTimeout(function(){o=b;a.fixedToolbars.show.apply(null,w)},100)},clearShowTimer:function(){o&&clearTimeout(o);o=b},toggle:function(w){if(w)h=w;return h=="overlay"?a.fixedToolbars.hide():a.fixedToolbars.show()},setTouchToggleEnabled:function(w){D=w}}}}()})(jQuery);
(function(a,b){a.widget("mobile.checkboxradio",a.mobile.widget,{options:{theme:null},_create:function(){var c=this,d=this.element,f=d.closest("form,fieldset,:jqmData(role='page')").find("label").filter("[for="+d[0].id+"]"),h=d.attr("type"),k="ui-icon-"+h+"-off";if(!(h!="checkbox"&&h!="radio")){a.extend(this,{label:f,inputtype:h,checkedicon:"ui-icon-"+h+"-on",uncheckedicon:k});if(!this.options.theme)this.options.theme=this.element.jqmData("theme");f.buttonMarkup({theme:this.options.theme,icon:this.element.parents(":jqmData(type='horizontal')").length?
b:k,shadow:false});d.add(f).wrapAll("<div class='ui-"+h+"'></div>");f.bind({vmouseover:function(){if(a(this).parent().is(".ui-disabled"))return false},vclick:function(o){if(d.is(":disabled"))o.preventDefault();else{c._cacheVals();d.attr("checked",h==="radio"&&true||!d.is(":checked"));c._updateAll();return false}}});d.bind({vmousedown:function(){this._cacheVals()},vclick:function(){c._updateAll()},focus:function(){f.addClass("ui-focus")},blur:function(){f.removeClass("ui-focus")}});this.refresh()}},
_cacheVals:function(){this._getInputSet().each(function(){a(this).jqmData("cacheVal",a(this).is(":checked"))})},_getInputSet:function(){return this.element.closest("form,fieldset,:jqmData(role='page')").find("input[name='"+this.element.attr("name")+"'][type='"+this.inputtype+"']")},_updateAll:function(){var c=this;this._getInputSet().each(function(){if(a(this).is(":checked")||c.inputtype==="checkbox")a(this).trigger("change")}).checkboxradio("refresh")},refresh:function(){var c=this.element,d=this.label,
f=d.find(".ui-icon");if(c[0].checked){d.addClass(a.mobile.activeBtnClass);f.addClass(this.checkedicon).removeClass(this.uncheckedicon)}else{d.removeClass(a.mobile.activeBtnClass);f.removeClass(this.checkedicon).addClass(this.uncheckedicon)}c.is(":disabled")?this.disable():this.enable()},disable:function(){this.element.attr("disabled",true).parent().addClass("ui-disabled")},enable:function(){this.element.attr("disabled",false).parent().removeClass("ui-disabled")}})})(jQuery);
(function(a){a.widget("mobile.textinput",a.mobile.widget,{options:{theme:null},_create:function(){var b=this.element,c=this.options,d=c.theme;if(!d){d=this.element.closest("[class*='ui-bar-'],[class*='ui-body-']");d=d.length?/ui-(bar|body)-([a-z])/.exec(d.attr("class"))[2]:"c"}d=" ui-body-"+d;a("label[for="+b.attr("id")+"]").addClass("ui-input-text");b.addClass("ui-input-text ui-body-"+c.theme);var f=b;if(b.is("[type='search'],:jqmData(type='search')")){f=b.wrap('<div class="ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield'+
d+'"></div>').parent();var h=a('<a href="#" class="ui-input-clear" title="clear text">clear text</a>').tap(function(n){b.val("").focus();b.trigger("change");h.addClass("ui-input-clear-hidden");n.preventDefault()}).appendTo(f).buttonMarkup({icon:"delete",iconpos:"notext",corners:true,shadow:true});c=function(){b.val()==""?h.addClass("ui-input-clear-hidden"):h.removeClass("ui-input-clear-hidden")};c();b.keyup(c)}else b.addClass("ui-corner-all ui-shadow-inset"+d);b.focus(function(){f.addClass("ui-focus")}).blur(function(){f.removeClass("ui-focus")});
if(b.is("textarea")){var k=function(){var n=b[0].scrollHeight;b[0].clientHeight<n&&b.css({height:n+15})},o;b.keyup(function(){clearTimeout(o);o=setTimeout(k,100)})}},disable:function(){(this.element.attr("disabled",true).is("[type='search'],:jqmData(type='search')")?this.element.parent():this.element).addClass("ui-disabled")},enable:function(){(this.element.attr("disabled",false).is("[type='search'],:jqmData(type='search')")?this.element.parent():this.element).removeClass("ui-disabled")}})})(jQuery);
(function(a){a.widget("mobile.selectmenu",a.mobile.widget,{options:{theme:null,disabled:false,icon:"arrow-d",iconpos:"right",inline:null,corners:true,shadow:true,iconshadow:true,menuPageTheme:"b",overlayTheme:"a",hidePlaceholderMenuItems:true,closeText:"Close",nativeMenu:true},_create:function(){var b=this,c=this.options,d=this.element.wrap("<div class='ui-select'>"),f=d.attr("id"),h=a("label[for="+f+"]").addClass("ui-select"),k=d[0].selectedIndex==-1?0:d[0].selectedIndex,o=(b.options.nativeMenu?
a("<div/>"):a("<a>",{href:"#",role:"button",id:t,"aria-haspopup":"true","aria-owns":D})).text(a(d[0].options.item(k)).text()).insertBefore(d).buttonMarkup({theme:c.theme,icon:c.icon,iconpos:c.iconpos,inline:c.inline,corners:c.corners,shadow:c.shadow,iconshadow:c.iconshadow}),n=b.isMultiple=d[0].multiple;c.nativeMenu&&window.opera&&window.opera.version&&d.addClass("ui-select-nativeonly");if(!c.nativeMenu){var s=d.find("option"),t=f+"-button",D=f+"-menu",w=d.closest(".ui-page");k=/ui-btn-up-([a-z])/.exec(o.attr("class"))[1];
var G=a("<div data-"+a.mobile.ns+"role='dialog' data-"+a.mobile.ns+"theme='"+c.menuPageTheme+"'><div data-"+a.mobile.ns+"role='header'><div class='ui-title'>"+h.text()+"</div></div><div data-"+a.mobile.ns+"role='content'></div></div>").appendTo(a.mobile.pageContainer).page(),L=G.find(".ui-content");G.find(".ui-header a");var O=a("<div>",{"class":"ui-selectmenu-screen ui-screen-hidden"}).appendTo(w),U=a("<div>",{"class":"ui-selectmenu ui-selectmenu-hidden ui-overlay-shadow ui-corner-all pop ui-body-"+
c.overlayTheme}).insertAfter(O),S=a("<ul>",{"class":"ui-selectmenu-list",id:D,role:"listbox","aria-labelledby":t}).attr("data-"+a.mobile.ns+"theme",k).appendTo(U),V=a("<div>",{"class":"ui-header ui-bar-"+k}).prependTo(U),ca=a("<h1>",{"class":"ui-title"}).appendTo(V),J=a("<a>",{text:c.closeText,href:"#","class":"ui-btn-left"}).attr("data-"+a.mobile.ns+"iconpos","notext").attr("data-"+a.mobile.ns+"icon","delete").appendTo(V).buttonMarkup()}if(n)b.buttonCount=a("<span>").addClass("ui-li-count ui-btn-up-c ui-btn-corner-all").hide().appendTo(o);
c.disabled&&this.disable();d.change(function(){b.refresh()});a.extend(b,{select:d,optionElems:s,selectID:f,label:h,buttonId:t,menuId:D,thisPage:w,button:o,menuPage:G,menuPageContent:L,screen:O,listbox:U,list:S,menuType:void 0,header:V,headerClose:J,headerTitle:ca,placeholder:""});if(c.nativeMenu)d.appendTo(o).bind("vmousedown",function(){o.addClass(a.mobile.activeBtnClass)}).bind("focus vmouseover",function(){o.trigger("vmouseover")}).bind("vmousemove",function(){o.removeClass(a.mobile.activeBtnClass)}).bind("change blur vmouseout",
function(){o.trigger("vmouseout").removeClass(a.mobile.activeBtnClass)});else{b.refresh();d.attr("tabindex","-1").focus(function(){a(this).blur();o.focus()});o.bind("vclick keydown",function(Q){if(Q.type=="vclick"||Q.keyCode&&(Q.keyCode===a.mobile.keyCode.ENTER||Q.keyCode===a.mobile.keyCode.SPACE)){b.open();Q.preventDefault()}});S.attr("role","listbox").delegate(".ui-li>a","focusin",function(){a(this).attr("tabindex","0")}).delegate(".ui-li>a","focusout",function(){a(this).attr("tabindex","-1")}).delegate("li:not(.ui-disabled, .ui-li-divider)",
"vclick",function(Q){var W=d[0].selectedIndex,I=S.find("li:not(.ui-li-divider)").index(this),i=b.optionElems.eq(I)[0];i.selected=n?!i.selected:true;n&&a(this).find(".ui-icon").toggleClass("ui-icon-checkbox-on",i.selected).toggleClass("ui-icon-checkbox-off",!i.selected);W!==I&&d.trigger("change");n||b.close();Q.preventDefault()}).keydown(function(Q){var W=a(Q.target),I=W.closest("li");switch(Q.keyCode){case 38:Q=I.prev();if(Q.length){W.blur().attr("tabindex","-1");Q.find("a").first().focus()}return false;
case 40:Q=I.next();if(Q.length){W.blur().attr("tabindex","-1");Q.find("a").first().focus()}return false;case 13:case 32:W.trigger("vclick");return false}});O.bind("vclick",function(){b.close()});b.headerClose.click(function(){if(b.menuType=="overlay"){b.close();return false}})}},_buildList:function(){var b=this,c=this.options,d=this.placeholder,f=[],h=[],k=b.isMultiple?"checkbox-off":"false";b.list.empty().filter(".ui-listview").listview("destroy");b.select.find("option").each(function(){var o=a(this),
n=o.parent(),s=o.text(),t="<a href='#'>"+s+"</a>",D=[],w=[];if(n.is("optgroup")){n=n.attr("label");if(a.inArray(n,f)===-1){h.push("<li data-"+a.mobile.ns+"role='list-divider'>"+n+"</li>");f.push(n)}}if(!this.getAttribute("value")||s.length==0||o.jqmData("placeholder")){c.hidePlaceholderMenuItems&&D.push("ui-selectmenu-placeholder");d=b.placeholder=s}if(this.disabled){D.push("ui-disabled");w.push("aria-disabled='true'")}h.push("<li data-"+a.mobile.ns+"icon='"+k+"' class='"+D.join(" ")+"' "+w.join(" ")+
">"+t+"</li>")});b.list.html(h.join(" "));b.list.find("li").attr({role:"option",tabindex:"-1"}).first().attr("tabindex","0");this.isMultiple||this.headerClose.hide();!this.isMultiple&&!d.length?this.header.hide():this.headerTitle.text(this.placeholder);b.list.listview()},refresh:function(b){var c=this,d=this.element,f=this.isMultiple,h=this.optionElems=d.find("option"),k=h.filter(":selected"),o=k.map(function(){return h.index(this)}).get();if(!c.options.nativeMenu&&(b||d[0].options.length!=c.list.find("li").length))c._buildList();
c.button.find(".ui-btn-text").text(function(){if(!f)return k.text();return k.length?k.map(function(){return a(this).text()}).get().join(", "):c.placeholder});if(f)c.buttonCount[k.length>1?"show":"hide"]().text(k.length);c.options.nativeMenu||c.list.find("li:not(.ui-li-divider)").removeClass(a.mobile.activeBtnClass).attr("aria-selected",false).each(function(n){if(a.inArray(n,o)>-1){n=a(this).addClass(a.mobile.activeBtnClass);n.find("a").attr("aria-selected",true);f&&n.find(".ui-icon").removeClass("ui-icon-checkbox-off").addClass("ui-icon-checkbox-on")}})},
open:function(){function b(){c.list.find(".ui-btn-active").focus()}if(!(this.options.disabled||this.options.nativeMenu)){var c=this,d=c.list.parent().outerHeight(),f=c.list.parent().outerWidth(),h=a(window).scrollTop(),k=c.button.offset().top,o=window.innerHeight,n=window.innerWidth;c.button.addClass(a.mobile.activeBtnClass);setTimeout(function(){c.button.removeClass(a.mobile.activeBtnClass)},300);if(d>o-80||!a.support.scrollTop){h==0&&k>o&&c.thisPage.one("pagehide",function(){a(this).jqmData("lastScroll",
k)});c.menuPage.one("pageshow",function(){a(window).one("silentscroll",function(){b()})});c.menuType="page";c.menuPageContent.append(c.list);a.mobile.changePage(c.menuPage,"pop",false,true)}else{c.menuType="overlay";c.screen.height(a(document).height()).removeClass("ui-screen-hidden");var s=k-h,t=h+o-k,D=d/2,w=parseFloat(c.list.parent().css("max-width"));d=s>d/2&&t>d/2?k+c.button.outerHeight()/2-D:s>t?h+o-d-30:h+30;if(f<w)w=(n-f)/2;else{w=c.button.offset().left+c.button.outerWidth()/2-f/2;if(w<30)w=
30;else if(w+f>n)w=n-f-30}c.listbox.append(c.list).removeClass("ui-selectmenu-hidden").css({top:d,left:w}).addClass("in");b()}setTimeout(function(){c.isOpen=true},400)}},close:function(){function b(){setTimeout(function(){c.button.focus()},40);c.listbox.removeAttr("style").append(c.list)}if(!(this.options.disabled||!this.isOpen||this.options.nativeMenu)){var c=this;if(c.menuType=="page"){a.mobile.changePage([c.menuPage,c.thisPage],"pop",true,false);c.menuPage.one("pagehide",b)}else{c.screen.addClass("ui-screen-hidden");
c.listbox.addClass("ui-selectmenu-hidden").removeAttr("style").removeClass("in");b()}this.isOpen=false}},disable:function(){this.element.attr("disabled",true);this.button.addClass("ui-disabled").attr("aria-disabled",true);return this._setOption("disabled",true)},enable:function(){this.element.attr("disabled",false);this.button.removeClass("ui-disabled").attr("aria-disabled",false);return this._setOption("disabled",false)}})})(jQuery);
(function(a){a.fn.buttonMarkup=function(c){return this.each(function(){var d=a(this),f=a.extend({},a.fn.buttonMarkup.defaults,d.jqmData(),c),h,k="ui-btn-inner",o;b&&b();if(!f.theme){h=d.closest("[class*='ui-bar-'],[class*='ui-body-']");f.theme=h.length?/ui-(bar|body)-([a-z])/.exec(h.attr("class"))[2]:"c"}h="ui-btn ui-btn-up-"+f.theme;if(f.inline)h+=" ui-btn-inline";if(f.icon){f.icon="ui-icon-"+f.icon;f.iconpos=f.iconpos||"left";o="ui-icon "+f.icon;if(f.shadow)o+=" ui-icon-shadow"}if(f.iconpos){h+=
" ui-btn-icon-"+f.iconpos;f.iconpos=="notext"&&!d.attr("title")&&d.attr("title",d.text())}if(f.corners){h+=" ui-btn-corner-all";k+=" ui-btn-corner-all"}if(f.shadow)h+=" ui-shadow";d.attr("data-"+a.mobile.ns+"theme",f.theme).addClass(h);f=("<D class='"+k+"'><D class='ui-btn-text'></D>"+(f.icon?"<span class='"+o+"'></span>":"")+"</D>").replace(/D/g,f.wrapperEls);d.wrapInner(f)})};a.fn.buttonMarkup.defaults={corners:true,shadow:true,iconshadow:true,wrapperEls:"span"};var b=function(){a(".ui-btn:not(.ui-disabled)").live({vmousedown:function(){var c=
a(this).attr("data-"+a.mobile.ns+"theme");a(this).removeClass("ui-btn-up-"+c).addClass("ui-btn-down-"+c)},"vmousecancel vmouseup":function(){var c=a(this).attr("data-"+a.mobile.ns+"theme");a(this).removeClass("ui-btn-down-"+c).addClass("ui-btn-up-"+c)},"vmouseover focus":function(){var c=a(this).attr("data-"+a.mobile.ns+"theme");a(this).removeClass("ui-btn-up-"+c).addClass("ui-btn-hover-"+c)},"vmouseout blur":function(){var c=a(this).attr("data-"+a.mobile.ns+"theme");a(this).removeClass("ui-btn-hover-"+
c).addClass("ui-btn-up-"+c)}});b=null}})(jQuery);
(function(a){a.widget("mobile.button",a.mobile.widget,{options:{theme:null,icon:null,iconpos:null,inline:null,corners:true,shadow:true,iconshadow:true},_create:function(){var b=this.element,c=this.options;this.button=a("<div></div>").text(b.text()||b.val()).buttonMarkup({theme:c.theme,icon:c.icon,iconpos:c.iconpos,inline:c.inline,corners:c.corners,shadow:c.shadow,iconshadow:c.iconshadow}).insertBefore(b).append(b.addClass("ui-btn-hidden"));c=b.attr("type");c!=="button"&&c!=="reset"&&b.bind("vclick",
function(){var d=a("<input>",{type:"hidden",name:b.attr("name"),value:b.attr("value")}).insertBefore(b);a(document).submit(function(){d.remove()})});this.refresh()},enable:function(){this.element.attr("disabled",false);this.button.removeClass("ui-disabled").attr("aria-disabled",false);return this._setOption("disabled",false)},disable:function(){this.element.attr("disabled",true);this.button.addClass("ui-disabled").attr("aria-disabled",true);return this._setOption("disabled",true)},refresh:function(){this.element.attr("disabled")?
this.disable():this.enable()}})})(jQuery);
(function(a){a.widget("mobile.slider",a.mobile.widget,{options:{theme:null,trackTheme:null,disabled:false},_create:function(){var b=this,c=this.element,d=c.parents("[class*=ui-bar-],[class*=ui-body-]").eq(0);d=d.length?d.attr("class").match(/ui-(bar|body)-([a-z])/)[2]:"c";var f=this.options.theme?this.options.theme:d,h=this.options.trackTheme?this.options.trackTheme:d,k=c[0].nodeName.toLowerCase();d=k=="select"?"ui-slider-switch":"";var o=c.attr("id"),n=o+"-label";o=a("[for="+o+"]").attr("id",n);
var s=function(){return k=="input"?parseFloat(c.val()):c[0].selectedIndex},t=k=="input"?parseFloat(c.attr("min")):0,D=k=="input"?parseFloat(c.attr("max")):c.find("option").length-1,w=window.parseFloat(c.attr("step")||1),G=a('<div class="ui-slider '+d+" ui-btn-down-"+h+' ui-btn-corner-all" role="application"></div>'),L=a('<a href="#" class="ui-slider-handle"></a>').appendTo(G).buttonMarkup({corners:true,theme:f,shadow:true}).attr({role:"slider","aria-valuemin":t,"aria-valuemax":D,"aria-valuenow":s(),
"aria-valuetext":s(),title:s(),"aria-labelledby":n});a.extend(this,{slider:G,handle:L,dragging:false,beforeStart:null});if(k=="select"){G.wrapInner('<div class="ui-slider-inneroffset"></div>');c.find("option");c.find("option").each(function(O){var U=O==0?"b":"a",S=O==0?"right":"left";O=O==0?" ui-btn-down-"+h:" ui-btn-active";a('<div class="ui-slider-labelbg ui-slider-labelbg-'+U+O+" ui-btn-corner-"+S+'"></div>').prependTo(G);a('<span class="ui-slider-label ui-slider-label-'+U+O+" ui-btn-corner-"+
S+'" role="img">'+a(this).text()+"</span>").prependTo(L)})}o.addClass("ui-slider");c.addClass(k=="input"?"ui-slider-input":"ui-slider-switch").change(function(){b.refresh(s(),true)}).keyup(function(){b.refresh(s(),true,true)}).blur(function(){b.refresh(s(),true)});a(document).bind("vmousemove",function(O){if(b.dragging){b.refresh(O);return false}});G.bind("vmousedown",function(O){b.dragging=true;if(k==="select")b.beforeStart=c[0].selectedIndex;b.refresh(O);return false});G.add(document).bind("vmouseup",
function(){if(b.dragging){b.dragging=false;if(k==="select"){if(b.beforeStart===c[0].selectedIndex)b.refresh(b.beforeStart===0?1:0);var O=s();O=Math.round(O/(D-t)*100);L.addClass("ui-slider-handle-snapping").css("left",O+"%").animationComplete(function(){L.removeClass("ui-slider-handle-snapping")})}return false}});G.insertAfter(c);this.handle.bind("vmousedown",function(){a(this).focus()}).bind("vclick",false);this.handle.bind("keydown",function(O){var U=s();if(!b.options.disabled){switch(O.keyCode){case a.mobile.keyCode.HOME:case a.mobile.keyCode.END:case a.mobile.keyCode.PAGE_UP:case a.mobile.keyCode.PAGE_DOWN:case a.mobile.keyCode.UP:case a.mobile.keyCode.RIGHT:case a.mobile.keyCode.DOWN:case a.mobile.keyCode.LEFT:O.preventDefault();
if(!b._keySliding){b._keySliding=true;a(this).addClass("ui-state-active")}}switch(O.keyCode){case a.mobile.keyCode.HOME:b.refresh(t);break;case a.mobile.keyCode.END:b.refresh(D);break;case a.mobile.keyCode.PAGE_UP:case a.mobile.keyCode.UP:case a.mobile.keyCode.RIGHT:b.refresh(U+w);break;case a.mobile.keyCode.PAGE_DOWN:case a.mobile.keyCode.DOWN:case a.mobile.keyCode.LEFT:b.refresh(U-w)}}}).keyup(function(){if(b._keySliding){b._keySliding=false;a(this).removeClass("ui-state-active")}});this.refresh()},
refresh:function(b,c,d){if(!this.options.disabled){var f=this.element,h=f[0].nodeName.toLowerCase(),k=h==="input"?parseFloat(f.attr("min")):0,o=h==="input"?parseFloat(f.attr("max")):f.find("option").length-1;if(typeof b==="object"){if(!this.dragging||b.pageX<this.slider.offset().left-8||b.pageX>this.slider.offset().left+this.slider.width()+8)return;b=Math.round((b.pageX-this.slider.offset().left)/this.slider.width()*100)}else{if(b==null)b=h==="input"?parseFloat(f.val()):f[0].selectedIndex;b=(parseFloat(b)-
k)/(o-k)*100}if(!isNaN(b)){if(b<0)b=0;if(b>100)b=100;var n=Math.round(b/100*(o-k))+k;if(n<k)n=k;if(n>o)n=o;this.handle.css("left",b+"%");this.handle.attr({"aria-valuenow":h==="input"?n:f.find("option").eq(n).attr("value"),"aria-valuetext":h==="input"?n:f.find("option").eq(n).text(),title:n});if(h==="select")n===0?this.slider.addClass("ui-slider-switch-a").removeClass("ui-slider-switch-b"):this.slider.addClass("ui-slider-switch-b").removeClass("ui-slider-switch-a");if(!d){if(h==="input")f.val(n);else f[0].selectedIndex=
n;c||f.trigger("change")}}}},enable:function(){this.element.attr("disabled",false);this.slider.removeClass("ui-disabled").attr("aria-disabled",false);return this._setOption("disabled",false)},disable:function(){this.element.attr("disabled",true);this.slider.addClass("ui-disabled").attr("aria-disabled",true);return this._setOption("disabled",true)}})})(jQuery);
(function(a){a.widget("mobile.collapsible",a.mobile.widget,{options:{expandCueText:" click to expand contents",collapseCueText:" click to collapse contents",collapsed:false,heading:">:header,>legend",theme:null,iconTheme:"d"},_create:function(){var b=this.element,c=this.options,d=b.addClass("ui-collapsible-contain"),f=b.find(c.heading).eq(0),h=d.wrapInner('<div class="ui-collapsible-content"></div>').find(".ui-collapsible-content");b=b.closest(":jqmData(role='collapsible-set')").addClass("ui-collapsible-set");
if(f.is("legend")){f=a('<div role="heading">'+f.html()+"</div>").insertBefore(f);f.next().remove()}f.insertBefore(h);f.addClass("ui-collapsible-heading").append('<span class="ui-collapsible-heading-status"></span>').wrapInner('<a href="#" class="ui-collapsible-heading-toggle"></a>').find("a:eq(0)").buttonMarkup({shadow:!!!b.length,corners:false,iconPos:"left",icon:"plus",theme:c.theme}).find(".ui-icon").removeAttr("class").buttonMarkup({shadow:true,corners:true,iconPos:"notext",icon:"plus",theme:c.iconTheme});
if(b.length)d.jqmData("collapsible-last")&&f.find("a:eq(0), .ui-btn-inner").addClass("ui-corner-bottom");else f.find("a:eq(0)").addClass("ui-corner-all").find(".ui-btn-inner").addClass("ui-corner-all");d.bind("collapse",function(k){if(!k.isDefaultPrevented()){k.preventDefault();f.addClass("ui-collapsible-heading-collapsed").find(".ui-collapsible-heading-status").text(c.expandCueText);f.find(".ui-icon").removeClass("ui-icon-minus").addClass("ui-icon-plus");h.addClass("ui-collapsible-content-collapsed").attr("aria-hidden",
true);d.jqmData("collapsible-last")&&f.find("a:eq(0), .ui-btn-inner").addClass("ui-corner-bottom")}}).bind("expand",function(k){if(!k.isDefaultPrevented()){k.preventDefault();f.removeClass("ui-collapsible-heading-collapsed").find(".ui-collapsible-heading-status").text(c.collapseCueText);f.find(".ui-icon").removeClass("ui-icon-plus").addClass("ui-icon-minus");h.removeClass("ui-collapsible-content-collapsed").attr("aria-hidden",false);d.jqmData("collapsible-last")&&f.find("a:eq(0), .ui-btn-inner").removeClass("ui-corner-bottom")}}).trigger(c.collapsed?
"collapse":"expand");if(b.length&&!b.jqmData("collapsiblebound")){b.jqmData("collapsiblebound",true).bind("expand",function(k){a(this).find(".ui-collapsible-contain").not(a(k.target).closest(".ui-collapsible-contain")).not("> .ui-collapsible-contain .ui-collapsible-contain").trigger("collapse")});b=b.find(":jqmData(role=collapsible)");b.first().find("a:eq(0)").addClass("ui-corner-top").find(".ui-btn-inner").addClass("ui-corner-top");b.last().jqmData("collapsible-last",true)}f.bind("vmouseup",function(k){f.is(".ui-collapsible-heading-collapsed")?
d.trigger("expand"):d.trigger("collapse");k.preventDefault()}).bind("vclick",false)}})})(jQuery);
(function(a){a.fn.controlgroup=function(b){return this.each(function(){function c(k){k.removeClass("ui-btn-corner-all ui-shadow").eq(0).addClass(h[0]).end().filter(":last").addClass(h[1]).addClass("ui-controlgroup-last")}var d=a.extend({direction:a(this).jqmData("type")||"vertical",shadow:false},b),f=a(this).find(">legend"),h=d.direction=="horizontal"?["ui-corner-left","ui-corner-right"]:["ui-corner-top","ui-corner-bottom"];a(this).find("input:eq(0)").attr("type");if(f.length){a(this).wrapInner('<div class="ui-controlgroup-controls"></div>');
a('<div role="heading" class="ui-controlgroup-label">'+f.html()+"</div>").insertBefore(a(this).children(0));f.remove()}a(this).addClass("ui-corner-all ui-controlgroup ui-controlgroup-"+d.direction);c(a(this).find(".ui-btn"));c(a(this).find(".ui-btn-inner"));d.shadow&&a(this).addClass("ui-shadow")})}})(jQuery);(function(a){a.fn.fieldcontain=function(){return this.addClass("ui-field-contain ui-body ui-br")}})(jQuery);
(function(a){a.widget("mobile.listview",a.mobile.widget,{options:{theme:"c",countTheme:"c",headerTheme:"b",dividerTheme:"b",splitIcon:"arrow-r",splitTheme:"b",inset:false},_create:function(){var b=this.element,c=this.options;b.addClass("ui-listview");c.inset&&b.addClass("ui-listview-inset ui-corner-all ui-shadow");this._itemApply(b,b);this.refresh(true)},_itemApply:function(b,c){c.find(".ui-li-count").addClass("ui-btn-up-"+(b.jqmData("counttheme")||this.options.countTheme)+" ui-btn-corner-all");c.find("h1, h2, h3, h4, h5, h6").addClass("ui-li-heading");
c.find("p, dl").addClass("ui-li-desc");b.find("li").find(">img:eq(0), >:first>img:eq(0)").addClass("ui-li-thumb").each(function(){a(this).closest("li").addClass(a(this).is(".ui-li-icon")?"ui-li-has-icon":"ui-li-has-thumb")});var d=c.find(".ui-li-aside");d.length&&d.each(function(f,h){a(h).prependTo(a(h).parent())});a.support.cssPseudoElement||a.nodeName(c[0],"ol")},_removeCorners:function(b){b.add(b.find(".ui-btn-inner, .ui-li-link-alt, .ui-li-thumb")).removeClass("ui-corner-top ui-corner-bottom ui-corner-br ui-corner-bl ui-corner-tr ui-corner-tl")},
refresh:function(b){this._createSubPages();var c=this.options,d=this.element,f=this,h=d.jqmData("dividertheme")||c.dividerTheme,k=d.children("li"),o=a.support.cssPseudoElement||!a.nodeName(d[0],"ol")?0:1;o&&d.find(".ui-li-dec").remove();k.each(function(n){var s=a(this),t="ui-li";if(!(!b&&s.hasClass("ui-li"))){var D=s.jqmData("theme")||c.theme,w=s.find(">a");if(w.length){var G=s.jqmData("icon");s.buttonMarkup({wrapperEls:"div",shadow:false,corners:false,iconpos:"right",icon:w.length>1||G===false?false:
G||"arrow-r",theme:D});w.first().addClass("ui-link-inherit");if(w.length>1){t+=" ui-li-has-alt";w=w.last();G=d.jqmData("splittheme")||w.jqmData("theme")||c.splitTheme;w.appendTo(s).attr("title",w.text()).addClass("ui-li-link-alt").empty().buttonMarkup({shadow:false,corners:false,theme:D,icon:false,iconpos:false}).find(".ui-btn-inner").append(a("<span>").buttonMarkup({shadow:true,corners:true,theme:G,iconpos:"notext",icon:d.jqmData("spliticon")||w.jqmData("icon")||c.splitIcon}))}}else if(s.jqmData("role")===
"list-divider"){t+=" ui-li-divider ui-btn ui-bar-"+h;s.attr("role","heading");if(o)o=1}else t+=" ui-li-static ui-body-"+D;if(c.inset){if(n===0){t+=" ui-corner-top";s.add(s.find(".ui-btn-inner")).find(".ui-li-link-alt").addClass("ui-corner-tr").end().find(".ui-li-thumb").addClass("ui-corner-tl");s.next().next().length&&f._removeCorners(s.next())}if(n===k.length-1){t+=" ui-corner-bottom";s.add(s.find(".ui-btn-inner")).find(".ui-li-link-alt").addClass("ui-corner-br").end().find(".ui-li-thumb").addClass("ui-corner-bl");
s.prev().prev().length&&f._removeCorners(s.prev())}}if(o&&t.indexOf("ui-li-divider")<0)(s.is(".ui-li-static:first")?s:s.find(".ui-link-inherit")).addClass("ui-li-jsnumbering").prepend("<span class='ui-li-dec'>"+o++ +". </span>");s.add(s.find(".ui-btn-inner")).addClass(t);b||f._itemApply(d,s)}})},_idStringEscape:function(b){return b.replace(/[^a-zA-Z0-9]/g,"-")},_createSubPages:function(){var b=this.element,c=b.closest(".ui-page"),d=c.jqmData("url"),f=this.options,h=this,k=c.find(":jqmData(role='footer')").jqmData("id");
a(b.find("li>ul, li>ol").toArray().reverse()).each(function(o){var n=a(this),s=n.parent(),t=a(n.prevAll().toArray().reverse());t=t.length?t:a("<span>"+a.trim(s.contents()[0].nodeValue)+"</span>");var D=t.first().text();o=d+"&"+a.mobile.subPageUrlKey+"="+h._idStringEscape(D+" "+o);var w=n.jqmData("theme")||f.theme,G=n.jqmData("counttheme")||b.jqmData("counttheme")||f.countTheme;n.wrap("<div data-"+a.mobile.ns+"role='page'><div data-"+a.mobile.ns+"role='content'></div></div>").parent().before("<div data-"+
a.mobile.ns+"role='header' data-"+a.mobile.ns+"theme='"+f.headerTheme+"'><div class='ui-title'>"+D+"</div></div>").after(k?a("<div data-"+a.mobile.ns+"role='footer'  data-"+a.mobile.ns+"id='"+k+"'>"):"").parent().attr("data-"+a.mobile.ns+"url",o).attr("data-"+a.mobile.ns+"theme",w).attr("data-"+a.mobile.ns+"count-theme",G).appendTo(a.mobile.pageContainer).page();n=s.find("a:first");n.length||(n=a("<a></a>").html(t||D).prependTo(s.empty()));n.attr("href","#"+o)}).listview()}})})(jQuery);
(function(a){a.mobile.listview.prototype.options.filter=false;a.mobile.listview.prototype.options.filterPlaceholder="Filter items...";a(":jqmData(role='listview')").live("listviewcreate",function(){var b=a(this),c=b.data("listview");if(c.options.filter){var d=a("<form>",{"class":"ui-listview-filter ui-bar-c",role:"search"});a("<input>",{placeholder:c.options.filterPlaceholder}).attr("data-"+a.mobile.ns+"type","search").bind("keyup change",function(){var f=this.value.toLowerCase(),h=b.children();h.show();
if(f)for(var k=false,o,n=h.length;n>=0;n--){o=a(h[n]);if(o.is("li:jqmData(role=list-divider)")){k||o.hide();k=false}else if(o.text().toLowerCase().indexOf(f)===-1)o.hide();else k=true}}).appendTo(d).textinput();a(this).jqmData("inset")&&d.addClass("ui-listview-filter-inset");d.insertBefore(b)}})})(jQuery);
(function(a){a.widget("mobile.dialog",a.mobile.widget,{options:{closeBtnText:"Close"},_create:function(){this.element.attr("role","dialog").addClass("ui-page ui-dialog ui-body-a").find(":jqmData(role=header)").addClass("ui-corner-top ui-overlay-shadow").prepend("<a href='#' data-"+a.mobile.ns+"icon='delete' data-"+a.mobile.ns+"rel='back' data-"+a.mobile.ns+"iconpos='notext'>"+this.options.closeBtnText+"</a>").end().find('.ui-content:not([class*="ui-body-"])').addClass("ui-body-c").end().find(".ui-content,:jqmData(role='footer')").last().addClass("ui-corner-bottom ui-overlay-shadow");
this.element.bind("vclick submit",function(b){b=b.type=="vclick"?a(b.target).closest("a"):a(b.target).closest("form");b.length&&!b.jqmData("transition")&&b.attr("data-"+a.mobile.ns+"transition",a.mobile.urlHistory.getActive().transition).attr("data-"+a.mobile.ns+"direction","reverse")})},close:function(){window.history.back()}})})(jQuery);
(function(a,b){a.widget("mobile.navbar",a.mobile.widget,{options:{iconpos:"top",grid:null},_create:function(){var c=this.element,d=c.find("a"),f=d.filter(":jqmData(icon)").length?this.options.iconpos:b;c.addClass("ui-navbar").attr("role","navigation").find("ul").grid({grid:this.options.grid});f||c.addClass("ui-navbar-noicons");d.buttonMarkup({corners:false,shadow:false,iconpos:f});c.delegate("a","vclick",function(){d.not(".ui-state-persist").removeClass(a.mobile.activeBtnClass);a(this).addClass(a.mobile.activeBtnClass)})}})})(jQuery);
(function(a){a.fn.grid=function(b){return this.each(function(){var c=a.extend({grid:null},b),d=a(this).children(),f={solo:1,a:2,b:3,c:4,d:5};c=c.grid;if(!c)if(d.length<=5)for(var h in f){if(f[h]==d.length)c=h}else c="a";f=f[c];a(this).addClass("ui-grid-"+c);d.filter(":nth-child("+f+"n+1)").addClass("ui-block-a");f>1&&d.filter(":nth-child("+f+"n+2)").addClass("ui-block-b");f>2&&d.filter(":nth-child(3n+3)").addClass("ui-block-c");f>3&&d.filter(":nth-child(4n+4)").addClass("ui-block-d");f>4&&d.filter(":nth-child(5n+5)").addClass("ui-block-e")})}})(jQuery);
(function(a,b,c){var d=a("html"),f=a("head"),h=a(b);a(b.document).trigger("mobileinit");if(a.mobile.gradeA()){d.addClass("ui-mobile ui-mobile-rendering");a.mobile.metaViewportContent&&!f.find("meta[name='viewport']").length&&a("<meta>",{name:"viewport",content:a.mobile.metaViewportContent}).prependTo(f);var k=a.mobile.loadingMessage?a("<div class='ui-loader ui-body-a ui-corner-all'><span class='ui-icon ui-icon-loading spin'></span><h1>"+a.mobile.loadingMessage+"</h1></div>"):c;typeof k==="undefined"&&
alert(a.mobile.loadingMessage);a.extend(a.mobile,{pageLoading:function(o){if(o)d.removeClass("ui-loading");else{if(a.mobile.loadingMessage){o=a("."+a.mobile.activeBtnClass).first();typeof k==="undefined"&&alert(a.mobile.loadingMessage);k.appendTo(a.mobile.pageContainer).css({top:a.support.scrollTop&&a(b).scrollTop()+a(b).height()/2||o.length&&o.offset().top||100})}d.addClass("ui-loading")}},initializePage:function(){var o=a(":jqmData(role='page')");o.add(":jqmData(role='dialog')").each(function(){var n=
a(this);n.jqmData("url")||n.attr("data-"+a.mobile.ns+"url",n.attr("id"))});a.mobile.firstPage=o.first();a.mobile.pageContainer=o.first().parent().addClass("ui-mobile-viewport");a.mobile.pageLoading();!a.mobile.hashListeningEnabled||!a.mobile.path.stripHash(location.hash)?a.mobile.changePage(a.mobile.firstPage,false,true,false,true):h.trigger("hashchange",[true])}});a(a.mobile.initializePage);h.load(a.mobile.silentScroll)}})(jQuery,this);var OpenLayers={VERSION_NUMBER:"$Revision: 10995 $",singleFile:true,_getScriptLocation:function(){for(var a=/(^|(.*?\/))(OpenLayers.js)(\?|$)/,b=document.getElementsByTagName("script"),c,d="",f=0,h=b.length;f<h;f++)if(c=b[f].getAttribute("src"))if(c=c.match(a)){d=c[1];break}return function(){return d}}()};
OpenLayers.String={startsWith:function(a,b){return a.indexOf(b)==0},contains:function(a,b){return a.indexOf(b)!=-1},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(a){a=a.split("-");for(var b=a[0],c=1,d=a.length;c<d;c++){var f=a[c];b+=f.charAt(0).toUpperCase()+f.substring(1)}return b},format:function(a,b,c){b||(b=window);return a.replace(OpenLayers.String.tokenRegEx,function(d,f){for(var h,k=f.split(/\.+/),o=0;o<k.length;o++){if(o==0)h=b;h=h[k[o]]}if(typeof h==
"function")h=c?h.apply(null,c):h();return typeof h=="undefined"?"undefined":h})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(a){return OpenLayers.String.numberRegEx.test(a)},numericIf:function(a){return OpenLayers.String.isNumeric(a)?parseFloat(a):a}};
if(!String.prototype.startsWith)String.prototype.startsWith=function(a){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.String.startsWith"}));return OpenLayers.String.startsWith(this,a)};if(!String.prototype.contains)String.prototype.contains=function(a){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.String.contains"}));return OpenLayers.String.contains(this,a)};
if(!String.prototype.trim)String.prototype.trim=function(){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.String.trim"}));return OpenLayers.String.trim(this)};if(!String.prototype.camelize)String.prototype.camelize=function(){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.String.camelize"}));return OpenLayers.String.camelize(this)};
OpenLayers.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(a,b){var c=0;if(b>0)c=parseFloat(a.toPrecision(b));return c},format:function(a,b,c,d){b=typeof b!="undefined"?b:0;c=typeof c!="undefined"?c:OpenLayers.Number.thousandsSeparator;d=typeof d!="undefined"?d:OpenLayers.Number.decimalSeparator;if(b!=null)a=parseFloat(a.toFixed(b));var f=a.toString().split(".");if(f.length==1&&b==null)b=0;a=f[0];if(c)for(var h=/(-?[0-9]+)([0-9]{3})/;h.test(a);)a=a.replace(h,"$1"+c+"$2");
if(b==0)b=a;else{c=f.length>1?f[1]:"0";if(b!=null)c+=Array(b-c.length+1).join("0");b=a+d+c}return b}};if(!Number.prototype.limitSigDigs)Number.prototype.limitSigDigs=function(a){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.Number.limitSigDigs"}));return OpenLayers.Number.limitSigDigs(this,a)};
OpenLayers.Function={bind:function(a,b){var c=Array.prototype.slice.apply(arguments,[2]);return function(){var d=c.concat(Array.prototype.slice.apply(arguments,[0]));return a.apply(b,d)}},bindAsEventListener:function(a,b){return function(c){return a.call(b,c||window.event)}},False:function(){return false},True:function(){return true},Void:function(){}};
if(!Function.prototype.bind)Function.prototype.bind=function(){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.Function.bind"}));Array.prototype.unshift.apply(arguments,[this]);return OpenLayers.Function.bind.apply(null,arguments)};
if(!Function.prototype.bindAsEventListener)Function.prototype.bindAsEventListener=function(a){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.Function.bindAsEventListener"}));return OpenLayers.Function.bindAsEventListener(this,a)};OpenLayers.Array={filter:function(a,b,c){var d=[];if(Array.prototype.filter)d=a.filter(b,c);else{var f=a.length;if(typeof b!="function")throw new TypeError;for(var h=0;h<f;h++)if(h in a){var k=a[h];b.call(c,k,h,a)&&d.push(k)}}return d}};
OpenLayers.Date={toISOString:function(){if("toISOString"in Date.prototype)return function(b){return b.toISOString()};else{var a=function(b,c){for(var d=b+"";d.length<c;)d="0"+d;return d};return function(b){return isNaN(b.getTime())?"Invalid Date":b.getUTCFullYear()+"-"+a(b.getUTCMonth()+1,2)+"-"+a(b.getUTCDate(),2)+"T"+a(b.getUTCHours(),2)+":"+a(b.getUTCMinutes(),2)+":"+a(b.getUTCSeconds(),2)+"."+a(b.getUTCMilliseconds(),3)+"Z"}}}(),parse:function(a){var b;if((a=a.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))?$/))&&
(a[1]||a[7])){b=parseInt(a[1],10)||0;var c=parseInt(a[2],10)-1||0,d=parseInt(a[3],10)||1;b=new Date(Date.UTC(b,c,d));if(c=a[7]){d=parseInt(a[4],10);var f=parseInt(a[5],10),h=parseFloat(a[6]),k=h|0;b.setUTCHours(d,f,k,Math.round(1E3*(h-k)));if(c!=="Z"){c=parseInt(c,10);a=parseInt(a[8],10)||0;a=-1E3*(60*c*60+a*60);b=new Date(b.getTime()+a)}}}else b=new Date("invalid");return b}};
OpenLayers.Class=function(){var a=arguments.length,b=arguments[0],c=arguments[a-1],d=typeof c.initialize=="function"?c.initialize:function(){b.apply(this,arguments)};if(a>1){a=[d,b].concat(Array.prototype.slice.call(arguments).slice(1,a-1),c);OpenLayers.inherit.apply(null,a)}else d.prototype=c;return d};OpenLayers.Class.isPrototype=function(){};OpenLayers.Class.create=function(){return function(){arguments&&arguments[0]!=OpenLayers.Class.isPrototype&&this.initialize.apply(this,arguments)}};
OpenLayers.Class.inherit=function(a){var b=function(){a.call(this)},c=[b].concat(Array.prototype.slice.call(arguments));OpenLayers.inherit.apply(null,c);return b.prototype};OpenLayers.inherit=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;var d,f;c=2;for(d=arguments.length;c<d;c++){f=arguments[c];if(typeof f==="function")f=f.prototype;OpenLayers.Util.extend(a.prototype,f)}};OpenLayers.Util=OpenLayers.Util||{};
OpenLayers.Util.extend=function(a,b){a=a||{};if(b){for(var c in b){var d=b[c];if(d!==undefined)a[c]=d}if(!(typeof window.Event=="function"&&b instanceof window.Event)&&b.hasOwnProperty&&b.hasOwnProperty("toString"))a.toString=b.toString}return a};OpenLayers.Util=OpenLayers.Util||{};OpenLayers.Util.getElement=function(){for(var a=[],b=0,c=arguments.length;b<c;b++){var d=arguments[b];if(typeof d=="string")d=document.getElementById(d);if(arguments.length==1)return d;a.push(d)}return a};
OpenLayers.Util.isElement=function(a){return!!(a&&a.nodeType===1)};if(typeof window.$==="undefined")window.$=OpenLayers.Util.getElement;OpenLayers.Util.removeItem=function(a,b){for(var c=a.length-1;c>=0;c--)a[c]==b&&a.splice(c,1);return a};OpenLayers.Util.clearArray=function(a){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"array = []"}));a.length=0};
OpenLayers.Util.indexOf=function(a,b){if(typeof a.indexOf=="function")return a.indexOf(b);else{for(var c=0,d=a.length;c<d;c++)if(a[c]==b)return c;return-1}};
OpenLayers.Util.modifyDOMElement=function(a,b,c,d,f,h,k,o){if(b)a.id=b;if(c){a.style.left=c.x+"px";a.style.top=c.y+"px"}if(d){a.style.width=d.w+"px";a.style.height=d.h+"px"}if(f)a.style.position=f;if(h)a.style.border=h;if(k)a.style.overflow=k;if(parseFloat(o)>=0&&parseFloat(o)<1){a.style.filter="alpha(opacity="+o*100+")";a.style.opacity=o}else if(parseFloat(o)==1){a.style.filter="";a.style.opacity=""}};
OpenLayers.Util.createDiv=function(a,b,c,d,f,h,k,o){var n=document.createElement("div");if(d)n.style.backgroundImage="url("+d+")";a||(a=OpenLayers.Util.createUniqueID("OpenLayersDiv"));f||(f="absolute");OpenLayers.Util.modifyDOMElement(n,a,b,c,f,h,k,o);return n};
OpenLayers.Util.createImage=function(a,b,c,d,f,h,k,o){var n=document.createElement("img");a||(a=OpenLayers.Util.createUniqueID("OpenLayersDiv"));f||(f="relative");OpenLayers.Util.modifyDOMElement(n,a,b,c,f,h,null,k);if(o){n.style.display="none";OpenLayers.Event.observe(n,"load",OpenLayers.Function.bind(OpenLayers.Util.onImageLoad,n));OpenLayers.Event.observe(n,"error",OpenLayers.Function.bind(OpenLayers.Util.onImageLoadError,n))}n.style.alt=a;n.galleryImg="no";if(d)n.src=d;return n};
OpenLayers.Util.setOpacity=function(a,b){OpenLayers.Util.modifyDOMElement(a,null,null,null,null,null,null,b)};OpenLayers.Util.onImageLoad=function(){if(!this.viewRequestID||this.map&&this.viewRequestID==this.map.viewRequestID)this.style.display="";OpenLayers.Element.removeClass(this,"olImageLoadError")};OpenLayers.IMAGE_RELOAD_ATTEMPTS=0;
OpenLayers.Util.onImageLoadError=function(){this._attempts=this._attempts?this._attempts+1:1;if(this._attempts<=OpenLayers.IMAGE_RELOAD_ATTEMPTS){var a=this.urls;if(a&&a instanceof Array&&a.length>1){var b=this.src.toString(),c,d;for(d=0;c=a[d];d++)if(b.indexOf(c)!=-1)break;var f=Math.floor(a.length*Math.random());f=a[f];for(d=0;f==c&&d++<4;){f=Math.floor(a.length*Math.random());f=a[f]}this.src=b.replace(c,f)}else this.src=this.src}else OpenLayers.Element.addClass(this,"olImageLoadError");this.style.display=
""};OpenLayers.Util.alphaHackNeeded=null;OpenLayers.Util.alphaHack=function(){if(OpenLayers.Util.alphaHackNeeded==null){var a=navigator.appVersion.split("MSIE");a=parseFloat(a[1]);var b=false;try{b=!!document.body.filters}catch(c){}OpenLayers.Util.alphaHackNeeded=b&&a>=5.5&&a<7}return OpenLayers.Util.alphaHackNeeded};
OpenLayers.Util.modifyAlphaImageDiv=function(a,b,c,d,f,h,k,o,n){OpenLayers.Util.modifyDOMElement(a,b,c,d,h,null,null,n);b=a.childNodes[0];if(f)b.src=f;OpenLayers.Util.modifyDOMElement(b,a.id+"_innerImage",null,d,"relative",k);if(OpenLayers.Util.alphaHack()){if(a.style.display!="none")a.style.display="inline-block";if(o==null)o="scale";a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b.src+"', sizingMethod='"+o+"')";if(parseFloat(a.style.opacity)>=0&&parseFloat(a.style.opacity)<
1)a.style.filter+=" alpha(opacity="+a.style.opacity*100+")";b.style.filter="alpha(opacity=0)"}};
OpenLayers.Util.createAlphaImageDiv=function(a,b,c,d,f,h,k,o,n){var s=OpenLayers.Util.createDiv(),t=OpenLayers.Util.createImage(null,null,null,null,null,null,null,false);s.appendChild(t);if(n){t.style.display="none";OpenLayers.Event.observe(t,"load",OpenLayers.Function.bind(OpenLayers.Util.onImageLoad,s));OpenLayers.Event.observe(t,"error",OpenLayers.Function.bind(OpenLayers.Util.onImageLoadError,s))}OpenLayers.Util.modifyAlphaImageDiv(s,a,b,c,d,f,h,k,o);return s};
OpenLayers.Util.upperCaseObject=function(a){var b={},c;for(c in a)b[c.toUpperCase()]=a[c];return b};OpenLayers.Util.applyDefaults=function(a,b){a=a||{};var c=typeof window.Event=="function"&&b instanceof window.Event,d;for(d in b)if(a[d]===undefined||!c&&b.hasOwnProperty&&b.hasOwnProperty(d)&&!a.hasOwnProperty(d))a[d]=b[d];if(!c&&b&&b.hasOwnProperty&&b.hasOwnProperty("toString")&&!a.hasOwnProperty("toString"))a.toString=b.toString;return a};
OpenLayers.Util.getParameterString=function(a){var b=[],c;for(c in a){var d=a[c];if(d!=null&&typeof d!="function"){if(typeof d=="object"&&d.constructor==Array){for(var f=[],h,k=0,o=d.length;k<o;k++){h=d[k];f.push(encodeURIComponent(h===null||h===undefined?"":h))}d=f.join(",")}else d=encodeURIComponent(d);b.push(encodeURIComponent(c)+"="+d)}}return b.join("&")};OpenLayers.Util.urlAppend=function(a,b){var c=a;if(b){var d=(a+" ").split(/[?&]/);c+=d.pop()===" "?b:d.length?"&"+b:"?"+b}return c};
OpenLayers.ImgPath="";OpenLayers.Util.getImagesLocation=function(){return OpenLayers.ImgPath||OpenLayers._getScriptLocation()+"img/"};OpenLayers.Util.Try=function(){for(var a=null,b=0,c=arguments.length;b<c;b++){var d=arguments[b];try{a=d();break}catch(f){}}return a};OpenLayers.Util.getNodes=function(a,b){return OpenLayers.Util.Try(function(){return OpenLayers.Util._getNodes(a.documentElement.childNodes,b)},function(){return OpenLayers.Util._getNodes(a.childNodes,b)})};
OpenLayers.Util._getNodes=function(a,b){for(var c=[],d=0,f=a.length;d<f;d++)a[d].nodeName==b&&c.push(a[d]);return c};OpenLayers.Util.getTagText=function(a,b,c){if((a=OpenLayers.Util.getNodes(a,b))&&a.length>0){c||(c=0);if(a[c].childNodes.length>1)return a.childNodes[1].nodeValue;else if(a[c].childNodes.length==1)return a[c].firstChild.nodeValue}else return""};
OpenLayers.Util.getXmlNodeValue=function(a){var b=null;OpenLayers.Util.Try(function(){b=a.text;if(!b)b=a.textContent;if(!b)b=a.firstChild.nodeValue},function(){b=a.textContent});return b};OpenLayers.Util.mouseLeft=function(a,b){for(var c=a.relatedTarget?a.relatedTarget:a.toElement;c!=b&&c!=null;)c=c.parentNode;return c!=b};OpenLayers.Util.DEFAULT_PRECISION=14;
OpenLayers.Util.toFloat=function(a,b){if(b==null)b=OpenLayers.Util.DEFAULT_PRECISION;if(typeof a!=="number")a=parseFloat(a);return b===0?a:parseFloat(a.toPrecision(b))};OpenLayers.Util.rad=function(a){return a*Math.PI/180};OpenLayers.Util.deg=function(a){return a*180/Math.PI};OpenLayers.Util.VincentyConstants={a:6378137,b:6356752.3142,f:1/298.257223563};
OpenLayers.Util.distVincenty=function(a,b){var c=OpenLayers.Util.VincentyConstants,d=c.a,f=c.b;c=c.f;var h=OpenLayers.Util.rad(b.lon-a.lon),k=Math.atan((1-c)*Math.tan(OpenLayers.Util.rad(a.lat))),o=Math.atan((1-c)*Math.tan(OpenLayers.Util.rad(b.lat))),n=Math.sin(k);k=Math.cos(k);var s=Math.sin(o);o=Math.cos(o);for(var t=h,D=2*Math.PI,w=20;Math.abs(t-D)>1.0E-12&&--w>0;){var G=Math.sin(t),L=Math.cos(t),O=Math.sqrt(o*G*o*G+(k*s-n*o*L)*(k*s-n*o*L));if(O==0)return 0;L=n*s+k*o*L;var U=Math.atan2(O,L),S=
Math.asin(k*o*G/O),V=Math.cos(S)*Math.cos(S);G=L-2*n*s/V;var ca=c/16*V*(4+c*(4-3*V));D=t;t=h+(1-ca)*c*Math.sin(S)*(U+ca*O*(G+ca*L*(-1+2*G*G)))}if(w==0)return NaN;d=V*(d*d-f*f)/(f*f);c=d/1024*(256+d*(-128+d*(74-47*d)));return(f*(1+d/16384*(4096+d*(-768+d*(320-175*d))))*(U-c*O*(G+c/4*(L*(-1+2*G*G)-c/6*G*(-3+4*O*O)*(-3+4*G*G))))).toFixed(3)/1E3};
OpenLayers.Util.destinationVincenty=function(a,b,c){var d=OpenLayers.Util,f=d.VincentyConstants,h=f.a,k=f.b;f=f.f;var o=a.lon,n=a.lat;a=d.rad(b);b=Math.sin(a);a=Math.cos(a);var s=(1-f)*Math.tan(d.rad(n));n=1/Math.sqrt(1+s*s);var t=s*n,D=Math.atan2(s,a);s=n*b;var w=1-s*s;h=w*(h*h-k*k)/(k*k);var G=1+h/16384*(4096+h*(-768+h*(320-175*h))),L=h/1024*(256+h*(-128+h*(74-47*h)));h=c/(k*G);for(var O=2*Math.PI;Math.abs(h-O)>1.0E-12;){var U=Math.cos(2*D+h),S=Math.sin(h),V=Math.cos(h),ca=L*S*(U+L/4*(V*(-1+2*U*
U)-L/6*U*(-3+4*S*S)*(-3+4*U*U)));O=h;h=c/(k*G)+ca}c=t*S-n*V*a;c=Math.atan2(t*V+n*S*a,(1-f)*Math.sqrt(s*s+c*c));k=f/16*w*(4+f*(4-3*w));return new OpenLayers.LonLat(o+d.deg(Math.atan2(S*b,n*V-t*S*a)-(1-k)*f*s*(h+k*S*(U+k*V*(-1+2*U*U)))),d.deg(c))};
OpenLayers.Util.getParameters=function(a){a=a||window.location.href;var b="";if(OpenLayers.String.contains(a,"?")){b=a.indexOf("?")+1;var c=OpenLayers.String.contains(a,"#")?a.indexOf("#"):a.length;b=a.substring(b,c)}a={};b=b.split(/[&;]/);c=0;for(var d=b.length;c<d;++c){var f=b[c].split("=");if(f[0]){var h=f[0];try{h=decodeURIComponent(h)}catch(k){h=unescape(h)}f=(f[1]||"").replace(/\+/g," ");try{f=decodeURIComponent(f)}catch(o){f=unescape(f)}f=f.split(",");if(f.length==1)f=f[0];a[h]=f}}return a};
OpenLayers.Util.getArgs=function(a){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.Util.getParameters"}));return OpenLayers.Util.getParameters(a)};OpenLayers.Util.lastSeqID=0;OpenLayers.Util.createUniqueID=function(a){if(a==null)a="id_";OpenLayers.Util.lastSeqID+=1;return a+OpenLayers.Util.lastSeqID};OpenLayers.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};OpenLayers.INCHES_PER_UNIT["in"]=OpenLayers.INCHES_PER_UNIT.inches;
OpenLayers.INCHES_PER_UNIT.degrees=OpenLayers.INCHES_PER_UNIT.dd;OpenLayers.INCHES_PER_UNIT.nmi=1852*OpenLayers.INCHES_PER_UNIT.m;OpenLayers.METERS_PER_INCH=0.0254000508001016;
OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{Inch:OpenLayers.INCHES_PER_UNIT.inches,Meter:1/OpenLayers.METERS_PER_INCH,Foot:0.3048006096012192/OpenLayers.METERS_PER_INCH,IFoot:0.3048/OpenLayers.METERS_PER_INCH,ClarkeFoot:0.3047972651151/OpenLayers.METERS_PER_INCH,SearsFoot:0.30479947153867626/OpenLayers.METERS_PER_INCH,GoldCoastFoot:0.3047997101815088/OpenLayers.METERS_PER_INCH,IInch:0.0254/OpenLayers.METERS_PER_INCH,MicroInch:2.54E-5/OpenLayers.METERS_PER_INCH,Mil:2.54E-8/OpenLayers.METERS_PER_INCH,
Centimeter:0.01/OpenLayers.METERS_PER_INCH,Kilometer:1E3/OpenLayers.METERS_PER_INCH,Yard:0.9144018288036576/OpenLayers.METERS_PER_INCH,SearsYard:0.914398414616029/OpenLayers.METERS_PER_INCH,IndianYard:0.9143985307444408/OpenLayers.METERS_PER_INCH,IndianYd37:0.91439523/OpenLayers.METERS_PER_INCH,IndianYd62:0.9143988/OpenLayers.METERS_PER_INCH,IndianYd75:0.9143985/OpenLayers.METERS_PER_INCH,IndianFoot:0.30479951/OpenLayers.METERS_PER_INCH,IndianFt37:0.30479841/OpenLayers.METERS_PER_INCH,IndianFt62:0.3047996/
OpenLayers.METERS_PER_INCH,IndianFt75:0.3047995/OpenLayers.METERS_PER_INCH,Mile:1609.3472186944373/OpenLayers.METERS_PER_INCH,IYard:0.9144/OpenLayers.METERS_PER_INCH,IMile:1609.344/OpenLayers.METERS_PER_INCH,NautM:1852/OpenLayers.METERS_PER_INCH,"Lat-66":110943.31648893273/OpenLayers.METERS_PER_INCH,"Lat-83":110946.25736872235/OpenLayers.METERS_PER_INCH,Decimeter:0.1/OpenLayers.METERS_PER_INCH,Millimeter:0.0010/OpenLayers.METERS_PER_INCH,Dekameter:10/OpenLayers.METERS_PER_INCH,Decameter:10/OpenLayers.METERS_PER_INCH,
Hectometer:100/OpenLayers.METERS_PER_INCH,GermanMeter:1.0000135965/OpenLayers.METERS_PER_INCH,CaGrid:0.999738/OpenLayers.METERS_PER_INCH,ClarkeChain:20.1166194976/OpenLayers.METERS_PER_INCH,GunterChain:20.11684023368047/OpenLayers.METERS_PER_INCH,BenoitChain:20.116782494375872/OpenLayers.METERS_PER_INCH,SearsChain:20.11676512155/OpenLayers.METERS_PER_INCH,ClarkeLink:0.201166194976/OpenLayers.METERS_PER_INCH,GunterLink:0.2011684023368047/OpenLayers.METERS_PER_INCH,BenoitLink:0.20116782494375873/OpenLayers.METERS_PER_INCH,
SearsLink:0.2011676512155/OpenLayers.METERS_PER_INCH,Rod:5.02921005842012/OpenLayers.METERS_PER_INCH,IntnlChain:20.1168/OpenLayers.METERS_PER_INCH,IntnlLink:0.201168/OpenLayers.METERS_PER_INCH,Perch:5.02921005842012/OpenLayers.METERS_PER_INCH,Pole:5.02921005842012/OpenLayers.METERS_PER_INCH,Furlong:201.1684023368046/OpenLayers.METERS_PER_INCH,Rood:3.778266898/OpenLayers.METERS_PER_INCH,CapeFoot:0.3047972615/OpenLayers.METERS_PER_INCH,Brealey:375/OpenLayers.METERS_PER_INCH,ModAmFt:0.304812252984506/
OpenLayers.METERS_PER_INCH,Fathom:1.8288/OpenLayers.METERS_PER_INCH,"NautM-UK":1853.184/OpenLayers.METERS_PER_INCH,"50kilometers":5E4/OpenLayers.METERS_PER_INCH,"150kilometers":15E4/OpenLayers.METERS_PER_INCH});
OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{mm:OpenLayers.INCHES_PER_UNIT.Meter/1E3,cm:OpenLayers.INCHES_PER_UNIT.Meter/100,dm:OpenLayers.INCHES_PER_UNIT.Meter*100,km:OpenLayers.INCHES_PER_UNIT.Meter*1E3,kmi:OpenLayers.INCHES_PER_UNIT.nmi,fath:OpenLayers.INCHES_PER_UNIT.Fathom,ch:OpenLayers.INCHES_PER_UNIT.IntnlChain,link:OpenLayers.INCHES_PER_UNIT.IntnlLink,"us-in":OpenLayers.INCHES_PER_UNIT.inches,"us-ft":OpenLayers.INCHES_PER_UNIT.Foot,"us-yd":OpenLayers.INCHES_PER_UNIT.Yard,"us-ch":OpenLayers.INCHES_PER_UNIT.GunterChain,
"us-mi":OpenLayers.INCHES_PER_UNIT.Mile,"ind-yd":OpenLayers.INCHES_PER_UNIT.IndianYd37,"ind-ft":OpenLayers.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/OpenLayers.METERS_PER_INCH});OpenLayers.DOTS_PER_INCH=72;OpenLayers.Util.normalizeScale=function(a){return a>1?1/a:a};OpenLayers.Util.getResolutionFromScale=function(a,b){var c;if(a){if(b==null)b="degrees";c=1/(OpenLayers.Util.normalizeScale(a)*OpenLayers.INCHES_PER_UNIT[b]*OpenLayers.DOTS_PER_INCH)}return c};
OpenLayers.Util.getScaleFromResolution=function(a,b){if(b==null)b="degrees";return a*OpenLayers.INCHES_PER_UNIT[b]*OpenLayers.DOTS_PER_INCH};OpenLayers.Util.safeStopPropagation=function(a){OpenLayers.Event.stop(a,true)};
OpenLayers.Util.pagePosition=function(a){var b=[0,0],c=OpenLayers.Util.getViewportElement();if(!a||a==window||a==c)return b;var d=OpenLayers.IS_GECKO&&document.getBoxObjectFor&&OpenLayers.Element.getStyle(a,"position")=="absolute"&&(a.style.top==""||a.style.left==""),f=null;if(a.getBoundingClientRect){a=a.getBoundingClientRect();f=c.scrollTop;b[0]=a.left+c.scrollLeft;b[1]=a.top+f}else if(document.getBoxObjectFor&&!d){a=document.getBoxObjectFor(a);c=document.getBoxObjectFor(c);b[0]=a.screenX-c.screenX;
b[1]=a.screenY-c.screenY}else{b[0]=a.offsetLeft;b[1]=a.offsetTop;f=a.offsetParent;if(f!=a)for(;f;){b[0]+=f.offsetLeft;b[1]+=f.offsetTop;f=f.offsetParent}c=OpenLayers.BROWSER_NAME;if(c=="opera"||c=="safari"&&OpenLayers.Element.getStyle(a,"position")=="absolute")b[1]-=document.body.offsetTop;for(f=a.offsetParent;f&&f!=document.body;){b[0]-=f.scrollLeft;if(c!="opera"||f.tagName!="TR")b[1]-=f.scrollTop;f=f.offsetParent}}return b};
OpenLayers.Util.getViewportElement=function(){var a=arguments.callee.viewportElement;if(a==undefined){a=OpenLayers.BROWSER_NAME=="msie"&&document.compatMode!="CSS1Compat"?document.body:document.documentElement;arguments.callee.viewportElement=a}return a};
OpenLayers.Util.isEquivalentUrl=function(a,b,c){c=c||{};OpenLayers.Util.applyDefaults(c,{ignoreCase:true,ignorePort80:true,ignoreHash:true});a=OpenLayers.Util.createUrlObject(a,c);b=OpenLayers.Util.createUrlObject(b,c);for(var d in a)if(d!=="args")if(a[d]!=b[d])return false;for(d in a.args){if(a.args[d]!=b.args[d])return false;delete b.args[d]}for(d in b.args)return false;return true};
OpenLayers.Util.createUrlObject=function(a,b){b=b||{};if(!/^\w+:\/\//.test(a)){var c=window.location,d=c.port?":"+c.port:"";d=c.protocol+"//"+c.host.split(":").shift()+d;if(a.indexOf("/")===0)a=d+a;else{c=c.pathname.split("/");c.pop();a=d+c.join("/")+"/"+a}}if(b.ignoreCase)a=a.toLowerCase();c=document.createElement("a");c.href=a;d={};d.host=c.host.split(":").shift();d.protocol=c.protocol;d.port=b.ignorePort80?c.port=="80"||c.port=="0"?"":c.port:c.port==""||c.port=="0"?"80":c.port;d.hash=b.ignoreHash||
c.hash==="#"?"":c.hash;var f=c.search;if(!f){f=a.indexOf("?");f=f!=-1?a.substr(f):""}d.args=OpenLayers.Util.getParameters(f);d.pathname=c.pathname.charAt(0)=="/"?c.pathname:"/"+c.pathname;return d};OpenLayers.Util.removeTail=function(a){var b=null;b=a.indexOf("?");var c=a.indexOf("#");return b=b==-1?c!=-1?a.substr(0,c):a:c!=-1?a.substr(0,Math.min(b,c)):a.substr(0,b)};OpenLayers.IS_GECKO=function(){var a=navigator.userAgent.toLowerCase();return a.indexOf("webkit")==-1&&a.indexOf("gecko")!=-1}();
OpenLayers.BROWSER_NAME=function(){var a="",b=navigator.userAgent.toLowerCase();if(b.indexOf("opera")!=-1)a="opera";else if(b.indexOf("msie")!=-1)a="msie";else if(b.indexOf("safari")!=-1)a="safari";else if(b.indexOf("mozilla")!=-1)a=b.indexOf("firefox")!=-1?"firefox":"mozilla";return a}();OpenLayers.Util.getBrowserName=function(){return OpenLayers.BROWSER_NAME};
OpenLayers.Util.getRenderedDimensions=function(a,b,c){var d,f,h=document.createElement("div");h.style.visibility="hidden";var k=c&&c.containerElement?c.containerElement:document.body;if(b)if(b.w){d=b.w;h.style.width=d+"px"}else if(b.h){f=b.h;h.style.height=f+"px"}if(c&&c.displayClass)h.className=c.displayClass;b=document.createElement("div");b.innerHTML=a;b.style.overflow="visible";if(b.childNodes){a=0;for(c=b.childNodes.length;a<c;a++)if(b.childNodes[a].style)b.childNodes[a].style.overflow="visible"}h.appendChild(b);
k.appendChild(h);a=false;for(c=h.parentNode;c&&c.tagName.toLowerCase()!="body";){var o=OpenLayers.Element.getStyle(c,"position");if(o=="absolute"){a=true;break}else if(o&&o!="static")break;c=c.parentNode}if(!a)h.style.position="absolute";if(!d){d=parseInt(b.scrollWidth);h.style.width=d+"px"}f||(f=parseInt(b.scrollHeight));h.removeChild(b);k.removeChild(h);return new OpenLayers.Size(d,f)};
OpenLayers.Util.getScrollbarWidth=function(){var a=OpenLayers.Util._scrollbarWidth;if(a==null){var b=null,c=null;b=a=0;b=document.createElement("div");b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";b.style.width="100px";b.style.height="50px";b.style.overflow="hidden";c=document.createElement("div");c.style.width="100%";c.style.height="200px";b.appendChild(c);document.body.appendChild(b);a=c.offsetWidth;b.style.overflow="scroll";b=c.offsetWidth;document.body.removeChild(document.body.lastChild);
OpenLayers.Util._scrollbarWidth=a-b;a=OpenLayers.Util._scrollbarWidth}return a};
OpenLayers.Util.getFormattedLonLat=function(a,b,c){c||(c="dms");var d=Math.abs(a),f=Math.floor(d),h=d=(d-f)/(1/60);d=Math.floor(d);h=(h-d)/(1/60);h=Math.round(h*10);h/=10;if(h>=60){h-=60;d+=1;if(d>=60){d-=60;f+=1}}if(f<10)f="0"+f;f=f+"\u00b0";if(c.indexOf("dm")>=0){if(d<10)d="0"+d;f+=d+"'";if(c.indexOf("dms")>=0){if(h<10)h="0"+h;f+=h+'"'}}f+=b=="lon"?a<0?OpenLayers.i18n("W"):OpenLayers.i18n("E"):a<0?OpenLayers.i18n("S"):OpenLayers.i18n("N");return f};
OpenLayers.Console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},userError:function(a){alert(a)},assert:function(){},dir:function(){},dirxml:function(){},trace:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},profile:function(){},profileEnd:function(){},count:function(){},CLASS_NAME:"OpenLayers.Console"};
(function(){for(var a=document.getElementsByTagName("script"),b=0,c=a.length;b<c;++b)if(a[b].src.indexOf("firebug.js")!=-1)if(console){OpenLayers.Util.extend(OpenLayers.Console,console);break}})();
OpenLayers.Lang={code:null,defaultCode:"en",getCode:function(){OpenLayers.Lang.code||OpenLayers.Lang.setCode();return OpenLayers.Lang.code},setCode:function(a){var b;a||(a=OpenLayers.BROWSER_NAME=="msie"?navigator.userLanguage:navigator.language);a=a.split("-");a[0]=a[0].toLowerCase();if(typeof OpenLayers.Lang[a[0]]=="object")b=a[0];if(a[1]){var c=a[0]+"-"+a[1].toUpperCase();if(typeof OpenLayers.Lang[c]=="object")b=c}if(!b){OpenLayers.Console.warn("Failed to find OpenLayers.Lang."+a.join("-")+" dictionary, falling back to default language");
b=OpenLayers.Lang.defaultCode}OpenLayers.Lang.code=b},translate:function(a,b){var c=OpenLayers.Lang[OpenLayers.Lang.getCode()];(c=c&&c[a])||(c=a);if(b)c=OpenLayers.String.format(c,b);return c}};OpenLayers.i18n=OpenLayers.Lang.translate;
OpenLayers.Bounds=OpenLayers.Class({left:null,bottom:null,right:null,top:null,centerLonLat:null,initialize:function(a,b,c,d){if(a!=null)this.left=OpenLayers.Util.toFloat(a);if(b!=null)this.bottom=OpenLayers.Util.toFloat(b);if(c!=null)this.right=OpenLayers.Util.toFloat(c);if(d!=null)this.top=OpenLayers.Util.toFloat(d)},clone:function(){return new OpenLayers.Bounds(this.left,this.bottom,this.right,this.top)},equals:function(a){var b=false;if(a!=null)b=this.left==a.left&&this.right==a.right&&this.top==
a.top&&this.bottom==a.bottom;return b},toString:function(){return[this.left,this.bottom,this.right,this.top].join(",")},toArray:function(a){return a===true?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]},toBBOX:function(a,b){if(a==null)a=6;var c=Math.pow(10,a),d=Math.round(this.left*c)/c,f=Math.round(this.bottom*c)/c,h=Math.round(this.right*c)/c;c=Math.round(this.top*c)/c;return b===true?f+","+d+","+c+","+h:d+","+f+","+h+","+c},toGeometry:function(){return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left,
this.bottom),new OpenLayers.Geometry.Point(this.right,this.bottom),new OpenLayers.Geometry.Point(this.right,this.top),new OpenLayers.Geometry.Point(this.left,this.top)])])},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},getSize:function(){return new OpenLayers.Size(this.getWidth(),this.getHeight())},getCenterPixel:function(){return new OpenLayers.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)},getCenterLonLat:function(){if(!this.centerLonLat)this.centerLonLat=
new OpenLayers.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2);return this.centerLonLat},scale:function(a,b){if(b==null)b=this.getCenterLonLat();var c,d;if(b.CLASS_NAME=="OpenLayers.LonLat"){c=b.lon;d=b.lat}else{c=b.x;d=b.y}return new OpenLayers.Bounds((this.left-c)*a+c,(this.bottom-d)*a+d,(this.right-c)*a+c,(this.top-d)*a+d)},add:function(a,b){if(a==null||b==null){var c=OpenLayers.i18n("boundsAddError");OpenLayers.Console.error(c);return null}return new OpenLayers.Bounds(this.left+a,this.bottom+
b,this.right+a,this.top+b)},extend:function(a){var b=null;if(a){switch(a.CLASS_NAME){case "OpenLayers.LonLat":b=new OpenLayers.Bounds(a.lon,a.lat,a.lon,a.lat);break;case "OpenLayers.Geometry.Point":b=new OpenLayers.Bounds(a.x,a.y,a.x,a.y);break;case "OpenLayers.Bounds":b=a}if(b){this.centerLonLat=null;if(this.left==null||b.left<this.left)this.left=b.left;if(this.bottom==null||b.bottom<this.bottom)this.bottom=b.bottom;if(this.right==null||b.right>this.right)this.right=b.right;if(this.top==null||b.top>
this.top)this.top=b.top}}},containsLonLat:function(a,b){return this.contains(a.lon,a.lat,b)},containsPixel:function(a,b){return this.contains(a.x,a.y,b)},contains:function(a,b,c){if(c==null)c=true;if(a==null||b==null)return false;a=OpenLayers.Util.toFloat(a);b=OpenLayers.Util.toFloat(b);var d=false;return d=c?a>=this.left&&a<=this.right&&b>=this.bottom&&b<=this.top:a>this.left&&a<this.right&&b>this.bottom&&b<this.top},intersectsBounds:function(a,b){if(b==null)b=true;var c=false,d=this.left==a.right||
this.right==a.left||this.top==a.bottom||this.bottom==a.top;if(b||!d){c=a.top>=this.bottom&&a.top<=this.top||this.top>a.bottom&&this.top<a.top;d=a.left>=this.left&&a.left<=this.right||this.left>=a.left&&this.left<=a.right;var f=a.right>=this.left&&a.right<=this.right||this.right>=a.left&&this.right<=a.right;c=(a.bottom>=this.bottom&&a.bottom<=this.top||this.bottom>=a.bottom&&this.bottom<=a.top||c)&&(d||f)}return c},containsBounds:function(a,b,c){if(b==null)b=false;if(c==null)c=true;var d=this.contains(a.left,
a.bottom,c),f=this.contains(a.right,a.bottom,c),h=this.contains(a.left,a.top,c);a=this.contains(a.right,a.top,c);return b?d||f||h||a:d&&f&&h&&a},determineQuadrant:function(a){var b="",c=this.getCenterLonLat();b+=a.lat<c.lat?"b":"t";b+=a.lon<c.lon?"l":"r";return b},transform:function(a,b){this.centerLonLat=null;var c=OpenLayers.Projection.transform({x:this.left,y:this.bottom},a,b),d=OpenLayers.Projection.transform({x:this.right,y:this.bottom},a,b),f=OpenLayers.Projection.transform({x:this.left,y:this.top},
a,b),h=OpenLayers.Projection.transform({x:this.right,y:this.top},a,b);this.left=Math.min(c.x,f.x);this.bottom=Math.min(c.y,d.y);this.right=Math.max(d.x,h.x);this.top=Math.max(f.y,h.y);return this},wrapDateLine:function(a,b){b=b||{};var c=b.leftTolerance||0,d=b.rightTolerance||0,f=this.clone();if(a){for(;f.left<a.left&&f.right-d<=a.left;)f=f.add(a.getWidth(),0);for(;f.left+c>=a.right&&f.right>a.right;)f=f.add(-a.getWidth(),0)}return f},CLASS_NAME:"OpenLayers.Bounds"});
OpenLayers.Bounds.fromString=function(a,b){var c=a.split(",");return OpenLayers.Bounds.fromArray(c,b)};OpenLayers.Bounds.fromArray=function(a,b){return b===true?new OpenLayers.Bounds(parseFloat(a[1]),parseFloat(a[0]),parseFloat(a[3]),parseFloat(a[2])):new OpenLayers.Bounds(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]))};OpenLayers.Bounds.fromSize=function(a){return new OpenLayers.Bounds(0,a.h,a.w,0)};
OpenLayers.Bounds.oppositeQuadrant=function(a){var b="";b+=a.charAt(0)=="t"?"b":"t";b+=a.charAt(1)=="l"?"r":"l";return b};
OpenLayers.Element={visible:function(a){return OpenLayers.Util.getElement(a).style.display!="none"},toggle:function(){for(var a=0,b=arguments.length;a<b;a++){var c=OpenLayers.Util.getElement(arguments[a]),d=OpenLayers.Element.visible(c)?"hide":"show";OpenLayers.Element[d](c)}},hide:function(){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"element.style.display = 'none';"}));for(var a=0,b=arguments.length;a<b;a++){var c=OpenLayers.Util.getElement(arguments[a]);if(c)c.style.display=
"none"}},show:function(){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"element.style.display = '';"}));for(var a=0,b=arguments.length;a<b;a++){var c=OpenLayers.Util.getElement(arguments[a]);if(c)c.style.display=""}},remove:function(a){a=OpenLayers.Util.getElement(a);a.parentNode.removeChild(a)},getHeight:function(a){a=OpenLayers.Util.getElement(a);return a.offsetHeight},getDimensions:function(a){a=OpenLayers.Util.getElement(a);if(OpenLayers.Element.getStyle(a,"display")!=
"none")return{width:a.offsetWidth,height:a.offsetHeight};var b=a.style,c=b.visibility,d=b.position,f=b.display;b.visibility="hidden";b.position="absolute";b.display="";var h=a.clientWidth;a=a.clientHeight;b.display=f;b.position=d;b.visibility=c;return{width:h,height:a}},hasClass:function(a,b){var c=a.className;return!!c&&RegExp("(^|\\s)"+b+"(\\s|$)").test(c)},addClass:function(a,b){OpenLayers.Element.hasClass(a,b)||(a.className+=(a.className?" ":"")+b);return a},removeClass:function(a,b){var c=a.className;
if(c)a.className=OpenLayers.String.trim(c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," "));return a},toggleClass:function(a,b){OpenLayers.Element.hasClass(a,b)?OpenLayers.Element.removeClass(a,b):OpenLayers.Element.addClass(a,b);return a},getStyle:function(a,b){a=OpenLayers.Util.getElement(a);var c=null;if(a&&a.style){c=a.style[OpenLayers.String.camelize(b)];if(!c)if(document.defaultView&&document.defaultView.getComputedStyle)c=(c=document.defaultView.getComputedStyle(a,null))?c.getPropertyValue(b):
null;else if(a.currentStyle)c=a.currentStyle[OpenLayers.String.camelize(b)];var d=["left","top","right","bottom"];if(window.opera&&OpenLayers.Util.indexOf(d,b)!=-1&&OpenLayers.Element.getStyle(a,"position")=="static")c="auto"}return c=="auto"?null:c}};
OpenLayers.LonLat=OpenLayers.Class({lon:0,lat:0,initialize:function(a,b){this.lon=OpenLayers.Util.toFloat(a);this.lat=OpenLayers.Util.toFloat(b)},toString:function(){return"lon="+this.lon+",lat="+this.lat},toShortString:function(){return this.lon+", "+this.lat},clone:function(){return new OpenLayers.LonLat(this.lon,this.lat)},add:function(a,b){if(a==null||b==null){var c=OpenLayers.i18n("lonlatAddError");OpenLayers.Console.error(c);return null}return new OpenLayers.LonLat(this.lon+OpenLayers.Util.toFloat(a),
this.lat+OpenLayers.Util.toFloat(b))},equals:function(a){var b=false;if(a!=null)b=this.lon==a.lon&&this.lat==a.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(a.lon)&&isNaN(a.lat);return b},transform:function(a,b){var c=OpenLayers.Projection.transform({x:this.lon,y:this.lat},a,b);this.lon=c.x;this.lat=c.y;return this},wrapDateLine:function(a){var b=this.clone();if(a){for(;b.lon<a.left;)b.lon+=a.getWidth();for(;b.lon>a.right;)b.lon-=a.getWidth()}return b},CLASS_NAME:"OpenLayers.LonLat"});
OpenLayers.LonLat.fromString=function(a){a=a.split(",");return new OpenLayers.LonLat(a[0],a[1])};
OpenLayers.Pixel=OpenLayers.Class({x:0,y:0,initialize:function(a,b){this.x=parseFloat(a);this.y=parseFloat(b)},toString:function(){return"x="+this.x+",y="+this.y},clone:function(){return new OpenLayers.Pixel(this.x,this.y)},equals:function(a){var b=false;if(a!=null)b=this.x==a.x&&this.y==a.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(a.x)&&isNaN(a.y);return b},distanceTo:function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},add:function(a,b){if(a==null||b==null){var c=OpenLayers.i18n("pixelAddError");
OpenLayers.Console.error(c);return null}return new OpenLayers.Pixel(this.x+a,this.y+b)},offset:function(a){var b=this.clone();if(a)b=this.add(a.x,a.y);return b},CLASS_NAME:"OpenLayers.Pixel"});
OpenLayers.Size=OpenLayers.Class({w:0,h:0,initialize:function(a,b){this.w=parseFloat(a);this.h=parseFloat(b)},toString:function(){return"w="+this.w+",h="+this.h},clone:function(){return new OpenLayers.Size(this.w,this.h)},equals:function(a){var b=false;if(a!=null)b=this.w==a.w&&this.h==a.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(a.w)&&isNaN(a.h);return b},CLASS_NAME:"OpenLayers.Size"});
OpenLayers.Feature=OpenLayers.Class({layer:null,id:null,lonlat:null,data:null,marker:null,popupClass:null,popup:null,initialize:function(a,b,c){this.layer=a;this.lonlat=b;this.data=c!=null?c:{};this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){this.layer!=null&&this.layer.map!=null&&this.popup!=null&&this.layer.map.removePopup(this.popup);this.layer!=null&&this.marker!=null&&this.layer.removeMarker(this.marker);this.data=this.lonlat=this.id=this.layer=null;if(this.marker!=
null){this.destroyMarker(this.marker);this.marker=null}if(this.popup!=null){this.destroyPopup(this.popup);this.popup=null}},onScreen:function(){var a=false;if(this.layer!=null&&this.layer.map!=null)a=this.layer.map.getExtent().containsLonLat(this.lonlat);return a},createMarker:function(){if(this.lonlat!=null)this.marker=new OpenLayers.Marker(this.lonlat,this.data.icon);return this.marker},destroyMarker:function(){this.marker.destroy()},createPopup:function(a){if(this.lonlat!=null){if(!this.popup)this.popup=
new (this.popupClass?this.popupClass:OpenLayers.Popup.AnchoredBubble)(this.id+"_popup",this.lonlat,this.data.popupSize,this.data.popupContentHTML,this.marker?this.marker.icon:null,a);if(this.data.overflow!=null)this.popup.contentDiv.style.overflow=this.data.overflow;this.popup.feature=this}return this.popup},destroyPopup:function(){if(this.popup){this.popup.feature=null;this.popup.destroy();this.popup=null}},CLASS_NAME:"OpenLayers.Feature"});
OpenLayers.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"};
OpenLayers.Feature.Vector=OpenLayers.Class(OpenLayers.Feature,{fid:null,geometry:null,attributes:null,bounds:null,state:null,style:null,url:null,renderIntent:"default",initialize:function(a,b,c){OpenLayers.Feature.prototype.initialize.apply(this,[null,null,b]);this.lonlat=null;this.geometry=a?a:null;this.state=null;this.attributes={};if(b)this.attributes=OpenLayers.Util.extend(this.attributes,b);this.style=c?c:null},destroy:function(){if(this.layer){this.layer.removeFeatures(this);this.layer=null}this.geometry=
null;OpenLayers.Feature.prototype.destroy.apply(this,arguments)},clone:function(){return new OpenLayers.Feature.Vector(this.geometry?this.geometry.clone():null,this.attributes,this.style)},onScreen:function(a){var b=false;if(this.layer&&this.layer.map){b=this.layer.map.getExtent();if(a){a=this.geometry.getBounds();b=b.intersectsBounds(a)}else b=b.toGeometry().intersects(this.geometry)}return b},getVisibility:function(){return!(this.style&&this.style.display=="none"||!this.layer||this.layer&&this.layer.styleMap&&
this.layer.styleMap.createSymbolizer(this,this.renderIntent).display=="none"||this.layer&&!this.layer.getVisibility())},createMarker:function(){return null},destroyMarker:function(){},createPopup:function(){return null},atPoint:function(a,b,c){var d=false;if(this.geometry)d=this.geometry.atPoint(a,b,c);return d},destroyPopup:function(){},move:function(a){if(this.layer&&this.geometry.move){a=a.CLASS_NAME=="OpenLayers.LonLat"?this.layer.getViewPortPxFromLonLat(a):a;var b=this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat()),
c=this.layer.map.getResolution();this.geometry.move(c*(a.x-b.x),c*(b.y-a.y));this.layer.drawFeature(this);return b}},toState:function(a){if(a==OpenLayers.State.UPDATE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.DELETE:this.state=a}else if(a==OpenLayers.State.INSERT)switch(this.state){case OpenLayers.State.UNKNOWN:break;default:this.state=a}else if(a==OpenLayers.State.DELETE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.UPDATE:this.state=a}else if(a==
OpenLayers.State.UNKNOWN)this.state=a},CLASS_NAME:"OpenLayers.Feature.Vector"});
OpenLayers.Feature.Vector.style={"default":{fillColor:"#ee9900",fillOpacity:0.4,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit"},select:{fillColor:"blue",fillOpacity:0.4,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"blue",strokeOpacity:1,
strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer"},temporary:{fillColor:"#66cccc",fillOpacity:0.2,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,
hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit"},"delete":{display:"none"}};
OpenLayers.Style=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:false,rules:null,context:null,defaultStyle:null,defaultsPerSymbolizer:false,propertyStyles:null,initialize:function(a,b){OpenLayers.Util.extend(this,b);this.rules=[];b&&b.rules&&this.addRules(b.rules);this.setDefaultStyle(a||OpenLayers.Feature.Vector.style["default"]);this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var a=0,b=this.rules.length;a<b;a++){this.rules[a].destroy();
this.rules[a]=null}this.defaultStyle=this.rules=null},createSymbolizer:function(a){for(var b=this.defaultsPerSymbolizer?{}:this.createLiterals(OpenLayers.Util.extend({},this.defaultStyle),a),c=this.rules,d,f=[],h=false,k=0,o=c.length;k<o;k++){d=c[k];if(d.evaluate(a))if(d instanceof OpenLayers.Rule&&d.elseFilter)f.push(d);else{h=true;this.applySymbolizer(d,b,a)}}if(h==false&&f.length>0){h=true;k=0;for(o=f.length;k<o;k++)this.applySymbolizer(f[k],b,a)}if(c.length>0&&h==false)b.display="none";if(b.label&&
typeof b.label!=="string")b.label=String(b.label);return b},applySymbolizer:function(a,b,c){var d=c.geometry?this.getSymbolizerPrefix(c.geometry):OpenLayers.Style.SYMBOLIZER_PREFIXES[0];a=a.symbolizer[d]||a.symbolizer;if(this.defaultsPerSymbolizer===true){d=this.defaultStyle;OpenLayers.Util.applyDefaults(a,{pointRadius:d.pointRadius});if(a.stroke===true||a.graphic===true)OpenLayers.Util.applyDefaults(a,{strokeWidth:d.strokeWidth,strokeColor:d.strokeColor,strokeOpacity:d.strokeOpacity,strokeDashstyle:d.strokeDashstyle,
strokeLinecap:d.strokeLinecap});if(a.fill===true||a.graphic===true)OpenLayers.Util.applyDefaults(a,{fillColor:d.fillColor,fillOpacity:d.fillOpacity});a.graphic===true&&OpenLayers.Util.applyDefaults(a,{pointRadius:this.defaultStyle.pointRadius,externalGraphic:this.defaultStyle.externalGraphic,graphicName:this.defaultStyle.graphicName,graphicOpacity:this.defaultStyle.graphicOpacity,graphicWidth:this.defaultStyle.graphicWidth,graphicHeight:this.defaultStyle.graphicHeight,graphicXOffset:this.defaultStyle.graphicXOffset,
graphicYOffset:this.defaultStyle.graphicYOffset})}return this.createLiterals(OpenLayers.Util.extend(b,a),c)},createLiterals:function(a,b){var c=OpenLayers.Util.extend({},b.attributes||b.data);OpenLayers.Util.extend(c,this.context);for(var d in this.propertyStyles)a[d]=OpenLayers.Style.createLiteral(a[d],c,b,d);return a},findPropertyStyles:function(){var a={};this.addPropertyStyles(a,this.defaultStyle);for(var b=this.rules,c,d,f=0,h=b.length;f<h;f++){c=b[f].symbolizer;for(var k in c){d=c[k];if(typeof d==
"object")this.addPropertyStyles(a,d);else{this.addPropertyStyles(a,c);break}}}return a},addPropertyStyles:function(a,b){var c,d;for(d in b){c=b[d];if(typeof c=="string"&&c.match(/\$\{\w+\}/))a[d]=true}return a},addRules:function(a){Array.prototype.push.apply(this.rules,a);this.propertyStyles=this.findPropertyStyles()},setDefaultStyle:function(a){this.defaultStyle=a;this.propertyStyles=this.findPropertyStyles()},getSymbolizerPrefix:function(a){for(var b=OpenLayers.Style.SYMBOLIZER_PREFIXES,c=0,d=b.length;c<
d;c++)if(a.CLASS_NAME.indexOf(b[c])!=-1)return b[c]},clone:function(){var a=OpenLayers.Util.extend({},this);if(this.rules){a.rules=[];for(var b=0,c=this.rules.length;b<c;++b)a.rules.push(this.rules[b].clone())}a.context=this.context&&OpenLayers.Util.extend({},this.context);b=OpenLayers.Util.extend({},this.defaultStyle);return new OpenLayers.Style(b,a)},CLASS_NAME:"OpenLayers.Style"});
OpenLayers.Style.createLiteral=function(a,b,c,d){if(typeof a=="string"&&a.indexOf("${")!=-1){a=OpenLayers.String.format(a,b,[c,d]);a=isNaN(a)||!a?a:parseFloat(a)}return a};OpenLayers.Style.SYMBOLIZER_PREFIXES=["Point","Line","Polygon","Text","Raster"];
OpenLayers.Tween=OpenLayers.Class({INTERVAL:10,easing:null,begin:null,finish:null,duration:null,callbacks:null,time:null,interval:null,playing:false,initialize:function(a){this.easing=a?a:OpenLayers.Easing.Expo.easeOut},start:function(a,b,c,d){this.playing=true;this.begin=a;this.finish=b;this.duration=c;this.callbacks=d.callbacks;this.time=0;if(this.interval){window.clearInterval(this.interval);this.interval=null}this.callbacks&&this.callbacks.start&&this.callbacks.start.call(this,this.begin);this.interval=
window.setInterval(OpenLayers.Function.bind(this.play,this),this.INTERVAL)},stop:function(){if(this.playing){this.callbacks&&this.callbacks.done&&this.callbacks.done.call(this,this.finish);window.clearInterval(this.interval);this.interval=null;this.playing=false}},play:function(){var a={},b;for(b in this.begin){var c=this.begin[b],d=this.finish[b];if(c==null||d==null||isNaN(c)||isNaN(d))OpenLayers.Console.error("invalid value for Tween");a[b]=this.easing.apply(this,[this.time,c,d-c,this.duration])}this.time++;
this.callbacks&&this.callbacks.eachStep&&this.callbacks.eachStep.call(this,a);this.time>this.duration&&this.stop()},CLASS_NAME:"OpenLayers.Tween"});OpenLayers.Easing={CLASS_NAME:"OpenLayers.Easing"};OpenLayers.Easing.Linear={easeIn:function(a,b,c,d){return c*a/d+b},easeOut:function(a,b,c,d){return c*a/d+b},easeInOut:function(a,b,c,d){return c*a/d+b},CLASS_NAME:"OpenLayers.Easing.Linear"};
OpenLayers.Easing.Expo={easeIn:function(a,b,c,d){return a==0?b:c*Math.pow(2,10*(a/d-1))+b},easeOut:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOut:function(a,b,c,d){if(a==0)return b;if(a==d)return b+c;if((a/=d/2)<1)return c/2*Math.pow(2,10*(a-1))+b;return c/2*(-Math.pow(2,-10*--a)+2)+b},CLASS_NAME:"OpenLayers.Easing.Expo"};
OpenLayers.Easing.Quad={easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOut:function(a,b,c,d){if((a/=d/2)<1)return c/2*a*a+b;return-c/2*(--a*(a-2)-1)+b},CLASS_NAME:"OpenLayers.Easing.Quad"};
OpenLayers.Format=OpenLayers.Class({options:null,externalProjection:null,internalProjection:null,data:null,keepData:false,initialize:function(a){OpenLayers.Util.extend(this,a);this.options=a},destroy:function(){},read:function(){OpenLayers.Console.userError(OpenLayers.i18n("readNotImplemented"))},write:function(){OpenLayers.Console.userError(OpenLayers.i18n("writeNotImplemented"))},CLASS_NAME:"OpenLayers.Format"});
OpenLayers.Format.WKT=OpenLayers.Class(OpenLayers.Format,{initialize:function(a){this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};OpenLayers.Format.prototype.initialize.apply(this,[a])},read:function(a){var b,c;if(c=this.regExes.typeStr.exec(a)){a=c[1].toLowerCase();c=c[2];if(this.parse[a])b=this.parse[a].apply(this,[c]);if(this.internalProjection&&this.externalProjection)if(b&&b.CLASS_NAME==
"OpenLayers.Feature.Vector")b.geometry.transform(this.externalProjection,this.internalProjection);else if(b&&a!="geometrycollection"&&typeof b=="object"){a=0;for(c=b.length;a<c;a++)b[a].geometry.transform(this.externalProjection,this.internalProjection)}}return b},write:function(a){var b,c;if(a.constructor==Array){a=a;c=true}else{a=[a];c=false}var d=[];c&&d.push("GEOMETRYCOLLECTION(");for(var f=0,h=a.length;f<h;++f){c&&f>0&&d.push(",");b=a[f].geometry;d.push(this.extractGeometry(b))}c&&d.push(")");
return d.join("")},extractGeometry:function(a){var b=a.CLASS_NAME.split(".")[2].toLowerCase();if(!this.extract[b])return null;if(this.internalProjection&&this.externalProjection){a=a.clone();a.transform(this.internalProjection,this.externalProjection)}return(b=="collection"?"GEOMETRYCOLLECTION":b.toUpperCase())+"("+this.extract[b].apply(this,[a])+")"},extract:{point:function(a){return a.x+" "+a.y},multipoint:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push("("+this.extract.point.apply(this,
[a.components[c]])+")");return b.join(",")},linestring:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push(this.extract.point.apply(this,[a.components[c]]));return b.join(",")},multilinestring:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push("("+this.extract.linestring.apply(this,[a.components[c]])+")");return b.join(",")},polygon:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push("("+this.extract.linestring.apply(this,[a.components[c]])+")");return b.join(",")},
multipolygon:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push("("+this.extract.polygon.apply(this,[a.components[c]])+")");return b.join(",")},collection:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push(this.extractGeometry.apply(this,[a.components[c]]));return b.join(",")}},parse:{point:function(a){a=OpenLayers.String.trim(a).split(this.regExes.spaces);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(a[0],a[1]))},multipoint:function(a){for(var b=
OpenLayers.String.trim(a).split(this.regExes.parenComma),c=[],d=0,f=b.length;d<f;++d){a=b[d].replace(this.regExes.trimParens,"$1");c.push(this.parse.point.apply(this,[a]).geometry)}return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPoint(c))},linestring:function(a){a=OpenLayers.String.trim(a).split(",");for(var b=[],c=0,d=a.length;c<d;++c)b.push(this.parse.point.apply(this,[a[c]]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(b))},multilinestring:function(a){for(var b=
OpenLayers.String.trim(a).split(this.regExes.parenComma),c=[],d=0,f=b.length;d<f;++d){a=b[d].replace(this.regExes.trimParens,"$1");c.push(this.parse.linestring.apply(this,[a]).geometry)}return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiLineString(c))},polygon:function(a){var b;a=OpenLayers.String.trim(a).split(this.regExes.parenComma);for(var c=[],d=0,f=a.length;d<f;++d){b=a[d].replace(this.regExes.trimParens,"$1");b=this.parse.linestring.apply(this,[b]).geometry;b=new OpenLayers.Geometry.LinearRing(b.components);
c.push(b)}return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon(c))},multipolygon:function(a){for(var b=OpenLayers.String.trim(a).split(this.regExes.doubleParenComma),c=[],d=0,f=b.length;d<f;++d){a=b[d].replace(this.regExes.trimParens,"$1");c.push(this.parse.polygon.apply(this,[a]).geometry)}return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPolygon(c))},geometrycollection:function(a){a=a.replace(/,\s*([A-Za-z])/g,"|$1");a=OpenLayers.String.trim(a).split("|");for(var b=
[],c=0,d=a.length;c<d;++c)b.push(OpenLayers.Format.WKT.prototype.read.apply(this,[a[c]]));return b}},CLASS_NAME:"OpenLayers.Format.WKT"});
OpenLayers.Geometry=OpenLayers.Class({id:null,parent:null,bounds:null,initialize:function(){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){this.bounds=this.id=null},clone:function(){return new OpenLayers.Geometry},setBounds:function(a){if(a)this.bounds=a.clone()},clearBounds:function(){this.bounds=null;this.parent&&this.parent.clearBounds()},extendBounds:function(a){this.getBounds()?this.bounds.extend(a):this.setBounds(a)},getBounds:function(){this.bounds==null&&this.calculateBounds();
return this.bounds},calculateBounds:function(){},distanceTo:function(){},getVertices:function(){},atPoint:function(a,b,c){var d=false;if(this.getBounds()!=null&&a!=null){b=b!=null?b:0;c=c!=null?c:0;d=(new OpenLayers.Bounds(this.bounds.left-b,this.bounds.bottom-c,this.bounds.right+b,this.bounds.top+c)).containsLonLat(a)}return d},getLength:function(){return 0},getArea:function(){return 0},getCentroid:function(){return null},toString:function(){return OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this))},
CLASS_NAME:"OpenLayers.Geometry"});OpenLayers.Geometry.fromWKT=function(a){var b=arguments.callee.format;if(!b){b=new OpenLayers.Format.WKT;arguments.callee.format=b}var c;b=b.read(a);if(b instanceof OpenLayers.Feature.Vector)c=b.geometry;else if(b instanceof Array){c=b.length;for(var d=Array(c),f=0;f<c;++f)d[f]=b[f].geometry;c=new OpenLayers.Geometry.Collection(d)}return c};
OpenLayers.Geometry.segmentsIntersect=function(a,b,c){var d=c&&c.point;c=c&&c.tolerance;var f=false,h=a.x1-b.x1,k=a.y1-b.y1,o=a.x2-a.x1,n=a.y2-a.y1,s=b.y2-b.y1,t=b.x2-b.x1,D=s*o-t*n;s=t*k-s*h;k=o*k-n*h;if(D==0){if(s==0&&k==0)f=true}else{h=s/D;D=k/D;if(h>=0&&h<=1&&D>=0&&D<=1)if(d){o=a.x1+h*o;D=a.y1+h*n;f=new OpenLayers.Geometry.Point(o,D)}else f=true}if(c)if(f){if(d){a=[a,b];b=0;a:for(;b<2;++b){h=a[b];for(n=1;n<3;++n){o=h["x"+n];D=h["y"+n];d=Math.sqrt(Math.pow(o-f.x,2)+Math.pow(D-f.y,2));if(d<c){f.x=
o;f.y=D;break a}}}}}else{a=[a,b];b=0;a:for(;b<2;++b){o=a[b];D=a[(b+1)%2];for(n=1;n<3;++n){h={x:o["x"+n],y:o["y"+n]};k=OpenLayers.Geometry.distanceToSegment(h,D);if(k.distance<c){f=d?new OpenLayers.Geometry.Point(h.x,h.y):true;break a}}}}return f};
OpenLayers.Geometry.distanceToSegment=function(a,b){var c=a.x,d=a.y,f=b.x1,h=b.y1,k=b.x2,o=b.y2,n=k-f,s=o-h,t=(n*(c-f)+s*(d-h))/(Math.pow(n,2)+Math.pow(s,2));if(t<=0){f=f;h=h}else if(t>=1){f=k;h=o}else{f=f+t*n;h=h+t*s}return{distance:Math.sqrt(Math.pow(f-c,2)+Math.pow(h-d,2)),x:f,y:h}};
OpenLayers.Geometry.Collection=OpenLayers.Class(OpenLayers.Geometry,{components:null,componentTypes:null,initialize:function(a){OpenLayers.Geometry.prototype.initialize.apply(this,arguments);this.components=[];a!=null&&this.addComponents(a)},destroy:function(){this.components.length=0;this.components=null;OpenLayers.Geometry.prototype.destroy.apply(this,arguments)},clone:function(){for(var a=eval("new "+this.CLASS_NAME+"()"),b=0,c=this.components.length;b<c;b++)a.addComponent(this.components[b].clone());
OpenLayers.Util.applyDefaults(a,this);return a},getComponentsString:function(){for(var a=[],b=0,c=this.components.length;b<c;b++)a.push(this.components[b].toShortString());return a.join(",")},calculateBounds:function(){this.bounds=null;var a=new OpenLayers.Bounds,b=this.components;if(b)for(var c=0,d=b.length;c<d;c++)a.extend(b[c].getBounds());a.left!=null&&a.bottom!=null&&a.right!=null&&a.top!=null&&this.setBounds(a)},addComponents:function(a){a instanceof Array||(a=[a]);for(var b=0,c=a.length;b<
c;b++)this.addComponent(a[b])},addComponent:function(a,b){var c=false;if(a)if(this.componentTypes==null||OpenLayers.Util.indexOf(this.componentTypes,a.CLASS_NAME)>-1){if(b!=null&&b<this.components.length){c=this.components.slice(0,b);var d=this.components.slice(b,this.components.length);c.push(a);this.components=c.concat(d)}else this.components.push(a);a.parent=this;this.clearBounds();c=true}return c},removeComponents:function(a){a instanceof Array||(a=[a]);for(var b=a.length-1;b>=0;--b)this.removeComponent(a[b])},
removeComponent:function(a){OpenLayers.Util.removeItem(this.components,a);this.clearBounds()},getLength:function(){for(var a=0,b=0,c=this.components.length;b<c;b++)a+=this.components[b].getLength();return a},getArea:function(){for(var a=0,b=0,c=this.components.length;b<c;b++)a+=this.components[b].getArea();return a},getGeodesicArea:function(a){for(var b=0,c=0,d=this.components.length;c<d;c++)b+=this.components[c].getGeodesicArea(a);return b},getCentroid:function(a){if(!a)return this.components.length&&
this.components[0].getCentroid();a=this.components.length;if(!a)return false;for(var b=[],c=[],d=0,f=Number.MAX_VALUE,h,k=0;k<a;++k){h=this.components[k];var o=h.getArea();h=h.getCentroid(true);if(!(isNaN(o)||isNaN(h.x)||isNaN(h.y))){b.push(o);d+=o;f=o<f&&o>0?o:f;c.push(h)}}a=b.length;if(d===0){for(k=0;k<a;++k)b[k]=1;d=b.length}else{for(k=0;k<a;++k)b[k]/=f;d/=f}var n=f=0;for(k=0;k<a;++k){h=c[k];o=b[k];f+=h.x*o;n+=h.y*o}return new OpenLayers.Geometry.Point(f/d,n/d)},getGeodesicLength:function(a){for(var b=
0,c=0,d=this.components.length;c<d;c++)b+=this.components[c].getGeodesicLength(a);return b},move:function(a,b){for(var c=0,d=this.components.length;c<d;c++)this.components[c].move(a,b)},rotate:function(a,b){for(var c=0,d=this.components.length;c<d;++c)this.components[c].rotate(a,b)},resize:function(a,b,c){for(var d=0;d<this.components.length;++d)this.components[d].resize(a,b,c);return this},distanceTo:function(a,b){for(var c=!(b&&b.edge===false)&&b&&b.details,d,f,h,k=Number.POSITIVE_INFINITY,o=0,
n=this.components.length;o<n;++o){d=this.components[o].distanceTo(a,b);h=c?d.distance:d;if(h<k){k=h;f=d;if(k==0)break}}return f},equals:function(a){var b=true;if(!a||!a.CLASS_NAME||this.CLASS_NAME!=a.CLASS_NAME)b=false;else if(!(a.components instanceof Array)||a.components.length!=this.components.length)b=false;else for(var c=0,d=this.components.length;c<d;++c)if(!this.components[c].equals(a.components[c])){b=false;break}return b},transform:function(a,b){if(a&&b){for(var c=0,d=this.components.length;c<
d;c++)this.components[c].transform(a,b);this.bounds=null}return this},intersects:function(a){for(var b=false,c=0,d=this.components.length;c<d;++c)if(b=a.intersects(this.components[c]))break;return b},getVertices:function(a){for(var b=[],c=0,d=this.components.length;c<d;++c)Array.prototype.push.apply(b,this.components[c].getVertices(a));return b},CLASS_NAME:"OpenLayers.Geometry.Collection"});
OpenLayers.Geometry.Point=OpenLayers.Class(OpenLayers.Geometry,{x:null,y:null,initialize:function(a,b){OpenLayers.Geometry.prototype.initialize.apply(this,arguments);this.x=parseFloat(a);this.y=parseFloat(b)},clone:function(a){if(a==null)a=new OpenLayers.Geometry.Point(this.x,this.y);OpenLayers.Util.applyDefaults(a,this);return a},calculateBounds:function(){this.bounds=new OpenLayers.Bounds(this.x,this.y,this.x,this.y)},distanceTo:function(a,b){var c=!(b&&b.edge===false)&&b&&b.details,d,f,h,k,o;if(a instanceof
OpenLayers.Geometry.Point){f=this.x;h=this.y;k=a.x;o=a.y;d=Math.sqrt(Math.pow(f-k,2)+Math.pow(h-o,2));d=!c?d:{x0:f,y0:h,x1:k,y1:o,distance:d}}else{d=a.distanceTo(this,b);if(c)d={x0:d.x1,y0:d.y1,x1:d.x0,y1:d.y0,distance:d.distance}}return d},equals:function(a){var b=false;if(a!=null)b=this.x==a.x&&this.y==a.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(a.x)&&isNaN(a.y);return b},toShortString:function(){return this.x+", "+this.y},move:function(a,b){this.x+=a;this.y+=b;this.clearBounds()},rotate:function(a,
b){a*=Math.PI/180;var c=this.distanceTo(b),d=a+Math.atan2(this.y-b.y,this.x-b.x);this.x=b.x+c*Math.cos(d);this.y=b.y+c*Math.sin(d);this.clearBounds()},getCentroid:function(){return new OpenLayers.Geometry.Point(this.x,this.y)},resize:function(a,b,c){c=c==undefined?1:c;this.x=b.x+a*c*(this.x-b.x);this.y=b.y+a*(this.y-b.y);this.clearBounds();return this},intersects:function(a){var b=false;return b=a.CLASS_NAME=="OpenLayers.Geometry.Point"?this.equals(a):a.intersects(this)},transform:function(a,b){if(a&&
b){OpenLayers.Projection.transform(this,a,b);this.bounds=null}return this},getVertices:function(){return[this]},CLASS_NAME:"OpenLayers.Geometry.Point"});OpenLayers.Geometry.MultiPoint=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Point"],initialize:function(){OpenLayers.Geometry.Collection.prototype.initialize.apply(this,arguments)},addPoint:function(a,b){this.addComponent(a,b)},removePoint:function(a){this.removeComponent(a)},CLASS_NAME:"OpenLayers.Geometry.MultiPoint"});
OpenLayers.Geometry.Curve=OpenLayers.Class(OpenLayers.Geometry.MultiPoint,{componentTypes:["OpenLayers.Geometry.Point"],initialize:function(){OpenLayers.Geometry.MultiPoint.prototype.initialize.apply(this,arguments)},getLength:function(){var a=0;if(this.components&&this.components.length>1)for(var b=1,c=this.components.length;b<c;b++)a+=this.components[b-1].distanceTo(this.components[b]);return a},getGeodesicLength:function(a){var b=this;if(a){var c=new OpenLayers.Projection("EPSG:4326");c.equals(a)||
(b=this.clone().transform(a,c))}a=0;if(b.components&&b.components.length>1)for(var d,f=1,h=b.components.length;f<h;f++){c=b.components[f-1];d=b.components[f];a+=OpenLayers.Util.distVincenty({lon:c.x,lat:c.y},{lon:d.x,lat:d.y})}return a*1E3},CLASS_NAME:"OpenLayers.Geometry.Curve"});
OpenLayers.Geometry.LineString=OpenLayers.Class(OpenLayers.Geometry.Curve,{initialize:function(){OpenLayers.Geometry.Curve.prototype.initialize.apply(this,arguments)},removeComponent:function(){this.components&&this.components.length>2&&OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments)},intersects:function(a){var b=false,c=a.CLASS_NAME;if(c=="OpenLayers.Geometry.LineString"||c=="OpenLayers.Geometry.LinearRing"||c=="OpenLayers.Geometry.Point"){var d=this.getSortedSegments();
a=c=="OpenLayers.Geometry.Point"?[{x1:a.x,y1:a.y,x2:a.x,y2:a.y}]:a.getSortedSegments();var f,h,k,o,n,s,t,D=0,w=d.length;a:for(;D<w;++D){c=d[D];f=c.x1;h=c.x2;k=c.y1;o=c.y2;var G=0,L=a.length;for(;G<L;++G){n=a[G];if(n.x1>h)break;if(!(n.x2<f)){s=n.y1;t=n.y2;if(!(Math.min(s,t)>Math.max(k,o)))if(!(Math.max(s,t)<Math.min(k,o)))if(OpenLayers.Geometry.segmentsIntersect(c,n)){b=true;break a}}}}}else b=a.intersects(this);return b},getSortedSegments:function(){for(var a=this.components.length-1,b=Array(a),c,
d,f=0;f<a;++f){c=this.components[f];d=this.components[f+1];b[f]=c.x<d.x?{x1:c.x,y1:c.y,x2:d.x,y2:d.y}:{x1:d.x,y1:d.y,x2:c.x,y2:c.y}}return b.sort(function(h,k){return h.x1-k.x1})},splitWithSegment:function(a,b){for(var c=!(b&&b.edge===false),d=b&&b.tolerance,f=[],h=this.getVertices(),k=[],o=[],n=false,s,t,D,w={point:true,tolerance:d},G=null,L=0,O=h.length-2;L<=O;++L){d=h[L];k.push(d.clone());s=h[L+1];t={x1:d.x,y1:d.y,x2:s.x,y2:s.y};t=OpenLayers.Geometry.segmentsIntersect(a,t,w);if(t instanceof OpenLayers.Geometry.Point)if((D=
t.x===a.x1&&t.y===a.y1||t.x===a.x2&&t.y===a.y2||t.equals(d)||t.equals(s)?true:false)||c){t.equals(o[o.length-1])||o.push(t.clone());if(L===0)if(t.equals(d))continue;if(!t.equals(s)){n=true;t.equals(d)||k.push(t);f.push(new OpenLayers.Geometry.LineString(k));k=[t.clone()]}}}if(n){k.push(s.clone());f.push(new OpenLayers.Geometry.LineString(k))}if(o.length>0){var U=a.x1<a.x2?1:-1,S=a.y1<a.y2?1:-1;G={lines:f,points:o.sort(function(V,ca){return U*V.x-U*ca.x||S*V.y-S*ca.y})}}return G},split:function(a,
b){var c=null,d=b&&b.mutual,f,h,k,o;if(a instanceof OpenLayers.Geometry.LineString){var n=this.getVertices(),s,t,D,w,G,L=[];k=[];for(var O=0,U=n.length-2;O<=U;++O){s=n[O];t=n[O+1];D={x1:s.x,y1:s.y,x2:t.x,y2:t.y};o=o||[a];d&&L.push(s.clone());for(var S=0;S<o.length;++S)if(w=o[S].splitWithSegment(D,b)){G=w.lines;if(G.length>0){G.unshift(S,1);Array.prototype.splice.apply(o,G);S+=G.length-2}if(d)for(var V=0,ca=w.points.length;V<ca;++V){G=w.points[V];if(!G.equals(s)){L.push(G);k.push(new OpenLayers.Geometry.LineString(L));
L=G.equals(t)?[]:[G.clone()]}}}}if(d&&k.length>0&&L.length>0){L.push(t.clone());k.push(new OpenLayers.Geometry.LineString(L))}}else c=a.splitWith(this,b);if(o&&o.length>1)h=true;else o=[];if(k&&k.length>1)f=true;else k=[];if(h||f)c=d?[k,o]:o;return c},splitWith:function(a,b){return a.split(this,b)},getVertices:function(a){return a===true?[this.components[0],this.components[this.components.length-1]]:a===false?this.components.slice(1,this.components.length-1):this.components.slice()},distanceTo:function(a,
b){var c=!(b&&b.edge===false)&&b&&b.details,d,f={},h=Number.POSITIVE_INFINITY;if(a instanceof OpenLayers.Geometry.Point){for(var k=this.getSortedSegments(),o=a.x,n=a.y,s,t=0,D=k.length;t<D;++t){s=k[t];d=OpenLayers.Geometry.distanceToSegment(a,s);if(d.distance<h){h=d.distance;f=d;if(h===0)break}else if(s.x2>o&&(n>s.y1&&n<s.y2||n<s.y1&&n>s.y2))break}f=c?{distance:f.distance,x0:f.x,y0:f.y,x1:o,y1:n}:f.distance}else if(a instanceof OpenLayers.Geometry.LineString){k=this.getSortedSegments();o=a.getSortedSegments();
var w,G,L=o.length,O={point:true};t=0;D=k.length;a:for(;t<D;++t){n=k[t];s=n.x1;G=n.y1;for(var U=0;U<L;++U){d=o[U];if(w=OpenLayers.Geometry.segmentsIntersect(n,d,O)){h=0;f={distance:0,x0:w.x,y0:w.y,x1:w.x,y1:w.y};break a}else{d=OpenLayers.Geometry.distanceToSegment({x:s,y:G},d);if(d.distance<h){h=d.distance;f={distance:h,x0:s,y0:G,x1:d.x,y1:d.y}}}}}if(!c)f=f.distance;if(h!==0)if(n){d=a.distanceTo(new OpenLayers.Geometry.Point(n.x2,n.y2),b);t=c?d.distance:d;if(t<h)f=c?{distance:h,x0:d.x1,y0:d.y1,x1:d.x0,
y1:d.y0}:t}}else{f=a.distanceTo(this,b);if(c)f={distance:f.distance,x0:f.x1,y0:f.y1,x1:f.x0,y1:f.y0}}return f},simplify:function(a){if(this&&this!==null){var b=this.getVertices();if(b.length<3)return this;var c=function(h,k,o,n){for(var s=0,t=0,D=k,w;D<o;D++){w=Math.abs(0.5*(h[k].x*h[o].y+h[o].x*h[D].y+h[D].x*h[k].y-h[o].x*h[k].y-h[D].x*h[o].y-h[k].x*h[D].y))/Math.sqrt(Math.pow(h[k].x-h[o].x,2)+Math.pow(h[k].y-h[o].y,2))*2;if(w>s){s=w;t=D}}if(s>n&&t!=k){f.push(t);c(h,k,t,n);c(h,t,o,n)}},d=b.length-
1,f=[];f.push(0);for(f.push(d);b[0].equals(b[d]);){d--;f.push(d)}c(b,0,d,a);a=[];f.sort(function(h,k){return h-k});for(d=0;d<f.length;d++)a.push(b[f[d]]);return new OpenLayers.Geometry.LineString(a)}else return this},CLASS_NAME:"OpenLayers.Geometry.LineString"});
OpenLayers.Geometry.LinearRing=OpenLayers.Class(OpenLayers.Geometry.LineString,{componentTypes:["OpenLayers.Geometry.Point"],initialize:function(){OpenLayers.Geometry.LineString.prototype.initialize.apply(this,arguments)},addComponent:function(a,b){var c=false,d=this.components.pop();if(b!=null||!a.equals(d))c=OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,arguments);OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]]);return c},removeComponent:function(){if(this.components.length>
3){this.components.pop();OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments);OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]])}},move:function(a,b){for(var c=0,d=this.components.length;c<d-1;c++)this.components[c].move(a,b)},rotate:function(a,b){for(var c=0,d=this.components.length;c<d-1;++c)this.components[c].rotate(a,b)},resize:function(a,b,c){for(var d=0,f=this.components.length;d<f-1;++d)this.components[d].resize(a,b,c);return this},
transform:function(a,b){if(a&&b){for(var c=0,d=this.components.length;c<d-1;c++)this.components[c].transform(a,b);this.bounds=null}return this},getCentroid:function(){if(this.components&&this.components.length>2){for(var a=0,b=0,c=0;c<this.components.length-1;c++){var d=this.components[c],f=this.components[c+1];a+=(d.x+f.x)*(d.x*f.y-f.x*d.y);b+=(d.y+f.y)*(d.x*f.y-f.x*d.y)}c=-1*this.getArea();return new OpenLayers.Geometry.Point(a/(6*c),b/(6*c))}else return null},getArea:function(){var a=0;if(this.components&&
this.components.length>2){for(var b=a=0,c=this.components.length;b<c-1;b++){var d=this.components[b],f=this.components[b+1];a+=(d.x+f.x)*(f.y-d.y)}a=-a/2}return a},getGeodesicArea:function(a){var b=this;if(a){var c=new OpenLayers.Projection("EPSG:4326");c.equals(a)||(b=this.clone().transform(a,c))}a=0;c=b.components&&b.components.length;if(c>2){for(var d,f,h=0;h<c-1;h++){d=b.components[h];f=b.components[h+1];a+=OpenLayers.Util.rad(f.x-d.x)*(2+Math.sin(OpenLayers.Util.rad(d.y))+Math.sin(OpenLayers.Util.rad(f.y)))}a=
a*6378137*6378137/2}return a},containsPoint:function(a){var b=OpenLayers.Number.limitSigDigs,c=b(a.x,14);a=b(a.y,14);for(var d=this.components.length-1,f,h,k,o,n,s=0,t=0;t<d;++t){f=this.components[t];k=b(f.x,14);f=b(f.y,14);h=this.components[t+1];o=b(h.x,14);h=b(h.y,14);if(f==h){if(a==f)if(k<=o&&c>=k&&c<=o||k>=o&&c<=k&&c>=o){s=-1;break}}else{n=b(((k-o)*a+(o*f-k*h))/(f-h),14);if(n==c)if(f<h&&a>=f&&a<=h||f>h&&a<=f&&a>=h){s=-1;break}if(!(n<=c))if(!(k!=o&&(n<Math.min(k,o)||n>Math.max(k,o))))if(f<h&&a>=
f&&a<h||f>h&&a<f&&a>=h)++s}}return s==-1?1:!!(s&1)},intersects:function(a){var b=false;if(a.CLASS_NAME=="OpenLayers.Geometry.Point")b=this.containsPoint(a);else if(a.CLASS_NAME=="OpenLayers.Geometry.LineString")b=a.intersects(this);else if(a.CLASS_NAME=="OpenLayers.Geometry.LinearRing")b=OpenLayers.Geometry.LineString.prototype.intersects.apply(this,[a]);else for(var c=0,d=a.components.length;c<d;++c)if(b=a.components[c].intersects(this))break;return b},getVertices:function(a){return a===true?[]:
this.components.slice(0,this.components.length-1)},CLASS_NAME:"OpenLayers.Geometry.LinearRing"});
OpenLayers.Geometry.Polygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LinearRing"],initialize:function(){OpenLayers.Geometry.Collection.prototype.initialize.apply(this,arguments)},getArea:function(){var a=0;if(this.components&&this.components.length>0){a+=Math.abs(this.components[0].getArea());for(var b=1,c=this.components.length;b<c;b++)a-=Math.abs(this.components[b].getArea())}return a},getGeodesicArea:function(a){var b=0;if(this.components&&this.components.length>
0){b+=Math.abs(this.components[0].getGeodesicArea(a));for(var c=1,d=this.components.length;c<d;c++)b-=Math.abs(this.components[c].getGeodesicArea(a))}return b},containsPoint:function(a){var b=this.components.length,c=false;if(b>0){c=this.components[0].containsPoint(a);if(c!==1)if(c&&b>1)for(var d,f=1;f<b;++f)if(d=this.components[f].containsPoint(a)){c=d===1?1:false;break}}return c},intersects:function(a){var b=false,c,d;if(a.CLASS_NAME=="OpenLayers.Geometry.Point")b=this.containsPoint(a);else if(a.CLASS_NAME==
"OpenLayers.Geometry.LineString"||a.CLASS_NAME=="OpenLayers.Geometry.LinearRing"){c=0;for(d=this.components.length;c<d;++c)if(b=a.intersects(this.components[c]))break;if(!b){c=0;for(d=a.components.length;c<d;++c)if(b=this.containsPoint(a.components[c]))break}}else{c=0;for(d=a.components.length;c<d;++c)if(b=this.intersects(a.components[c]))break}if(!b&&a.CLASS_NAME=="OpenLayers.Geometry.Polygon"){var f=this.components[0];c=0;for(d=f.components.length;c<d;++c)if(b=a.containsPoint(f.components[c]))break}return b},
distanceTo:function(a,b){return b&&b.edge===false&&this.intersects(a)?0:OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this,[a,b])},CLASS_NAME:"OpenLayers.Geometry.Polygon"});OpenLayers.Geometry.Polygon.createRegularPolygon=function(a,b,c,d){var f=Math.PI*(1/c-0.5);if(d)f+=d/180*Math.PI;for(var h,k=[],o=0;o<c;++o){h=f+o*2*Math.PI/c;d=a.x+b*Math.cos(h);h=a.y+b*Math.sin(h);k.push(new OpenLayers.Geometry.Point(d,h))}a=new OpenLayers.Geometry.LinearRing(k);return new OpenLayers.Geometry.Polygon([a])};
OpenLayers.Event={observers:false,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(a){return a.target||a.srcElement},isSingleTouch:function(a){return a.touches&&a.touches.length==1},isMultiTouch:function(a){return a.touches&&a.touches.length>1},isLeftClick:function(a){return a.which&&a.which==1||a.button&&a.button==1},isRightClick:function(a){return a.which&&a.which==3||a.button&&a.button==2},stop:function(a,b){if(!b)if(a.preventDefault)a.preventDefault();
else a.returnValue=false;if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true},findElement:function(a,b){for(var c=OpenLayers.Event.element(a);c.parentNode&&(!c.tagName||c.tagName.toUpperCase()!=b.toUpperCase());)c=c.parentNode;return c},observe:function(a,b,c,d){a=OpenLayers.Util.getElement(a);d=d||false;if(b=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||a.attachEvent))b="keydown";if(!this.observers)this.observers={};if(!a._eventCacheID){var f="eventCacheID_";if(a.id)f=
a.id+"_"+f;a._eventCacheID=OpenLayers.Util.createUniqueID(f)}f=a._eventCacheID;this.observers[f]||(this.observers[f]=[]);this.observers[f].push({element:a,name:b,observer:c,useCapture:d});if(a.addEventListener)a.addEventListener(b,c,d);else a.attachEvent&&a.attachEvent("on"+b,c)},stopObservingElement:function(a){a=OpenLayers.Util.getElement(a)._eventCacheID;this._removeElementObservers(OpenLayers.Event.observers[a])},_removeElementObservers:function(a){if(a)for(var b=a.length-1;b>=0;b--){var c=a[b];
OpenLayers.Event.stopObserving.apply(this,[c.element,c.name,c.observer,c.useCapture])}},stopObserving:function(a,b,c,d){d=d||false;a=OpenLayers.Util.getElement(a);var f=a._eventCacheID;if(b=="keypress")if(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||a.detachEvent)b="keydown";var h=false,k=OpenLayers.Event.observers[f];if(k)for(var o=0;!h&&o<k.length;){var n=k[o];if(n.name==b&&n.observer==c&&n.useCapture==d){k.splice(o,1);k.length==0&&delete OpenLayers.Event.observers[f];h=true;break}o++}if(h)if(a.removeEventListener)a.removeEventListener(b,
c,d);else a&&a.detachEvent&&a.detachEvent("on"+b,c);return h},unloadCache:function(){if(OpenLayers.Event&&OpenLayers.Event.observers){for(var a in OpenLayers.Event.observers)OpenLayers.Event._removeElementObservers.apply(this,[OpenLayers.Event.observers[a]]);OpenLayers.Event.observers=false}},CLASS_NAME:"OpenLayers.Event"};OpenLayers.Event.observe(window,"unload",OpenLayers.Event.unloadCache,false);if(window.Event)OpenLayers.Util.applyDefaults(window.Event,OpenLayers.Event);else Event=OpenLayers.Event;
OpenLayers.Events=OpenLayers.Class({BROWSER_EVENTS:["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend"],listeners:null,object:null,element:null,eventTypes:null,eventHandler:null,fallThrough:null,includeXY:false,clearMouseListener:null,initialize:function(a,b,c,d,f){OpenLayers.Util.extend(this,f);this.object=a;this.fallThrough=d;this.listeners={};this.eventHandler=OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent,
this);this.clearMouseListener=OpenLayers.Function.bind(this.clearMouseCache,this);this.eventTypes=[];if(c!=null){a=0;for(d=c.length;a<d;a++)this.addEventType(c[a])}b!=null&&this.attachToElement(b)},destroy:function(){if(this.element){OpenLayers.Event.stopObservingElement(this.element);this.element.hasScrollEvent&&OpenLayers.Event.stopObserving(window,"scroll",this.clearMouseListener)}this.eventHandler=this.fallThrough=this.eventTypes=this.object=this.listeners=this.element=null},addEventType:function(a){if(!this.listeners[a]){this.eventTypes.push(a);
this.listeners[a]=[]}},attachToElement:function(a){this.element&&OpenLayers.Event.stopObservingElement(this.element);this.element=a;for(var b=0,c=this.BROWSER_EVENTS.length;b<c;b++){var d=this.BROWSER_EVENTS[b];this.addEventType(d);OpenLayers.Event.observe(a,d,this.eventHandler)}OpenLayers.Event.observe(a,"dragstart",OpenLayers.Event.stop)},on:function(a){for(var b in a)b!="scope"&&this.register(b,a.scope,a[b])},register:function(a,b,c){if(c!=null&&OpenLayers.Util.indexOf(this.eventTypes,a)!=-1){if(b==
null)b=this.object;this.listeners[a].push({obj:b,func:c})}},registerPriority:function(a,b,c){if(c!=null){if(b==null)b=this.object;a=this.listeners[a];a!=null&&a.unshift({obj:b,func:c})}},un:function(a){for(var b in a)b!="scope"&&this.unregister(b,a.scope,a[b])},unregister:function(a,b,c){if(b==null)b=this.object;a=this.listeners[a];if(a!=null)for(var d=0,f=a.length;d<f;d++)if(a[d].obj==b&&a[d].func==c){a.splice(d,1);break}},remove:function(a){if(this.listeners[a]!=null)this.listeners[a]=[]},triggerEvent:function(a,
b){var c=this.listeners[a];if(!(!c||c.length==0)){if(b==null)b={};b.object=this.object;b.element=this.element;if(!b.type)b.type=a;c=c.slice();for(var d,f=0,h=c.length;f<h;f++){d=c[f];d=d.func.apply(d.obj,[b]);if(d!=undefined&&d==false)break}this.fallThrough||OpenLayers.Event.stop(b,true);return d}},handleBrowserEvent:function(a){var b=a.type,c=this.listeners[b];if(!(!c||c.length==0)){if((c=a.touches)&&c[0]){for(var d=0,f=0,h=c.length,k,o=0;o<h;++o){k=c[o];d+=k.clientX;f+=k.clientY}a.clientX=d/h;a.clientY=
f/h}if(this.includeXY)a.xy=this.getMousePosition(a);this.triggerEvent(b,a)}},clearMouseCache:function(){this.element.scrolls=null;this.element.lefttop=null;var a=document.body;if(a&&!((a.scrollTop!=0||a.scrollLeft!=0)&&navigator.userAgent.match(/iPhone/i)))this.element.offsets=null},getMousePosition:function(a){if(this.includeXY){if(!this.element.hasScrollEvent){OpenLayers.Event.observe(window,"scroll",this.clearMouseListener);this.element.hasScrollEvent=true}}else this.clearMouseCache();if(!this.element.scrolls){var b=
OpenLayers.Util.getViewportElement();this.element.scrolls=[b.scrollLeft,b.scrollTop]}if(!this.element.lefttop)this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0];if(!this.element.offsets)this.element.offsets=OpenLayers.Util.pagePosition(this.element);return new OpenLayers.Pixel(a.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],a.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])},CLASS_NAME:"OpenLayers.Events"});
OpenLayers.Map=OpenLayers.Class({Z_INDEX_BASE:{BaseLayer:100,Overlay:325,Feature:725,Popup:750,Control:1E3},EVENT_TYPES:["preaddlayer","addlayer","removelayer","changelayer","movestart","move","moveend","zoomend","popupopen","popupclose","addmarker","removemarker","clearmarkers","mouseover","mouseout","mousemove","dragstart","drag","dragend","changebaselayer"],id:null,fractionalZoom:false,events:null,allOverlays:false,div:null,dragging:false,size:null,viewPortDiv:null,layerContainerOrigin:null,layerContainerDiv:null,
layers:null,controls:null,popups:null,baseLayer:null,center:null,resolution:null,zoom:0,panRatio:1.5,viewRequestID:0,tileSize:null,projection:"EPSG:4326",units:"degrees",resolutions:null,maxResolution:1.40625,minResolution:null,maxScale:null,minScale:null,maxExtent:null,minExtent:null,restrictedExtent:null,numZoomLevels:16,theme:null,displayProjection:null,fallThrough:true,panTween:null,eventListeners:null,panMethod:OpenLayers.Easing.Expo.easeOut,panDuration:50,paddingForPopups:null,minPx:null,maxPx:null,
initialize:function(a,b){if(arguments.length===1&&typeof a==="object")a=(b=a)&&b.div;this.tileSize=new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,OpenLayers.Map.TILE_HEIGHT);this.maxExtent=new OpenLayers.Bounds(-180,-90,180,90);this.paddingForPopups=new OpenLayers.Bounds(15,15,15,15);this.theme=OpenLayers._getScriptLocation()+"theme/default/style.css";OpenLayers.Util.extend(this,b);this.layers=[];this.id=OpenLayers.Util.createUniqueID("OpenLayers.Map_");this.div=OpenLayers.Util.getElement(a);if(!this.div){this.div=
document.createElement("div");this.div.style.height="1px";this.div.style.width="1px"}OpenLayers.Element.addClass(this.div,"olMap");var c=this.id+"_OpenLayers_ViewPort";this.viewPortDiv=OpenLayers.Util.createDiv(c,null,null,null,"relative",null,"hidden");this.viewPortDiv.style.width="100%";this.viewPortDiv.style.height="100%";this.viewPortDiv.className="olMapViewport";this.div.appendChild(this.viewPortDiv);c=document.createElement("div");c.id=this.id+"_events";c.style.position="absolute";c.style.width=
"100%";c.style.height="100%";c.style.zIndex=this.Z_INDEX_BASE.Control-1;this.viewPortDiv.appendChild(c);this.eventsDiv=c;this.events=new OpenLayers.Events(this,this.eventsDiv,this.EVENT_TYPES,this.fallThrough,{includeXY:true});c=this.id+"_OpenLayers_Container";this.layerContainerDiv=OpenLayers.Util.createDiv(c);this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE.Popup-1;this.eventsDiv.appendChild(this.layerContainerDiv);this.updateSize();this.eventListeners instanceof Object&&this.events.on(this.eventListeners);
this.events.register("movestart",this,this.updateSize);if(OpenLayers.String.contains(navigator.appName,"Microsoft"))this.events.register("resize",this,this.updateSize);else{this.updateSizeDestroy=OpenLayers.Function.bind(this.updateSize,this);OpenLayers.Event.observe(window,"resize",this.updateSizeDestroy)}if(this.theme){c=true;for(var d=document.getElementsByTagName("link"),f=0,h=d.length;f<h;++f)if(OpenLayers.Util.isEquivalentUrl(d.item(f).href,this.theme)){c=false;break}if(c){c=document.createElement("link");
c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",this.theme);document.getElementsByTagName("head")[0].appendChild(c)}}if(this.controls==null)this.controls=OpenLayers.Control!=null?[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanZoom,new OpenLayers.Control.ArgParser,new OpenLayers.Control.Attribution]:[];f=0;for(h=this.controls.length;f<h;f++)this.addControlToMap(this.controls[f]);this.popups=[];this.unloadDestroy=OpenLayers.Function.bind(this.destroy,
this);OpenLayers.Event.observe(window,"unload",this.unloadDestroy);if(b&&b.layers){delete this.center;this.addLayers(b.layers);b.center&&this.setCenter(b.center,b.zoom)}},render:function(a){this.div=OpenLayers.Util.getElement(a);OpenLayers.Element.addClass(this.div,"olMap");this.viewPortDiv.parentNode.removeChild(this.viewPortDiv);this.div.appendChild(this.viewPortDiv);this.updateSize()},unloadDestroy:null,updateSizeDestroy:null,destroy:function(){if(!this.unloadDestroy)return false;if(this.panTween){this.panTween.stop();
this.panTween=null}OpenLayers.Event.stopObserving(window,"unload",this.unloadDestroy);this.unloadDestroy=null;this.updateSizeDestroy?OpenLayers.Event.stopObserving(window,"resize",this.updateSizeDestroy):this.events.unregister("resize",this,this.updateSize);this.paddingForPopups=null;if(this.controls!=null){for(var a=this.controls.length-1;a>=0;--a)this.controls[a].destroy();this.controls=null}if(this.layers!=null){for(a=this.layers.length-1;a>=0;--a)this.layers[a].destroy(false);this.layers=null}this.viewPortDiv&&
this.div.removeChild(this.viewPortDiv);this.viewPortDiv=null;if(this.eventListeners){this.events.un(this.eventListeners);this.eventListeners=null}this.events.destroy();this.events=null},setOptions:function(a){var b=this.minPx&&a.restrictedExtent!=this.restrictedExtent;OpenLayers.Util.extend(this,a);b&&this.moveTo(this.getCachedCenter(),this.zoom,{forceZoomChange:true})},getTileSize:function(){return this.tileSize},getBy:function(a,b,c){var d=typeof c.test=="function";return OpenLayers.Array.filter(this[a],
function(f){return f[b]==c||d&&c.test(f[b])})},getLayersBy:function(a,b){return this.getBy("layers",a,b)},getLayersByName:function(a){return this.getLayersBy("name",a)},getLayersByClass:function(a){return this.getLayersBy("CLASS_NAME",a)},getControlsBy:function(a,b){return this.getBy("controls",a,b)},getControlsByClass:function(a){return this.getControlsBy("CLASS_NAME",a)},getLayer:function(a){for(var b=null,c=0,d=this.layers.length;c<d;c++){var f=this.layers[c];if(f.id==a){b=f;break}}return b},setLayerZIndex:function(a,
b){a.setZIndex(this.Z_INDEX_BASE[a.isBaseLayer?"BaseLayer":"Overlay"]+b*5)},resetLayersZIndex:function(){for(var a=0,b=this.layers.length;a<b;a++)this.setLayerZIndex(this.layers[a],a)},addLayer:function(a){for(var b=0,c=this.layers.length;b<c;b++)if(this.layers[b]==a){a=OpenLayers.i18n("layerAlreadyAdded",{layerName:a.name});OpenLayers.Console.warn(a);return false}if(this.allOverlays)a.isBaseLayer=false;if(this.events.triggerEvent("preaddlayer",{layer:a})!==false){a.div.className="olLayerDiv";a.div.style.overflow=
"";this.setLayerZIndex(a,this.layers.length);a.isFixed?this.viewPortDiv.appendChild(a.div):this.layerContainerDiv.appendChild(a.div);this.layers.push(a);a.setMap(this);if(a.isBaseLayer||this.allOverlays&&!this.baseLayer)this.baseLayer==null?this.setBaseLayer(a):a.setVisibility(false);else a.redraw();this.events.triggerEvent("addlayer",{layer:a});a.events.triggerEvent("added",{map:this,layer:a});a.afterAdd()}},addLayers:function(a){for(var b=0,c=a.length;b<c;b++)this.addLayer(a[b])},removeLayer:function(a,
b){if(b==null)b=true;a.isFixed?this.viewPortDiv.removeChild(a.div):this.layerContainerDiv.removeChild(a.div);OpenLayers.Util.removeItem(this.layers,a);a.removeMap(this);a.map=null;if(this.baseLayer==a){this.baseLayer=null;if(b)for(var c=0,d=this.layers.length;c<d;c++){var f=this.layers[c];if(f.isBaseLayer||this.allOverlays){this.setBaseLayer(f);break}}}this.resetLayersZIndex();this.events.triggerEvent("removelayer",{layer:a});a.events.triggerEvent("removed",{map:this,layer:a})},getNumLayers:function(){return this.layers.length},
getLayerIndex:function(a){return OpenLayers.Util.indexOf(this.layers,a)},setLayerIndex:function(a,b){var c=this.getLayerIndex(a);if(b<0)b=0;else if(b>this.layers.length)b=this.layers.length;if(c!=b){this.layers.splice(c,1);this.layers.splice(b,0,a);c=0;for(var d=this.layers.length;c<d;c++)this.setLayerZIndex(this.layers[c],c);this.events.triggerEvent("changelayer",{layer:a,property:"order"});if(this.allOverlays)if(b===0)this.setBaseLayer(a);else this.baseLayer!==this.layers[0]&&this.setBaseLayer(this.layers[0])}},
raiseLayer:function(a,b){var c=this.getLayerIndex(a)+b;this.setLayerIndex(a,c)},setBaseLayer:function(a){if(a!=this.baseLayer)if(OpenLayers.Util.indexOf(this.layers,a)!=-1){var b=this.getCachedCenter(),c=OpenLayers.Util.getResolutionFromScale(this.getScale(),a.units);this.baseLayer!=null&&!this.allOverlays&&this.baseLayer.setVisibility(false);this.baseLayer=a;this.viewRequestID++;if(!this.allOverlays||this.baseLayer.visibility)this.baseLayer.setVisibility(true);if(b!=null){a=this.getZoomForResolution(c||
this.resolution,true);this.setCenter(b,a,false,true)}this.events.triggerEvent("changebaselayer",{layer:this.baseLayer})}},addControl:function(a,b){this.controls.push(a);this.addControlToMap(a,b)},addControls:function(a,b){for(var c=arguments.length===1?[]:b,d=0,f=a.length;d<f;d++)this.addControl(a[d],c[d]?c[d]:null)},addControlToMap:function(a,b){a.outsideViewport=a.div!=null;if(this.displayProjection&&!a.displayProjection)a.displayProjection=this.displayProjection;a.setMap(this);var c=a.draw(b);
if(c)if(!a.outsideViewport){c.style.zIndex=this.Z_INDEX_BASE.Control+this.controls.length;this.viewPortDiv.appendChild(c)}a.autoActivate&&a.activate()},getControl:function(a){for(var b=null,c=0,d=this.controls.length;c<d;c++){var f=this.controls[c];if(f.id==a){b=f;break}}return b},removeControl:function(a){if(a&&a==this.getControl(a.id)){a.div&&a.div.parentNode==this.viewPortDiv&&this.viewPortDiv.removeChild(a.div);OpenLayers.Util.removeItem(this.controls,a)}},addPopup:function(a,b){if(b)for(var c=
this.popups.length-1;c>=0;--c)this.removePopup(this.popups[c]);a.map=this;this.popups.push(a);if(c=a.draw()){c.style.zIndex=this.Z_INDEX_BASE.Popup+this.popups.length;this.layerContainerDiv.appendChild(c)}},removePopup:function(a){OpenLayers.Util.removeItem(this.popups,a);if(a.div)try{this.layerContainerDiv.removeChild(a.div)}catch(b){}a.map=null},getSize:function(){var a=null;if(this.size!=null)a=this.size.clone();return a},updateSize:function(){var a=this.getCurrentSize();if(a&&!isNaN(a.h)&&!isNaN(a.w)){this.events.clearMouseCache();
var b=this.getSize();if(b==null)this.size=b=a;if(!a.equals(b)){this.size=a;a=0;for(b=this.layers.length;a<b;a++)this.layers[a].onMapResize();a=this.getCachedCenter();if(this.baseLayer!=null&&a!=null){b=this.getZoom();this.zoom=null;this.setCenter(a,b)}}}},getCurrentSize:function(){var a=new OpenLayers.Size(this.div.clientWidth,this.div.clientHeight);if(a.w==0&&a.h==0||isNaN(a.w)&&isNaN(a.h)){a.w=this.div.offsetWidth;a.h=this.div.offsetHeight}if(a.w==0&&a.h==0||isNaN(a.w)&&isNaN(a.h)){a.w=parseInt(this.div.style.width);
a.h=parseInt(this.div.style.height)}return a},calculateBounds:function(a,b){var c=null;if(a==null)a=this.getCachedCenter();if(b==null)b=this.getResolution();if(a!=null&&b!=null){var d=this.getSize();c=d.w*b;d=d.h*b;c=new OpenLayers.Bounds(a.lon-c/2,a.lat-d/2,a.lon+c/2,a.lat+d/2)}return c},getCenter:function(){var a=null,b=this.getCachedCenter();if(b)a=b.clone();return a},getCachedCenter:function(){if(!this.center&&this.size)this.center=this.getLonLatFromViewPortPx(new OpenLayers.Pixel(this.size.w/
2,this.size.h/2));return this.center},getZoom:function(){return this.zoom},pan:function(a,b,c){c=OpenLayers.Util.applyDefaults(c,{animate:true,dragging:false});if(c.dragging){if(a!=0||b!=0)this.moveByPx(a,b)}else{var d=this.getViewPortPxFromLonLat(this.getCachedCenter());a=d.add(a,b);if(this.dragging||!a.equals(d)){d=this.getLonLatFromViewPortPx(a);if(c.animate)this.panTo(d);else{this.moveTo(d);this.dragging=false;this.events.triggerEvent("moveend")}}}},panTo:function(a){if(this.panMethod&&this.getExtent().scale(this.panRatio).containsLonLat(a)){if(!this.panTween)this.panTween=
new OpenLayers.Tween(this.panMethod);var b=this.getCachedCenter();if(!a.equals(b)){b=this.getPixelFromLonLat(b);var c=this.getPixelFromLonLat(a),d={x:0,y:0};this.panTween.start({x:0,y:0},{x:c.x-b.x,y:c.y-b.y},this.panDuration,{callbacks:{eachStep:OpenLayers.Function.bind(function(f){this.moveByPx(f.x-d.x,f.y-d.y);d.x=Math.round(f.x);d.y=Math.round(f.y)},this),done:OpenLayers.Function.bind(function(){this.moveTo(a);this.dragging=false;this.events.triggerEvent("moveend")},this)}})}}else this.setCenter(a)},
setCenter:function(a,b,c,d){this.panTween&&this.panTween.stop();this.moveTo(a,b,{dragging:c,forceZoomChange:d})},moveByPx:function(a,b){a=Math.round(a);b=Math.round(b);var c=this.size.w/2,d=this.size.h/2,f=c+a,h=d+b,k=this.baseLayer.wrapDateLine,o=0,n=0;if(this.restrictedExtent){o=c;n=d;k=false}c=h<=this.maxPx.y-n&&h>=this.minPx.y+n;d=this.minPx.x;h=this.maxPx.x;k||(c=c&&f<=this.maxPx.x-o&&f>=this.minPx.x+o);if(c){if(!this.dragging){this.dragging=true;this.events.triggerEvent("movestart")}this.center=
null;if(a){this.layerContainerDiv.style.left=parseInt(this.layerContainerDiv.style.left)-a+"px";this.minPx.x-=a;this.maxPx.x-=a;if(k){if(this.maxPx.x>h)this.maxPx.x-=h-d;if(this.minPx.x<d)this.minPx.x+=h-d}}if(b){this.layerContainerDiv.style.top=parseInt(this.layerContainerDiv.style.top)-b+"px";this.minPx.y-=b;this.maxPx.y-=b}k=0;for(o=this.layers.length;k<o;++k){f=this.layers[k];if(f.visibility){f.moveByPx(a,b);f.events.triggerEvent("move")}}this.events.triggerEvent("move")}},moveTo:function(a,b,
c){c||(c={});if(b!=null){b=parseFloat(b);this.fractionalZoom||(b=Math.round(b))}var d=c.dragging||this.dragging,f=c.forceZoomChange;if(!this.getCachedCenter()&&!this.isValidLonLat(a)){a=this.maxExtent.getCenterLonLat();this.center=a.clone()}if(this.restrictedExtent!=null){if(a==null)a=this.center;if(b==null)b=this.getZoom();var h=this.getResolutionForZoom(b);h=this.calculateBounds(a,h);if(!this.restrictedExtent.containsBounds(h)){var k=this.restrictedExtent.getCenterLonLat();if(h.getWidth()>this.restrictedExtent.getWidth())a=
new OpenLayers.LonLat(k.lon,a.lat);else if(h.left<this.restrictedExtent.left)a=a.add(this.restrictedExtent.left-h.left,0);else if(h.right>this.restrictedExtent.right)a=a.add(this.restrictedExtent.right-h.right,0);if(h.getHeight()>this.restrictedExtent.getHeight())a=new OpenLayers.LonLat(a.lon,k.lat);else if(h.bottom<this.restrictedExtent.bottom)a=a.add(0,this.restrictedExtent.bottom-h.bottom);else if(h.top>this.restrictedExtent.top)a=a.add(0,this.restrictedExtent.top-h.top)}}f=f||this.isValidZoomLevel(b)&&
b!=this.getZoom();h=this.isValidLonLat(a)&&!a.equals(this.center);if(f||h||d){d||this.events.triggerEvent("movestart");if(h){!f&&this.center&&this.centerLayerContainer(a);this.center=a.clone()}a=f?this.getResolutionForZoom(b):this.getResolution();if(f||this.layerContainerOrigin==null){this.layerContainerOrigin=this.getCachedCenter();this.layerContainerDiv.style.left="0px";this.layerContainerDiv.style.top="0px";var o=this.getMaxExtent({restricted:true});h=o.getCenterLonLat();k=this.center.lon-h.lon;
var n=h.lat-this.center.lat;h=Math.round(o.getWidth()/a);o=Math.round(o.getHeight()/a);k=(this.size.w-h)/2-k/a;n=(this.size.h-o)/2-n/a;this.minPx=new OpenLayers.Pixel(k,n);this.maxPx=new OpenLayers.Pixel(k+h,n+o)}if(f){this.zoom=b;this.resolution=a;this.viewRequestID++}a=this.getExtent();if(this.baseLayer.visibility){this.baseLayer.moveTo(a,f,c.dragging);c.dragging||this.baseLayer.events.triggerEvent("moveend",{zoomChanged:f})}a=this.baseLayer.getExtent();for(b=this.layers.length-1;b>=0;--b){h=this.layers[b];
if(h!==this.baseLayer&&!h.isBaseLayer){k=h.calculateInRange();if(h.inRange!=k){(h.inRange=k)||h.display(false);this.events.triggerEvent("changelayer",{layer:h,property:"visibility"})}if(k&&h.visibility){h.moveTo(a,f,c.dragging);c.dragging||h.events.triggerEvent("moveend",{zoomChanged:f})}}}this.events.triggerEvent("move");d||this.events.triggerEvent("moveend");if(f){b=0;for(c=this.popups.length;b<c;b++)this.popups[b].updatePosition();this.events.triggerEvent("zoomend")}}},centerLayerContainer:function(a){var b=
this.getViewPortPxFromLonLat(this.layerContainerOrigin),c=this.getViewPortPxFromLonLat(a);if(b!=null&&c!=null){var d=parseInt(this.layerContainerDiv.style.left);a=parseInt(this.layerContainerDiv.style.top);var f=Math.round(b.x-c.x);b=Math.round(b.y-c.y);this.layerContainerDiv.style.left=f+"px";this.layerContainerDiv.style.top=b+"px";d=d-f;a=a-b;this.minPx.x-=d;this.maxPx.x-=d;this.minPx.y-=a;this.maxPx.y-=a}},isValidZoomLevel:function(a){return a!=null&&a>=this.getRestrictedMinZoom()&&a<this.getNumZoomLevels()},
isValidLonLat:function(a){var b=false;if(a!=null)b=this.getMaxExtent().containsLonLat(a);return b},getProjection:function(){var a=this.getProjectionObject();return a?a.getCode():null},getProjectionObject:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.projection;return a},getMaxResolution:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.maxResolution;return a},getMaxExtent:function(a){var b=null;if(a&&a.restricted&&this.restrictedExtent)b=this.restrictedExtent;else if(this.baseLayer!=
null)b=this.baseLayer.maxExtent;return b},getRestrictedMinZoom:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.restrictedMinZoom;return a},getNumZoomLevels:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.numZoomLevels;return a},getExtent:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.getExtent();return a},getResolution:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.getResolution();else if(this.allOverlays===true&&this.layers.length>0)a=
this.layers[0].getResolution();return a},getUnits:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.units;return a},getScale:function(){var a=null;if(this.baseLayer!=null){a=this.getResolution();a=OpenLayers.Util.getScaleFromResolution(a,this.baseLayer.units)}return a},getZoomForExtent:function(a,b){var c=null;if(this.baseLayer!=null)c=this.baseLayer.getZoomForExtent(a,b);return c},getResolutionForZoom:function(a){var b=null;if(this.baseLayer)b=this.baseLayer.getResolutionForZoom(a);
return b},getZoomForResolution:function(a,b){var c=null;if(this.baseLayer!=null)c=this.baseLayer.getZoomForResolution(a,b);return c},zoomTo:function(a){this.isValidZoomLevel(a)&&this.setCenter(null,a)},zoomIn:function(){this.zoomTo(this.getZoom()+1)},zoomOut:function(){this.zoomTo(this.getZoom()-1)},zoomToExtent:function(a,b){var c=a.getCenterLonLat();if(this.baseLayer.wrapDateLine){c=this.getMaxExtent();for(a=a.clone();a.right<a.left;)a.right+=c.getWidth();c=a.getCenterLonLat().wrapDateLine(c)}this.setCenter(c,
this.getZoomForExtent(a,b))},zoomToMaxExtent:function(a){this.zoomToExtent(this.getMaxExtent({restricted:a?a.restricted:true}))},zoomToScale:function(a,b){var c=OpenLayers.Util.getResolutionFromScale(a,this.baseLayer.units),d=this.getSize(),f=d.w*c;c=d.h*c;d=this.getCachedCenter();this.zoomToExtent(new OpenLayers.Bounds(d.lon-f/2,d.lat-c/2,d.lon+f/2,d.lat+c/2),b)},getLonLatFromViewPortPx:function(a){var b=null;if(this.baseLayer!=null)b=this.baseLayer.getLonLatFromViewPortPx(a);return b},getViewPortPxFromLonLat:function(a){var b=
null;if(this.baseLayer!=null)b=this.baseLayer.getViewPortPxFromLonLat(a);return b},getLonLatFromPixel:function(a){return this.getLonLatFromViewPortPx(a)},getPixelFromLonLat:function(a){a=this.getViewPortPxFromLonLat(a);a.x=Math.round(a.x);a.y=Math.round(a.y);return a},getGeodesicPixelSize:function(a){var b=a?this.getLonLatFromPixel(a):this.getCachedCenter()||new OpenLayers.LonLat(0,0),c=this.getResolution();a=b.add(-c/2,0);var d=b.add(c/2,0),f=b.add(0,-c/2);b=b.add(0,c/2);c=new OpenLayers.Projection("EPSG:4326");
var h=this.getProjectionObject()||c;if(!h.equals(c)){a.transform(h,c);d.transform(h,c);f.transform(h,c);b.transform(h,c)}return new OpenLayers.Size(OpenLayers.Util.distVincenty(a,d),OpenLayers.Util.distVincenty(f,b))},getViewPortPxFromLayerPx:function(a){var b=null;if(a!=null){b=parseInt(this.layerContainerDiv.style.left);var c=parseInt(this.layerContainerDiv.style.top);b=a.add(b,c)}return b},getLayerPxFromViewPortPx:function(a){var b=null;if(a!=null){b=-parseInt(this.layerContainerDiv.style.left);
var c=-parseInt(this.layerContainerDiv.style.top);b=a.add(b,c);if(isNaN(b.x)||isNaN(b.y))b=null}return b},getLonLatFromLayerPx:function(a){a=this.getViewPortPxFromLayerPx(a);return this.getLonLatFromViewPortPx(a)},getLayerPxFromLonLat:function(a){return this.getLayerPxFromViewPortPx(this.getPixelFromLonLat(a))},CLASS_NAME:"OpenLayers.Map"});OpenLayers.Map.TILE_WIDTH=256;OpenLayers.Map.TILE_HEIGHT=256;
OpenLayers.Projection=OpenLayers.Class({proj:null,projCode:null,titleRegEx:/\+title=[^\+]*/,initialize:function(a,b){OpenLayers.Util.extend(this,b);this.projCode=a;if(window.Proj4js)this.proj=new Proj4js.Proj(a)},getCode:function(){return this.proj?this.proj.srsCode:this.projCode},getUnits:function(){return this.proj?this.proj.units:null},toString:function(){return this.getCode()},equals:function(a){var b=false;if(a)if(window.Proj4js&&this.proj.defData&&a.proj.defData)b=this.proj.defData.replace(this.titleRegEx,
"")==a.proj.defData.replace(this.titleRegEx,"");else if(a.getCode){b=this.getCode();a=a.getCode();b=b==a||!!OpenLayers.Projection.transforms[b]&&OpenLayers.Projection.transforms[b][a]===OpenLayers.Projection.nullTransform}return b},destroy:function(){delete this.proj;delete this.projCode},CLASS_NAME:"OpenLayers.Projection"});OpenLayers.Projection.transforms={};
OpenLayers.Projection.addTransform=function(a,b,c){OpenLayers.Projection.transforms[a]||(OpenLayers.Projection.transforms[a]={});OpenLayers.Projection.transforms[a][b]=c};OpenLayers.Projection.transform=function(a,b,c){if(b.proj&&c.proj)a=Proj4js.transform(b.proj,c.proj,a);else b&&c&&OpenLayers.Projection.transforms[b.getCode()]&&OpenLayers.Projection.transforms[b.getCode()][c.getCode()]&&OpenLayers.Projection.transforms[b.getCode()][c.getCode()](a);return a};OpenLayers.Projection.nullTransform=function(a){return a};
OpenLayers.Layer=OpenLayers.Class({id:null,name:null,div:null,opacity:null,alwaysInRange:null,EVENT_TYPES:["loadstart","loadend","loadcancel","visibilitychanged","move","moveend","added","removed"],RESOLUTION_PROPERTIES:["scales","resolutions","maxScale","minScale","maxResolution","minResolution","numZoomLevels","maxZoomLevel"],events:null,map:null,isBaseLayer:false,alpha:false,displayInLayerSwitcher:true,visibility:true,attribution:null,inRange:false,imageSize:null,imageOffset:null,options:null,
eventListeners:null,gutter:0,projection:null,units:null,scales:null,resolutions:null,maxExtent:null,minExtent:null,maxResolution:null,minResolution:null,numZoomLevels:null,restrictedMinZoom:0,minScale:null,maxScale:null,displayOutsideMaxExtent:false,wrapDateLine:false,transitionEffect:null,SUPPORTED_TRANSITIONS:["resize"],metadata:{},initialize:function(a,b){this.addOptions(b);this.name=a;if(this.id==null){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_");this.div=OpenLayers.Util.createDiv(this.id);
this.div.style.width="100%";this.div.style.height="100%";this.div.dir="ltr";this.events=new OpenLayers.Events(this,this.div,this.EVENT_TYPES);this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}if(this.wrapDateLine)this.displayOutsideMaxExtent=true},destroy:function(a){if(a==null)a=true;this.map!=null&&this.map.removeLayer(this,a);this.options=this.div=this.name=this.map=this.projection=null;if(this.events){this.eventListeners&&this.events.un(this.eventListeners);this.events.destroy()}this.events=
this.eventListeners=null},clone:function(a){if(a==null)a=new OpenLayers.Layer(this.name,this.getOptions());OpenLayers.Util.applyDefaults(a,this);a.map=null;return a},getOptions:function(){var a={},b;for(b in this.options)a[b]=this[b];return a},setName:function(a){if(a!=this.name){this.name=a;this.map!=null&&this.map.events.triggerEvent("changelayer",{layer:this,property:"name"})}},addOptions:function(a){if(this.options==null)this.options={};OpenLayers.Util.extend(this.options,a);OpenLayers.Util.extend(this,
a);if(typeof this.projection=="string")this.projection=new OpenLayers.Projection(this.projection);if(this.projection&&this.projection.getUnits())this.units=this.projection.getUnits();if(this.map){var b=this.RESOLUTION_PROPERTIES.concat(["projection","units","minExtent","maxExtent"]),c;for(c in a)if(a.hasOwnProperty(c)&&OpenLayers.Util.indexOf(b,c)>=0){this.initResolutions();break}}},onMapResize:function(){},redraw:function(){var a=false;if(this.map){this.inRange=this.calculateInRange();var b=this.getExtent();
if(b&&this.inRange&&this.visibility){this.moveTo(b,true,false);this.events.triggerEvent("moveend",{zoomChanged:true});a=true}}return a},moveTo:function(){var a=this.visibility;this.isBaseLayer||(a=a&&this.inRange);this.display(a)},moveByPx:function(){},setMap:function(a){if(this.map==null){this.map=a;this.maxExtent=this.maxExtent||this.map.maxExtent;this.minExtent=this.minExtent||this.map.minExtent;this.projection=this.projection||this.map.projection;if(typeof this.projection=="string")this.projection=
new OpenLayers.Projection(this.projection);this.units=this.projection.getUnits()||this.units||this.map.units;this.initResolutions();if(!this.isBaseLayer){this.inRange=this.calculateInRange();this.div.style.display=this.visibility&&this.inRange?"":"none"}this.setTileSize()}},afterAdd:function(){},removeMap:function(){},getImageSize:function(){return this.imageSize||this.tileSize},setTileSize:function(a){this.tileSize=a=a?a:this.tileSize?this.tileSize:this.map.getTileSize();if(this.gutter){this.imageOffset=
new OpenLayers.Pixel(-this.gutter,-this.gutter);this.imageSize=new OpenLayers.Size(a.w+2*this.gutter,a.h+2*this.gutter)}},getVisibility:function(){return this.visibility},setVisibility:function(a){if(a!=this.visibility){this.visibility=a;this.display(a);this.redraw();this.map!=null&&this.map.events.triggerEvent("changelayer",{layer:this,property:"visibility"});this.events.triggerEvent("visibilitychanged")}},display:function(a){if(a!=(this.div.style.display!="none"))this.div.style.display=a&&this.calculateInRange()?
"block":"none"},calculateInRange:function(){var a=false;if(this.alwaysInRange)a=true;else if(this.map){a=this.map.getResolution();a=this.map.getZoom()>=this.restrictedMinZoom&&a>=this.minResolution&&a<=this.maxResolution}return a},setIsBaseLayer:function(a){if(a!=this.isBaseLayer){this.isBaseLayer=a;this.map!=null&&this.map.events.triggerEvent("changebaselayer",{layer:this})}},initResolutions:function(){var a,b,c,d={},f=true;a=0;for(b=this.RESOLUTION_PROPERTIES.length;a<b;a++){c=this.RESOLUTION_PROPERTIES[a];
d[c]=this.options[c];if(f&&this.options[c])f=false}if(this.alwaysInRange==null)this.alwaysInRange=f;if(d.resolutions==null)d.resolutions=this.resolutionsFromScales(d.scales);if(d.resolutions==null)d.resolutions=this.calculateResolutions(d);if(d.resolutions==null){a=0;for(b=this.RESOLUTION_PROPERTIES.length;a<b;a++){c=this.RESOLUTION_PROPERTIES[a];d[c]=this.options[c]!=null?this.options[c]:this.map[c]}if(d.resolutions==null)d.resolutions=this.resolutionsFromScales(d.scales);if(d.resolutions==null)d.resolutions=
this.calculateResolutions(d)}var h;if(this.options.maxResolution&&this.options.maxResolution!=="auto")h=this.options.maxResolution;if(this.options.minScale)h=OpenLayers.Util.getResolutionFromScale(this.options.minScale,this.units);var k;if(this.options.minResolution&&this.options.minResolution!=="auto")k=this.options.minResolution;if(this.options.maxScale)k=OpenLayers.Util.getResolutionFromScale(this.options.maxScale,this.units);if(d.resolutions){d.resolutions.sort(function(o,n){return n-o});h||(h=
d.resolutions[0]);k||(k=d.resolutions[d.resolutions.length-1])}if(this.resolutions=d.resolutions){b=this.resolutions.length;this.scales=Array(b);for(a=0;a<b;a++)this.scales[a]=OpenLayers.Util.getScaleFromResolution(this.resolutions[a],this.units);this.numZoomLevels=b}if(this.minResolution=k)this.maxScale=OpenLayers.Util.getScaleFromResolution(k,this.units);if(this.maxResolution=h)this.minScale=OpenLayers.Util.getScaleFromResolution(h,this.units)},resolutionsFromScales:function(a){if(a!=null){var b,
c,d;d=a.length;b=Array(d);for(c=0;c<d;c++)b[c]=OpenLayers.Util.getResolutionFromScale(a[c],this.units);return b}},calculateResolutions:function(a){var b,c,d=a.maxResolution;if(a.minScale!=null)d=OpenLayers.Util.getResolutionFromScale(a.minScale,this.units);else if(d=="auto"&&this.maxExtent!=null){b=this.map.getSize();c=this.maxExtent.getWidth()/b.w;b=this.maxExtent.getHeight()/b.h;d=Math.max(c,b)}c=a.minResolution;if(a.maxScale!=null)c=OpenLayers.Util.getResolutionFromScale(a.maxScale,this.units);
else if(a.minResolution=="auto"&&this.minExtent!=null){b=this.map.getSize();c=this.minExtent.getWidth()/b.w;b=this.minExtent.getHeight()/b.h;c=Math.max(c,b)}b=a.maxZoomLevel;a=a.numZoomLevels;if(typeof c==="number"&&typeof d==="number"&&a===undefined)a=Math.floor(Math.log(d/c)/Math.log(2))+1;else if(a===undefined&&b!=null)a=b+1;if(!(typeof a!=="number"||a<=0||typeof d!=="number"&&typeof c!=="number")){b=Array(a);var f=2;if(typeof c=="number"&&typeof d=="number")f=Math.pow(d/c,1/(a-1));var h;if(typeof d===
"number")for(h=0;h<a;h++)b[h]=d/Math.pow(f,h);else for(h=0;h<a;h++)b[a-1-h]=c*Math.pow(f,h);return b}},getResolution:function(){return this.getResolutionForZoom(this.map.getZoom())},getExtent:function(){return this.map.calculateBounds()},getZoomForExtent:function(a,b){var c=this.map.getSize();return this.getZoomForResolution(Math.max(a.getWidth()/c.w,a.getHeight()/c.h),b)},getDataExtent:function(){},getResolutionForZoom:function(a){a=Math.max(0,Math.min(a,this.resolutions.length-1));if(this.map.fractionalZoom){var b=
Math.floor(a);a=this.resolutions[b]-(a-b)*(this.resolutions[b]-this.resolutions[Math.ceil(a)])}else a=this.resolutions[Math.round(a)];return a},getZoomForResolution:function(a,b){var c,d;if(this.map.fractionalZoom){var f=0,h=this.resolutions[f],k=this.resolutions[this.resolutions.length-1],o;c=0;for(d=this.resolutions.length;c<d;++c){o=this.resolutions[c];if(o>=a){h=o;f=c}if(o<=a){k=o;break}}c=h-k;c=c>0?f+(h-a)/c:f}else{h=Number.POSITIVE_INFINITY;c=0;for(d=this.resolutions.length;c<d;c++)if(b){f=
Math.abs(this.resolutions[c]-a);if(f>h)break;h=f}else if(this.resolutions[c]<a)break;c=Math.max(0,c-1)}return Math.max(this.restrictedMinZoom,c)},getLonLatFromViewPortPx:function(a){var b=null,c=this.map;if(a!=null&&c.minPx){b=c.getResolution();var d=c.getMaxExtent({restricted:true});b=new OpenLayers.LonLat((a.x-c.minPx.x)*b+d.left,(c.minPx.y-a.y)*b+d.top);if(this.wrapDateLine)b=b.wrapDateLine(this.maxExtent)}return b},getViewPortPxFromLonLat:function(a){var b=null;if(a!=null){b=this.map.getResolution();
var c=this.map.getExtent();b=new OpenLayers.Pixel(1/b*(a.lon-c.left),1/b*(c.top-a.lat))}return b},setOpacity:function(a){if(a!=this.opacity){this.opacity=a;for(var b=0,c=this.div.childNodes.length;b<c;++b)OpenLayers.Util.modifyDOMElement(this.div.childNodes[b].firstChild,null,null,null,null,null,null,a);this.map!=null&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"})}},getZIndex:function(){return this.div.style.zIndex},setZIndex:function(a){this.div.style.zIndex=a},adjustBounds:function(a){if(this.gutter){var b=
this.gutter*this.map.getResolution();a=new OpenLayers.Bounds(a.left-b,a.bottom-b,a.right+b,a.top+b)}if(this.wrapDateLine){b={rightTolerance:this.getResolution(),leftTolerance:this.getResolution()};a=a.wrapDateLine(this.maxExtent,b)}return a},CLASS_NAME:"OpenLayers.Layer"});
OpenLayers.Layer.HTTPRequest=OpenLayers.Class(OpenLayers.Layer,{URL_HASH_FACTOR:(Math.sqrt(5)-1)/2,url:null,params:null,reproject:false,initialize:function(a,b,c,d){var f=arguments;f=[a,d];OpenLayers.Layer.prototype.initialize.apply(this,f);this.url=b;this.params=OpenLayers.Util.extend({},c)},destroy:function(){this.params=this.url=null;OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(a){if(a==null)a=new OpenLayers.Layer.HTTPRequest(this.name,this.url,this.params,this.getOptions());
return a=OpenLayers.Layer.prototype.clone.apply(this,[a])},setUrl:function(a){this.url=a},mergeNewParams:function(a){this.params=OpenLayers.Util.extend(this.params,a);a=this.redraw();this.map!=null&&this.map.events.triggerEvent("changelayer",{layer:this,property:"params"});return a},redraw:function(a){return a?this.mergeNewParams({_olSalt:Math.random()}):OpenLayers.Layer.prototype.redraw.apply(this,[])},selectUrl:function(a,b){for(var c=1,d=0,f=a.length;d<f;d++){c*=a.charCodeAt(d)*this.URL_HASH_FACTOR;
c-=Math.floor(c)}return b[Math.floor(c*b.length)]},getFullRequestString:function(a,b){var c=b||this.url,d=OpenLayers.Util.extend({},this.params);d=OpenLayers.Util.extend(d,a);var f=OpenLayers.Util.getParameterString(d);if(c instanceof Array)c=this.selectUrl(f,c);f=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(c));for(var h in d)h.toUpperCase()in f&&delete d[h];f=OpenLayers.Util.getParameterString(d);return OpenLayers.Util.urlAppend(c,f)},CLASS_NAME:"OpenLayers.Layer.HTTPRequest"});
OpenLayers.Layer.Grid=OpenLayers.Class(OpenLayers.Layer.HTTPRequest,{tileSize:null,tileOriginCorner:"bl",tileOrigin:null,tileOptions:null,grid:null,singleTile:false,ratio:1.5,buffer:0,numLoadingTiles:0,tileLoadingDelay:100,timerId:null,initialize:function(){OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this,arguments);this.events.addEventType("tileloaded");this.grid=[];this._moveGriddedTiles=OpenLayers.Function.bind(this.moveGriddedTiles,this)},removeMap:function(){if(this.timerId!=null){window.clearTimeout(this.timerId);
this.timerId=null}},destroy:function(){this.clearGrid();this.tileSize=this.grid=null;OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this,arguments)},clearGrid:function(){if(this.grid){for(var a=0,b=this.grid.length;a<b;a++)for(var c=this.grid[a],d=0,f=c.length;d<f;d++){var h=c[d];this.removeTileMonitoringHooks(h);h.destroy()}this.grid=[]}},clone:function(a){if(a==null)a=new OpenLayers.Layer.Grid(this.name,this.url,this.params,this.getOptions());a=OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this,
[a]);if(this.tileSize!=null)a.tileSize=this.tileSize.clone();a.grid=[];return a},moveTo:function(a,b,c){OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this,arguments);a=a||this.map.getExtent();if(a!=null){var d=!this.grid.length||b,f=this.getTilesBounds();if(this.singleTile){if(d||!c&&!f.containsBounds(a))this.initSingleTile(a)}else d||!f.containsBounds(a,true)?this.initGriddedTiles(a):this.scheduleMoveGriddedTiles()}},moveByPx:function(){this.scheduleMoveGriddedTiles()},scheduleMoveGriddedTiles:function(){this.timerId!=
null&&window.clearTimeout(this.timerId);this.timerId=window.setTimeout(this._moveGriddedTiles,this.tileLoadingDelay)},setTileSize:function(a){if(this.singleTile){a=this.map.getSize();a.h=parseInt(a.h*this.ratio);a.w=parseInt(a.w*this.ratio)}OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this,[a])},getGridBounds:function(){OpenLayers.Console.warn("The getGridBounds() function is deprecated. It will be removed in 3.0. Please use getTilesBounds() instead.");return this.getTilesBounds()},getTilesBounds:function(){var a=
null;if(this.grid.length){a=this.grid[this.grid.length-1][0];var b=this.grid[0][this.grid[0].length-1];a=new OpenLayers.Bounds(a.bounds.left,a.bounds.bottom,b.bounds.right,b.bounds.top)}return a},initSingleTile:function(a){var b=a.getCenterLonLat(),c=a.getWidth()*this.ratio;a=a.getHeight()*this.ratio;b=new OpenLayers.Bounds(b.lon-c/2,b.lat-a/2,b.lon+c/2,b.lat+a/2);c=this.map.getLayerPxFromLonLat(new OpenLayers.LonLat(b.left,b.top));this.grid.length||(this.grid[0]=[]);if(a=this.grid[0][0])a.moveTo(b,
c);else{a=this.addTile(b,c);this.addTileMonitoringHooks(a);a.draw();this.grid[0][0]=a}this.removeExcessTiles(1,1)},calculateGridLayout:function(a,b,c){var d=c*this.tileSize.w;c=c*this.tileSize.h;var f=a.left-b.lon,h=Math.floor(f/d)-this.buffer;a=a.top-(b.lat+c);var k=Math.ceil(a/c)+this.buffer;return{tilelon:d,tilelat:c,tileoffsetlon:b.lon+h*d,tileoffsetlat:b.lat+k*c,tileoffsetx:-(f/d-h)*this.tileSize.w,tileoffsety:-(k-a/c)*this.tileSize.h}},getTileOrigin:function(){var a=this.tileOrigin;if(!a){a=
this.getMaxExtent();var b={tl:["left","top"],tr:["right","top"],bl:["left","bottom"],br:["right","bottom"]}[this.tileOriginCorner];a=new OpenLayers.LonLat(a[b[0]],a[b[1]])}return a},initGriddedTiles:function(a){var b=this.map.getSize(),c=Math.ceil(b.h/this.tileSize.h)+Math.max(1,2*this.buffer);b=Math.ceil(b.w/this.tileSize.w)+Math.max(1,2*this.buffer);var d=this.getTileOrigin(),f=this.map.getResolution(),h=this.calculateGridLayout(a,d,f);d=Math.round(h.tileoffsetx);f=Math.round(h.tileoffsety);var k=
h.tileoffsetlon,o=h.tileoffsetlat,n=h.tilelon;h=h.tilelat;this.origin=new OpenLayers.Pixel(d,f);var s=d,t=k,D=0,w=parseInt(this.map.layerContainerDiv.style.left),G=parseInt(this.map.layerContainerDiv.style.top);do{var L=this.grid[D++];if(!L){L=[];this.grid.push(L)}k=t;d=s;var O=0;do{var U=new OpenLayers.Bounds(k,o,k+n,o+h),S=d;S-=w;var V=f;V-=G;S=new OpenLayers.Pixel(S,V);if(V=L[O++])V.moveTo(U,S,false);else{V=this.addTile(U,S);this.addTileMonitoringHooks(V);L.push(V)}k+=n;d+=this.tileSize.w}while(k<=
a.right+n*this.buffer||O<b);o-=h;f+=this.tileSize.h}while(o>=a.bottom-h*this.buffer||D<c);this.removeExcessTiles(D,O);this.spiralTileLoad()},getMaxExtent:function(){return this.maxExtent},spiralTileLoad:function(){for(var a=[],b=["right","down","left","up"],c=0,d=-1,f=OpenLayers.Util.indexOf(b,"right"),h=0;h<b.length;){var k=c,o=d;switch(b[f]){case "right":o++;break;case "down":k++;break;case "left":o--;break;case "up":k--}var n=null;if(k<this.grid.length&&k>=0&&o<this.grid[0].length&&o>=0)n=this.grid[k][o];
if(n!=null&&!n.queued){a.unshift(n);n.queued=true;h=0;c=k;d=o}else{f=(f+1)%4;h++}}b=0;for(c=a.length;b<c;b++){n=a[b];n.draw();n.queued=false}},addTile:function(a,b){return new OpenLayers.Tile.Image(this,b,a,null,this.tileSize,this.tileOptions)},addTileMonitoringHooks:function(a){a.onLoadStart=function(){this.numLoadingTiles==0&&this.events.triggerEvent("loadstart");this.numLoadingTiles++};a.events.register("loadstart",this,a.onLoadStart);a.onLoadEnd=function(){this.numLoadingTiles--;this.events.triggerEvent("tileloaded");
this.numLoadingTiles==0&&this.events.triggerEvent("loadend")};a.events.register("loadend",this,a.onLoadEnd);a.events.register("unload",this,a.onLoadEnd)},removeTileMonitoringHooks:function(a){a.unload();a.events.un({loadstart:a.onLoadStart,loadend:a.onLoadEnd,unload:a.onLoadEnd,scope:this})},moveGriddedTiles:function(){var a=true,b=this.buffer||1,c=this.grid[0][0].position,d=parseInt(this.map.layerContainerDiv.style.left),f=parseInt(this.map.layerContainerDiv.style.top);c=c.add(d,f);if(c.x>-this.tileSize.w*
(b-1))this.shiftColumn(true);else if(c.x<-this.tileSize.w*b)this.shiftColumn(false);else if(c.y>-this.tileSize.h*(b-1))this.shiftRow(true);else if(c.y<-this.tileSize.h*b)this.shiftRow(false);else a=false;if(a)this.timerId=window.setTimeout(this._moveGriddedTiles,0)},shiftRow:function(a){var b=this.grid,c=b[a?0:this.grid.length-1],d=this.map.getResolution(),f=a?-this.tileSize.h:this.tileSize.h;d=d*-f;for(var h=a?b.pop():b.shift(),k=0,o=c.length;k<o;k++){var n=c[k],s=n.bounds.clone();n=n.position.clone();
s.bottom+=d;s.top+=d;n.y+=f;h[k].moveTo(s,n)}a?b.unshift(h):b.push(h)},shiftColumn:function(a){for(var b=a?-this.tileSize.w:this.tileSize.w,c=this.map.getResolution()*b,d=0,f=this.grid.length;d<f;d++){var h=this.grid[d],k=h[a?0:h.length-1],o=k.bounds.clone();k=k.position.clone();o.left+=c;o.right+=c;k.x+=b;var n=a?this.grid[d].pop():this.grid[d].shift();n.moveTo(o,k);a?h.unshift(n):h.push(n)}},removeExcessTiles:function(a,b){for(;this.grid.length>a;)for(var c=this.grid.pop(),d=0,f=c.length;d<f;d++){var h=
c[d];this.removeTileMonitoringHooks(h);h.destroy()}for(;this.grid[0].length>b;){d=0;for(f=this.grid.length;d<f;d++){c=this.grid[d];h=c.pop();this.removeTileMonitoringHooks(h);h.destroy()}}},onMapResize:function(){if(this.singleTile){this.clearGrid();this.setTileSize()}},getTileBounds:function(a){var b=this.maxExtent,c=this.getResolution(),d=c*this.tileSize.w;c=c*this.tileSize.h;var f=this.getLonLatFromViewPortPx(a);a=b.left+d*Math.floor((f.lon-b.left)/d);b=b.bottom+c*Math.floor((f.lat-b.bottom)/c);
return new OpenLayers.Bounds(a,b,a+d,b+c)},CLASS_NAME:"OpenLayers.Layer.Grid"});
OpenLayers.Handler=OpenLayers.Class({id:null,control:null,map:null,keyMask:null,active:false,evt:null,initialize:function(a,b,c){OpenLayers.Util.extend(this,c);this.control=a;this.callbacks=b;(a=this.map||a.map)&&this.setMap(a);this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},setMap:function(a){this.map=a},checkModifiers:function(a){if(this.keyMask==null)return true;return((a.shiftKey?OpenLayers.Handler.MOD_SHIFT:0)|(a.ctrlKey?OpenLayers.Handler.MOD_CTRL:0)|(a.altKey?OpenLayers.Handler.MOD_ALT:
0))==this.keyMask},activate:function(){if(this.active)return false;for(var a=OpenLayers.Events.prototype.BROWSER_EVENTS,b=0,c=a.length;b<c;b++)this[a[b]]&&this.register(a[b],this[a[b]]);return this.active=true},deactivate:function(){if(!this.active)return false;for(var a=OpenLayers.Events.prototype.BROWSER_EVENTS,b=0,c=a.length;b<c;b++)this[a[b]]&&this.unregister(a[b],this[a[b]]);this.active=false;return true},callback:function(a,b){a&&this.callbacks[a]&&this.callbacks[a].apply(this.control,b)},register:function(a,
b){this.map.events.registerPriority(a,this,b);this.map.events.registerPriority(a,this,this.setEvent)},unregister:function(a,b){this.map.events.unregister(a,this,b);this.map.events.unregister(a,this,this.setEvent)},setEvent:function(a){this.evt=a;return true},destroy:function(){this.deactivate();this.control=this.map=null},CLASS_NAME:"OpenLayers.Handler"});OpenLayers.Handler.MOD_NONE=0;OpenLayers.Handler.MOD_SHIFT=1;OpenLayers.Handler.MOD_CTRL=2;OpenLayers.Handler.MOD_ALT=4;
OpenLayers.Handler.Click=OpenLayers.Class(OpenLayers.Handler,{delay:300,single:true,"double":false,pixelTolerance:0,dblclickTolerance:13,stopSingle:false,stopDouble:false,timerId:null,touch:false,down:null,last:null,first:null,rightclickTimerId:null,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments)},touchstart:function(a){if(!this.touch){this.unregisterMouseListeners();this.touch=true}this.down=this.getEventInfo(a);this.last=this.getEventInfo(a);return true},touchmove:function(a){this.last=
this.getEventInfo(a);return true},touchend:function(a){if(this.down){a.xy=this.last.xy;a.lastTouches=this.last.touches;this.handleSingle(a);this.down=null}return true},unregisterMouseListeners:function(){this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,click:this.click,dblclick:this.dblclick,scope:this})},mousedown:function(a){this.down=this.getEventInfo(a);this.last=this.getEventInfo(a);return true},mouseup:function(a){var b=true;if(this.checkModifiers(a)&&this.control.handleRightClicks&&
OpenLayers.Event.isRightClick(a))b=this.rightclick(a);return b},rightclick:function(a){if(this.passesTolerance(a))if(this.rightclickTimerId!=null){this.clearTimer();this.callback("dblrightclick",[a]);return!this.stopDouble}else{a=this["double"]?OpenLayers.Util.extend({},a):this.callback("rightclick",[a]);a=OpenLayers.Function.bind(this.delayedRightCall,this,a);this.rightclickTimerId=window.setTimeout(a,this.delay)}return!this.stopSingle},delayedRightCall:function(a){this.rightclickTimerId=null;a&&
this.callback("rightclick",[a])},click:function(a){if(!this.last)this.last=this.getEventInfo(a);this.handleSingle(a);return!this.stopSingle},dblclick:function(a){this.handleDouble(a);return!this.stopDouble},handleDouble:function(a){this["double"]&&this.passesDblclickTolerance(a)&&this.callback("dblclick",[a])},handleSingle:function(a){if(this.passesTolerance(a))if(this.timerId!=null){if(this.last.touches&&this.last.touches.length===1){this["double"]&&OpenLayers.Event.stop(a);this.handleDouble(a)}if(!this.last.touches||
this.last.touches.length!==2)this.clearTimer()}else{this.first=this.getEventInfo(a);this.queuePotentialClick(this.single?OpenLayers.Util.extend({},a):null)}},queuePotentialClick:function(a){this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,a),this.delay)},passesTolerance:function(a){var b=true;if(this.pixelTolerance!=null&&this.down&&this.down.xy)if((b=this.pixelTolerance>=this.down.xy.distanceTo(a.xy))&&this.touch&&this.down.touches.length===this.last.touches.length){a=
0;for(var c=this.down.touches.length;a<c;++a)if(this.getTouchDistance(this.down.touches[a],this.last.touches[a])>this.pixelTolerance){b=false;break}}return b},getTouchDistance:function(a,b){return Math.sqrt(Math.pow(a.clientX-b.clientX,2)+Math.pow(a.clientY-b.clientY,2))},passesDblclickTolerance:function(){var a=true;if(this.down&&this.first)a=this.down.xy.distanceTo(this.first.xy)<=this.dblclickTolerance;return a},clearTimer:function(){if(this.timerId!=null){window.clearTimeout(this.timerId);this.timerId=
null}if(this.rightclickTimerId!=null){window.clearTimeout(this.rightclickTimerId);this.rightclickTimerId=null}},delayedCall:function(a){this.timerId=null;a&&this.callback("click",[a])},getEventInfo:function(a){var b;if(a.touches){var c=a.touches.length;b=Array(c);for(var d,f=0;f<c;f++){d=a.touches[f];b[f]={clientX:d.clientX,clientY:d.clientY}}}return{xy:a.xy,touches:b}},deactivate:function(){var a=false;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){this.clearTimer();this.last=
this.first=this.down=null;this.touch=false;a=true}return a},CLASS_NAME:"OpenLayers.Handler.Click"});
OpenLayers.Format.JSON=OpenLayers.Class(OpenLayers.Format,{indent:"    ",space:" ",newline:"\n",level:0,pretty:false,nativeJSON:function(){return!!(window.JSON&&typeof JSON.parse=="function"&&typeof JSON.stringify=="function")}(),read:function(a,b){var c;if(this.nativeJSON)c=JSON.parse(a,b);else try{if(/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){c=eval("("+a+")");if(typeof b===
"function"){var d=function(h,k){if(k&&typeof k==="object")for(var o in k)if(k.hasOwnProperty(o))k[o]=d(o,k[o]);return b(h,k)};c=d("",c)}}}catch(f){}if(this.keepData)this.data=c;return c},write:function(a,b){this.pretty=!!b;var c=null,d=typeof a;if(this.serialize[d])try{c=!this.pretty&&this.nativeJSON?JSON.stringify(a):this.serialize[d].apply(this,[a])}catch(f){OpenLayers.Console.error("Trouble serializing: "+f)}return c},writeIndent:function(){var a=[];if(this.pretty)for(var b=0;b<this.level;++b)a.push(this.indent);
return a.join("")},writeNewline:function(){return this.pretty?this.newline:""},writeSpace:function(){return this.pretty?this.space:""},serialize:{object:function(a){if(a==null)return"null";if(a.constructor==Date)return this.serialize.date.apply(this,[a]);if(a.constructor==Array)return this.serialize.array.apply(this,[a]);var b=["{"];this.level+=1;var c,d,f,h=false;for(c in a)if(a.hasOwnProperty(c)){d=OpenLayers.Format.JSON.prototype.write.apply(this,[c,this.pretty]);f=OpenLayers.Format.JSON.prototype.write.apply(this,
[a[c],this.pretty]);if(d!=null&&f!=null){h&&b.push(",");b.push(this.writeNewline(),this.writeIndent(),d,":",this.writeSpace(),f);h=true}}this.level-=1;b.push(this.writeNewline(),this.writeIndent(),"}");return b.join("")},array:function(a){var b,c=["["];this.level+=1;for(var d=0,f=a.length;d<f;++d){b=OpenLayers.Format.JSON.prototype.write.apply(this,[a[d],this.pretty]);if(b!=null){d>0&&c.push(",");c.push(this.writeNewline(),this.writeIndent(),b)}}this.level-=1;c.push(this.writeNewline(),this.writeIndent(),
"]");return c.join("")},string:function(a){var b={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};if(/["\\\x00-\x1f]/.test(a))return'"'+a.replace(/([\x00-\x1f\\"])/g,function(c,d){var f=b[d];if(f)return f;f=d.charCodeAt();return"\\u00"+Math.floor(f/16).toString(16)+(f%16).toString(16)})+'"';return'"'+a+'"'},number:function(a){return isFinite(a)?String(a):"null"},"boolean":function(a){return String(a)},date:function(a){function b(c){return c<10?"0"+c:c}return'"'+
a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())+"T"+b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())+'"'}},CLASS_NAME:"OpenLayers.Format.JSON"});
OpenLayers.Kinetic=OpenLayers.Class({threshold:0,interval:10,deceleration:0.0035,nbPoints:100,delay:200,points:undefined,timerId:undefined,initialize:function(a){OpenLayers.Util.extend(this,a)},begin:function(){clearInterval(this.timerId);this.timerId=undefined;this.points=[]},update:function(a){this.points.unshift({xy:a,tick:(new Date).getTime()});this.points.length>this.nbPoints&&this.points.pop()},end:function(a){for(var b,c=(new Date).getTime(),d=0,f=this.points.length,h;d<f;d++){h=this.points[d];
if(c-h.tick>this.delay)break;b=h}if(b){d=(new Date).getTime()-b.tick;c=Math.sqrt(Math.pow(a.x-b.xy.x,2)+Math.pow(a.y-b.xy.y,2));d=c/d;if(!(d==0||d<this.threshold)){c=Math.asin((a.y-b.xy.y)/c);if(b.xy.x<=a.x)c=Math.PI-c;return{speed:d,theta:c}}}},move:function(a,b){var c=a.speed,d=Math.cos(a.theta),f=-Math.sin(a.theta),h=0,k=(new Date).getTime(),o=0,n=0;this.timerId=window.setInterval(OpenLayers.Function.bind(function(){if(this.timerId!=null){h+=this.interval;var s=(new Date).getTime()-k;s=(h+s)/2;
var t=-this.deceleration*Math.pow(s,2)/2+c*s,D=t*d;t=t*f;var w={};w.end=false;if(-this.deceleration*s+c<=0){clearInterval(this.timerId);this.timerId=null;w.end=true}w.x=D-o;w.y=t-n;o=D;n=t;b(w.x,w.y,w.end)}},this),this.interval)},CLASS_NAME:"OpenLayers.Kinetic"});
OpenLayers.Control=OpenLayers.Class({id:null,map:null,div:null,type:null,allowSelection:false,displayClass:"",title:"",autoActivate:false,active:null,handler:null,eventListeners:null,events:null,EVENT_TYPES:["activate","deactivate"],initialize:function(a){this.displayClass=this.CLASS_NAME.replace("OpenLayers.","ol").replace(/\./g,"");OpenLayers.Util.extend(this,a);this.events=new OpenLayers.Events(this,null,this.EVENT_TYPES);this.eventListeners instanceof Object&&this.events.on(this.eventListeners);
if(this.id==null)this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){if(this.events){this.eventListeners&&this.events.un(this.eventListeners);this.events.destroy();this.events=null}this.eventListeners=null;if(this.handler){this.handler.destroy();this.handler=null}if(this.handlers){for(var a in this.handlers)this.handlers.hasOwnProperty(a)&&typeof this.handlers[a].destroy=="function"&&this.handlers[a].destroy();this.handlers=null}if(this.map){this.map.removeControl(this);
this.map=null}this.div=null},setMap:function(a){this.map=a;this.handler&&this.handler.setMap(a)},draw:function(a){if(this.div==null){this.div=OpenLayers.Util.createDiv(this.id);this.div.className=this.displayClass;if(!this.allowSelection){this.div.className+=" olControlNoSelect";this.div.setAttribute("unselectable","on",0);this.div.onselectstart=OpenLayers.Function.False}if(this.title!="")this.div.title=this.title}if(a!=null)this.position=a.clone();this.moveTo(this.position);return this.div},moveTo:function(a){if(a!=
null&&this.div!=null){this.div.style.left=a.x+"px";this.div.style.top=a.y+"px"}},activate:function(){if(this.active)return false;this.handler&&this.handler.activate();this.active=true;this.map&&OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active");this.events.triggerEvent("activate");return true},deactivate:function(){if(this.active){this.handler&&this.handler.deactivate();this.active=false;this.map&&OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,
"")+"Active");this.events.triggerEvent("deactivate");return true}return false},CLASS_NAME:"OpenLayers.Control"});OpenLayers.Control.TYPE_BUTTON=1;OpenLayers.Control.TYPE_TOGGLE=2;OpenLayers.Control.TYPE_TOOL=3;
OpenLayers.Handler.Feature=OpenLayers.Class(OpenLayers.Handler,{EVENTMAP:{click:{"in":"click",out:"clickout"},mousemove:{"in":"over",out:"out"},dblclick:{"in":"dblclick",out:null},mousedown:{"in":null,out:null},mouseup:{"in":null,out:null},touchstart:{"in":"click",out:"clickout"}},feature:null,lastFeature:null,down:null,up:null,touch:false,clickTolerance:4,geometryTypes:null,stopClick:true,stopDown:true,stopUp:false,initialize:function(a,b,c,d){OpenLayers.Handler.prototype.initialize.apply(this,[a,
c,d]);this.layer=b},touchstart:function(a){if(!this.touch){this.touch=true;this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,mousemove:this.mousemove,click:this.click,dblclick:this.dblclick,scope:this})}return OpenLayers.Event.isMultiTouch(a)?true:this.mousedown(a)},touchmove:function(a){OpenLayers.Event.stop(a)},mousedown:function(a){this.down=a.xy;return this.handle(a)?!this.stopDown:true},mouseup:function(a){this.up=a.xy;return this.handle(a)?!this.stopUp:true},click:function(a){return this.handle(a)?
!this.stopClick:true},mousemove:function(a){if(!this.callbacks.over&&!this.callbacks.out)return true;this.handle(a);return true},dblclick:function(a){return!this.handle(a)},geometryTypeMatches:function(a){return this.geometryTypes==null||OpenLayers.Util.indexOf(this.geometryTypes,a.geometry.CLASS_NAME)>-1},handle:function(a){if(this.feature&&!this.feature.layer)this.feature=null;var b=a.type,c=false,d=!!this.feature,f=b=="click"||b=="dblclick"||b=="touchstart";if((this.feature=this.layer.getFeatureFromEvent(a))&&
!this.feature.layer)this.feature=null;if(this.lastFeature&&!this.lastFeature.layer)this.lastFeature=null;if(this.feature){b==="touchstart"&&OpenLayers.Event.stop(a);a=this.feature!=this.lastFeature;if(this.geometryTypeMatches(this.feature)){if(d&&a){this.lastFeature&&this.triggerCallback(b,"out",[this.lastFeature]);this.triggerCallback(b,"in",[this.feature])}else if(!d||f)this.triggerCallback(b,"in",[this.feature]);this.lastFeature=this.feature;c=true}else{if(this.lastFeature&&(d&&a||f))this.triggerCallback(b,
"out",[this.lastFeature]);this.feature=null}}else if(this.lastFeature&&(d||f))this.triggerCallback(b,"out",[this.lastFeature]);return c},triggerCallback:function(a,b,c){if(b=this.EVENTMAP[a][b])if(a=="click"&&this.up&&this.down)Math.sqrt(Math.pow(this.up.x-this.down.x,2)+Math.pow(this.up.y-this.down.y,2))<=this.clickTolerance&&this.callback(b,c);else this.callback(b,c)},activate:function(){var a=false;if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.moveLayerToTop();this.map.events.on({removelayer:this.handleMapEvents,
changelayer:this.handleMapEvents,scope:this});a=true}return a},deactivate:function(){var a=false;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){this.moveLayerBack();this.up=this.down=this.lastFeature=this.feature=null;this.touch=false;this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this});a=true}return a},handleMapEvents:function(a){if(!a.property||a.property=="order")this.moveLayerToTop()},moveLayerToTop:function(){this.layer.setZIndex(Math.max(this.map.Z_INDEX_BASE.Feature-
1,this.layer.getZIndex())+1)},moveLayerBack:function(){var a=this.layer.getZIndex()-1;a>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(a):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Handler.Feature"});
OpenLayers.Renderer=OpenLayers.Class({container:null,root:null,extent:null,locked:false,size:null,resolution:null,map:null,initialize:function(a,b){this.container=OpenLayers.Util.getElement(a);OpenLayers.Util.extend(this,b)},destroy:function(){this.map=this.resolution=this.size=this.extent=this.container=null},supported:function(){return false},setExtent:function(a,b){this.extent=a.clone();if(b)this.resolution=null},setSize:function(a){this.size=a.clone();this.resolution=null},getResolution:function(){return this.resolution=
this.resolution||this.map.getResolution()},drawFeature:function(a,b){if(b==null)b=a.style;if(a.geometry){var c=a.geometry.getBounds();if(c){c.intersectsBounds(this.extent)||(b={display:"none"});c=this.drawGeometry(a.geometry,b,a.id);if(b.display!="none"&&b.label&&c!==false){var d=a.geometry.getCentroid();if(b.labelXOffset||b.labelYOffset){var f=isNaN(b.labelXOffset)?0:b.labelXOffset,h=isNaN(b.labelYOffset)?0:b.labelYOffset,k=this.getResolution();d.move(f*k,h*k)}this.drawText(a.id,b,d)}else this.removeText(a.id);
return c}}},drawGeometry:function(){},drawText:function(){},removeText:function(){},clear:function(){},getFeatureIdFromEvent:function(){},eraseFeatures:function(a){a instanceof Array||(a=[a]);for(var b=0,c=a.length;b<c;++b){var d=a[b];this.eraseGeometry(d.geometry,d.id);this.removeText(d.id)}},eraseGeometry:function(){},moveRoot:function(){},getRenderLayerId:function(){return this.container.id},applyDefaultSymbolizer:function(a){var b=OpenLayers.Util.extend({},OpenLayers.Renderer.defaultSymbolizer);
if(a.stroke===false){delete b.strokeWidth;delete b.strokeColor}a.fill===false&&delete b.fillColor;OpenLayers.Util.extend(b,a);return b},CLASS_NAME:"OpenLayers.Renderer"});OpenLayers.Renderer.defaultSymbolizer={fillColor:"#000000",strokeColor:"#000000",strokeWidth:2,fillOpacity:1,strokeOpacity:1,pointRadius:0};
OpenLayers.StyleMap=OpenLayers.Class({styles:null,extendDefault:true,initialize:function(a,b){this.styles={"default":new OpenLayers.Style(OpenLayers.Feature.Vector.style["default"]),select:new OpenLayers.Style(OpenLayers.Feature.Vector.style.select),temporary:new OpenLayers.Style(OpenLayers.Feature.Vector.style.temporary),"delete":new OpenLayers.Style(OpenLayers.Feature.Vector.style["delete"])};if(a instanceof OpenLayers.Style){this.styles["default"]=a;this.styles.select=a;this.styles.temporary=a;
this.styles["delete"]=a}else if(typeof a=="object")for(var c in a)if(a[c]instanceof OpenLayers.Style)this.styles[c]=a[c];else if(typeof a[c]=="object")this.styles[c]=new OpenLayers.Style(a[c]);else{this.styles["default"]=new OpenLayers.Style(a);this.styles.select=new OpenLayers.Style(a);this.styles.temporary=new OpenLayers.Style(a);this.styles["delete"]=new OpenLayers.Style(a);break}OpenLayers.Util.extend(this,b)},destroy:function(){for(var a in this.styles)this.styles[a].destroy();this.styles=null},
createSymbolizer:function(a,b){a||(a=new OpenLayers.Feature.Vector);this.styles[b]||(b="default");a.renderIntent=b;var c={};if(this.extendDefault&&b!="default")c=this.styles["default"].createSymbolizer(a);return OpenLayers.Util.extend(c,this.styles[b].createSymbolizer(a))},addUniqueValueRules:function(a,b,c,d){var f=[],h;for(h in c)f.push(new OpenLayers.Rule({symbolizer:c[h],context:d,filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,property:b,value:h})}));this.styles[a].addRules(f)},
CLASS_NAME:"OpenLayers.StyleMap"});
OpenLayers.Layer.Vector=OpenLayers.Class(OpenLayers.Layer,{EVENT_TYPES:["beforefeatureadded","beforefeaturesadded","featureadded","featuresadded","beforefeatureremoved","beforefeaturesremoved","featureremoved","featuresremoved","beforefeatureselected","featureselected","featureunselected","beforefeaturemodified","featuremodified","afterfeaturemodified","vertexmodified","vertexremoved","sketchstarted","sketchmodified","sketchcomplete","refresh"],isBaseLayer:false,isFixed:false,features:null,filter:null,
selectedFeatures:null,unrenderedFeatures:null,reportError:true,style:null,styleMap:null,strategies:null,protocol:null,renderers:["SVG","VML","Canvas"],renderer:null,rendererOptions:null,geometryType:null,drawn:false,initialize:function(){this.EVENT_TYPES=OpenLayers.Layer.Vector.prototype.EVENT_TYPES.concat(OpenLayers.Layer.prototype.EVENT_TYPES);OpenLayers.Layer.prototype.initialize.apply(this,arguments);if(!this.renderer||!this.renderer.supported())this.assignRenderer();if(!this.renderer||!this.renderer.supported()){this.renderer=
null;this.displayError()}if(!this.styleMap)this.styleMap=new OpenLayers.StyleMap;this.features=[];this.selectedFeatures=[];this.unrenderedFeatures={};if(this.strategies)for(var a=0,b=this.strategies.length;a<b;a++)this.strategies[a].setLayer(this)},destroy:function(){if(this.strategies){var a,b,c;b=0;for(c=this.strategies.length;b<c;b++){a=this.strategies[b];a.autoDestroy&&a.destroy()}this.strategies=null}if(this.protocol){this.protocol.autoDestroy&&this.protocol.destroy();this.protocol=null}this.destroyFeatures();
this.unrenderedFeatures=this.selectedFeatures=this.features=null;this.renderer&&this.renderer.destroy();this.drawn=this.geometryType=this.renderer=null;OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(a){if(a==null)a=new OpenLayers.Layer.Vector(this.name,this.getOptions());a=OpenLayers.Layer.prototype.clone.apply(this,[a]);for(var b=this.features,c=b.length,d=Array(c),f=0;f<c;++f)d[f]=b[f].clone();a.features=d;return a},refresh:function(a){this.calculateInRange()&&this.visibility&&
this.events.triggerEvent("refresh",a)},assignRenderer:function(){for(var a=0,b=this.renderers.length;a<b;a++){var c=this.renderers[a];if((c=typeof c=="function"?c:OpenLayers.Renderer[c])&&c.prototype.supported()){this.renderer=new c(this.div,this.rendererOptions);break}}},displayError:function(){this.reportError&&OpenLayers.Console.userError(OpenLayers.i18n("browserNotSupported",{renderers:this.renderers.join("\n")}))},setMap:function(){OpenLayers.Layer.prototype.setMap.apply(this,arguments);if(this.renderer){this.renderer.map=
this.map;this.renderer.setSize(this.map.getSize())}else this.map.removeLayer(this)},afterAdd:function(){if(this.strategies){var a,b,c;b=0;for(c=this.strategies.length;b<c;b++){a=this.strategies[b];a.autoActivate&&a.activate()}}},removeMap:function(){this.drawn=false;if(this.strategies){var a,b,c;b=0;for(c=this.strategies.length;b<c;b++){a=this.strategies[b];a.autoActivate&&a.deactivate()}}},onMapResize:function(){OpenLayers.Layer.prototype.onMapResize.apply(this,arguments);this.renderer.setSize(this.map.getSize())},
moveTo:function(a,b,c){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var d=OpenLayers.Renderer.NG&&this.renderer instanceof OpenLayers.Renderer.NG;if(d)b&&this.renderer.updateDimensions();else{var f=true;if(!c){this.renderer.root.style.visibility="hidden";this.div.style.left=-parseInt(this.map.layerContainerDiv.style.left)+"px";this.div.style.top=-parseInt(this.map.layerContainerDiv.style.top)+"px";f=this.renderer.setExtent(this.map.getExtent(),b);this.renderer.root.style.visibility="visible";
if(OpenLayers.IS_GECKO===true)this.div.scrollLeft=this.div.scrollLeft;if(!b&&f)for(var h in this.unrenderedFeatures){var k=this.unrenderedFeatures[h];this.drawFeature(k)}}}if(!this.drawn||!d&&(b||!f)){this.drawn=true;h=0;for(d=this.features.length;h<d;h++){this.renderer.locked=h!==d-1;k=this.features[h];this.drawFeature(k)}}},redraw:function(){if(OpenLayers.Renderer.NG&&this.renderer instanceof OpenLayers.Renderer.NG)this.drawn=false;return OpenLayers.Layer.prototype.redraw.apply(this,arguments)},
display:function(){OpenLayers.Layer.prototype.display.apply(this,arguments);var a=this.div.style.display;if(a!=this.renderer.root.style.display)this.renderer.root.style.display=a},addFeatures:function(a,b){a instanceof Array||(a=[a]);var c=!b||!b.silent;if(c){var d={features:a};if(this.events.triggerEvent("beforefeaturesadded",d)===false)return;a=d.features}d=[];for(var f=0,h=a.length;f<h;f++){this.renderer.locked=f!=a.length-1?true:false;var k=a[f];if(this.geometryType&&!(k.geometry instanceof this.geometryType))throw OpenLayers.i18n("componentShouldBe",
{geomType:this.geometryType.prototype.CLASS_NAME});k.layer=this;if(!k.style&&this.style)k.style=OpenLayers.Util.extend({},this.style);if(c){if(this.events.triggerEvent("beforefeatureadded",{feature:k})===false)continue;this.preFeatureInsert(k)}d.push(k);this.features.push(k);this.drawFeature(k);if(c){this.events.triggerEvent("featureadded",{feature:k});this.onFeatureInsert(k)}}c&&this.events.triggerEvent("featuresadded",{features:d})},removeFeatures:function(a,b){if(!(!a||a.length===0)){if(a===this.features)return this.removeAllFeatures(b);
a instanceof Array||(a=[a]);if(a===this.selectedFeatures)a=a.slice();var c=!b||!b.silent;c&&this.events.triggerEvent("beforefeaturesremoved",{features:a});for(var d=a.length-1;d>=0;d--){this.renderer.locked=d!=0&&a[d-1].geometry?true:false;var f=a[d];delete this.unrenderedFeatures[f.id];c&&this.events.triggerEvent("beforefeatureremoved",{feature:f});this.features=OpenLayers.Util.removeItem(this.features,f);f.layer=null;f.geometry&&this.renderer.eraseFeatures(f);OpenLayers.Util.indexOf(this.selectedFeatures,
f)!=-1&&OpenLayers.Util.removeItem(this.selectedFeatures,f);c&&this.events.triggerEvent("featureremoved",{feature:f})}c&&this.events.triggerEvent("featuresremoved",{features:a})}},removeAllFeatures:function(a){a=!a||!a.silent;var b=this.features;a&&this.events.triggerEvent("beforefeaturesremoved",{features:b});for(var c,d=b.length-1;d>=0;d--){c=b[d];a&&this.events.triggerEvent("beforefeatureremoved",{feature:c});c.layer=null;a&&this.events.triggerEvent("featureremoved",{feature:c})}this.renderer.clear();
this.features=[];this.unrenderedFeatures={};this.selectedFeatures=[];a&&this.events.triggerEvent("featuresremoved",{features:b})},destroyFeatures:function(a,b){if(a==undefined)a=this.features;if(a){this.removeFeatures(a,b);for(var c=a.length-1;c>=0;c--)a[c].destroy()}},drawFeature:function(a,b){if(this.drawn){if(typeof b!="object"){if(!b&&a.state===OpenLayers.State.DELETE)b="delete";var c=b||a.renderIntent;(b=a.style||this.style)||(b=this.styleMap.createSymbolizer(a,c))}c=this.renderer.drawFeature(a,
b);if(c===false||c===null)this.unrenderedFeatures[a.id]=a;else delete this.unrenderedFeatures[a.id]}},eraseFeatures:function(a){this.renderer.eraseFeatures(a)},getFeatureFromEvent:function(a){if(!this.renderer){OpenLayers.Console.error(OpenLayers.i18n("getFeatureError"));return null}var b=null;if(a=this.renderer.getFeatureIdFromEvent(a))b=typeof a==="string"?this.getFeatureById(a):a;return b},getFeatureBy:function(a,b){for(var c=null,d=0,f=this.features.length;d<f;++d)if(this.features[d][a]==b){c=
this.features[d];break}return c},getFeatureById:function(a){return this.getFeatureBy("id",a)},getFeatureByFid:function(a){return this.getFeatureBy("fid",a)},getFeaturesByAttribute:function(a,b){var c,d,f=this.features.length,h=[];for(c=0;c<f;c++)(d=this.features[c])&&d.attributes&&d.attributes[a]===b&&h.push(d);return h},onFeatureInsert:function(){},preFeatureInsert:function(){},getDataExtent:function(){var a=null,b=this.features;if(b&&b.length>0){a=new OpenLayers.Bounds;for(var c=null,d=0,f=b.length;d<
f;d++)(c=b[d].geometry)&&a.extend(c.getBounds())}return a},CLASS_NAME:"OpenLayers.Layer.Vector"});
OpenLayers.Layer.Vector.RootContainer=OpenLayers.Class(OpenLayers.Layer.Vector,{displayInLayerSwitcher:false,layers:null,initialize:function(){OpenLayers.Layer.Vector.prototype.initialize.apply(this,arguments)},display:function(){},getFeatureFromEvent:function(a){for(var b=this.layers,c,d=0;d<b.length;d++)if(c=b[d].getFeatureFromEvent(a))return c},setMap:function(a){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments);this.collectRoots();a.events.register("changelayer",this,this.handleChangeLayer)},
removeMap:function(a){a.events.unregister("changelayer",this,this.handleChangeLayer);this.resetRoots();OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},collectRoots:function(){for(var a,b=0;b<this.map.layers.length;++b){a=this.map.layers[b];OpenLayers.Util.indexOf(this.layers,a)!=-1&&a.renderer.moveRoot(this.renderer)}},resetRoots:function(){for(var a,b=0;b<this.layers.length;++b){a=this.layers[b];this.renderer&&a.renderer.getRenderLayerId()==this.id&&this.renderer.moveRoot(a.renderer)}},
handleChangeLayer:function(a){var b=a.layer;if(a.property=="order"&&OpenLayers.Util.indexOf(this.layers,b)!=-1){this.resetRoots();this.collectRoots()}},CLASS_NAME:"OpenLayers.Layer.Vector.RootContainer"});
OpenLayers.Handler.Drag=OpenLayers.Class(OpenLayers.Handler,{started:false,stopDown:true,dragging:false,touch:false,last:null,start:null,lastMoveEvt:null,oldOnselectstart:null,interval:0,timeoutId:null,documentDrag:false,documentEvents:null,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments);if(this.documentDrag===true){var a=this;this._docMove=function(b){a.mousemove({xy:{x:b.clientX,y:b.clientY},element:document})};this._docUp=function(b){a.mouseup({xy:{x:b.clientX,
y:b.clientY}})}}},dragstart:function(a){var b=true;this.dragging=false;if(this.checkModifiers(a)&&(OpenLayers.Event.isLeftClick(a)||OpenLayers.Event.isSingleTouch(a))){this.started=true;this.last=this.start=a.xy;OpenLayers.Element.addClass(this.map.viewPortDiv,"olDragDown");this.down(a);this.callback("down",[a.xy]);OpenLayers.Event.stop(a);if(!this.oldOnselectstart)this.oldOnselectstart=document.onselectstart?document.onselectstart:OpenLayers.Function.True;document.onselectstart=OpenLayers.Function.False;
b=!this.stopDown}else{this.started=false;this.last=this.start=null}return b},dragmove:function(a){this.lastMoveEvt=a;if(this.started&&!this.timeoutId&&(a.xy.x!=this.last.x||a.xy.y!=this.last.y)){if(this.documentDrag===true&&this.documentEvents)if(a.element===document){this.adjustXY(a);this.setEvent(a)}else this.removeDocumentEvents();if(this.interval>0)this.timeoutId=setTimeout(OpenLayers.Function.bind(this.removeTimeout,this),this.interval);this.dragging=true;this.move(a);this.callback("move",[a.xy]);
if(!this.oldOnselectstart){this.oldOnselectstart=document.onselectstart;document.onselectstart=OpenLayers.Function.False}this.last=a.xy}return true},dragend:function(a){if(this.started){if(this.documentDrag===true&&this.documentEvents){this.adjustXY(a);this.removeDocumentEvents()}var b=this.start!=this.last;this.dragging=this.started=false;OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown");this.up(a);this.callback("up",[a.xy]);b&&this.callback("done",[a.xy]);document.onselectstart=
this.oldOnselectstart}return true},down:function(){},move:function(){},up:function(){},out:function(){},mousedown:function(a){return this.dragstart(a)},touchstart:function(a){if(!this.touch){this.touch=true;this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,mousemove:this.mousemove,click:this.click,scope:this})}return this.dragstart(a)},mousemove:function(a){return this.dragmove(a)},touchmove:function(a){return this.dragmove(a)},removeTimeout:function(){this.timeoutId=null;this.dragging&&
this.mousemove(this.lastMoveEvt)},mouseup:function(a){return this.dragend(a)},touchend:function(a){a.xy=this.last;return this.dragend(a)},mouseout:function(a){if(this.started&&OpenLayers.Util.mouseLeft(a,this.map.eventsDiv))if(this.documentDrag===true)this.addDocumentEvents();else{var b=this.start!=this.last;this.dragging=this.started=false;OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown");this.out(a);this.callback("out",[]);b&&this.callback("done",[a.xy]);if(document.onselectstart)document.onselectstart=
this.oldOnselectstart}return true},click:function(){return this.start==this.last},activate:function(){var a=false;if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.dragging=false;a=true}return a},deactivate:function(){var a=false;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){this.dragging=this.started=this.touch=false;this.last=this.start=null;a=true;OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown")}return a},adjustXY:function(a){var b=OpenLayers.Util.pagePosition(this.map.viewPortDiv);
a.xy.x-=b[0];a.xy.y-=b[1]},addDocumentEvents:function(){OpenLayers.Element.addClass(document.body,"olDragDown");this.documentEvents=true;OpenLayers.Event.observe(document,"mousemove",this._docMove);OpenLayers.Event.observe(document,"mouseup",this._docUp)},removeDocumentEvents:function(){OpenLayers.Element.removeClass(document.body,"olDragDown");this.documentEvents=false;OpenLayers.Event.stopObserving(document,"mousemove",this._docMove);OpenLayers.Event.stopObserving(document,"mouseup",this._docUp)},
CLASS_NAME:"OpenLayers.Handler.Drag"});
OpenLayers.Control.DragPan=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,panned:false,interval:25,documentDrag:false,kinetic:null,enableKinetic:false,kineticInterval:10,draw:function(){if(this.enableKinetic){var a={interval:this.kineticInterval};if(typeof this.enableKinetic==="object")a=OpenLayers.Util.extend(a,this.enableKinetic);this.kinetic=new OpenLayers.Kinetic(a)}this.handler=new OpenLayers.Handler.Drag(this,{move:this.panMap,done:this.panMapDone,down:this.panMapStart},
{interval:this.interval,documentDrag:this.documentDrag})},panMapStart:function(){this.kinetic&&this.kinetic.begin()},panMap:function(a){this.kinetic&&this.kinetic.update(a);this.panned=true;this.map.pan(this.handler.last.x-a.x,this.handler.last.y-a.y,{dragging:true,animate:false})},panMapDone:function(a){if(this.panned){var b=null;if(this.kinetic)b=this.kinetic.end(a);this.map.pan(this.handler.last.x-a.x,this.handler.last.y-a.y,{dragging:!!b,animate:false});if(b){var c=this;this.kinetic.move(b,function(d,
f,h){c.map.pan(d,f,{dragging:!h,animate:false})})}this.panned=false}},CLASS_NAME:"OpenLayers.Control.DragPan"});
OpenLayers.Handler.Pinch=OpenLayers.Class(OpenLayers.Handler,{started:false,stopDown:false,pinching:false,last:null,start:null,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments)},touchstart:function(a){var b=true;this.pinching=false;if(OpenLayers.Event.isMultiTouch(a)){this.started=true;this.last=this.start={distance:this.getDistance(a.touches),delta:0,scale:1};this.callback("start",[a,this.start]);b=!this.stopDown}else{this.started=false;this.last=this.start=null}OpenLayers.Event.stop(a);
return b},touchmove:function(a){if(this.started&&OpenLayers.Event.isMultiTouch(a)){this.pinching=true;var b=this.getPinchData(a);this.callback("move",[a,b]);this.last=b;OpenLayers.Event.stop(a)}return true},touchend:function(a){if(this.started){this.pinching=this.started=false;this.callback("done",[a,this.start,this.last]);this.last=this.start=null}return true},activate:function(){var a=false;if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.pinching=false;a=true}return a},deactivate:function(){var a=
false;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){this.pinching=this.started=false;this.last=this.start=null;a=true}return a},getDistance:function(a){var b=a[0];a=a[1];return Math.sqrt(Math.pow(b.clientX-a.clientX,2)+Math.pow(b.clientY-a.clientY,2))},getPinchData:function(a){a=this.getDistance(a.touches);return{distance:a,delta:this.last.distance-a,scale:a/this.start.distance}},CLASS_NAME:"OpenLayers.Handler.Pinch"});
OpenLayers.Control.PinchZoom=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,containerOrigin:null,pinchOrigin:null,currentCenter:null,autoActivate:true,initialize:function(){OpenLayers.Control.prototype.initialize.apply(this,arguments);this.handler=new OpenLayers.Handler.Pinch(this,{start:this.pinchStart,move:this.pinchMove,done:this.pinchDone},this.handlerOptions)},activate:function(){var a=OpenLayers.Control.prototype.activate.apply(this,arguments);if(a){this.map.events.on({moveend:this.updateContainerOrigin,
scope:this});this.updateContainerOrigin()}return a},deactivate:function(){var a=OpenLayers.Control.prototype.deactivate.apply(this,arguments);this.map&&this.map.events&&this.map.events.un({moveend:this.updateContainerOrigin,scope:this});return a},updateContainerOrigin:function(){var a=this.map.layerContainerDiv;this.containerOrigin={x:parseInt(a.style.left,10),y:parseInt(a.style.top,10)}},pinchStart:function(a){this.currentCenter=this.pinchOrigin=a.xy},pinchMove:function(a,b){var c=b.scale,d=this.containerOrigin,
f=this.pinchOrigin,h=a.xy;this.applyTransform("translate("+Math.round(h.x-f.x+(c-1)*(d.x-f.x))+"px, "+Math.round(h.y-f.y+(c-1)*(d.y-f.y))+"px) scale("+c+")");this.currentCenter=h},applyTransform:function(a){var b=this.map.layerContainerDiv.style;b["-webkit-transform"]=a;b["-moz-transform"]=a},pinchDone:function(a,b,c){this.applyTransform("");a=this.map.getZoomForResolution(this.map.getResolution()/c.scale,true);if(a!==this.map.getZoom()||!this.currentCenter.equals(this.pinchOrigin)){b=this.map.getResolutionForZoom(a);
c=this.map.getLonLatFromPixel(this.pinchOrigin);var d=this.currentCenter,f=this.map.getSize();c.lon+=b*(f.w/2-d.x);c.lat-=b*(f.h/2-d.y);this.map.setCenter(c,a)}},CLASS_NAME:"OpenLayers.Control.PinchZoom"});
OpenLayers.Control.TouchNavigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,clickHandlerOptions:null,documentDrag:false,autoActivate:true,initialize:function(){this.handlers={};OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate();this.dragPan&&this.dragPan.destroy();this.dragPan=null;if(this.pinchZoom){this.pinchZoom.destroy();delete this.pinchZoom}OpenLayers.Control.prototype.destroy.apply(this,
arguments)},activate:function(){if(OpenLayers.Control.prototype.activate.apply(this,arguments)){this.dragPan.activate();this.handlers.click.activate();this.pinchZoom.activate();return true}return false},deactivate:function(){if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){this.dragPan.deactivate();this.handlers.click.deactivate();this.pinchZoom.deactivate();return true}return false},draw:function(){var a={click:this.defaultClick,dblclick:this.defaultDblClick},b=OpenLayers.Util.extend({"double":true,
stopDouble:true,pixelTolerance:2},this.clickHandlerOptions);this.handlers.click=new OpenLayers.Handler.Click(this,a,b);this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions));this.dragPan.draw();this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions))},defaultClick:function(a){a.lastTouches&&a.lastTouches.length==2&&this.map.zoomOut()},defaultDblClick:function(a){this.map.setCenter(this.map.getLonLatFromViewPortPx(a.xy),
this.map.zoom+1)},CLASS_NAME:"OpenLayers.Control.TouchNavigation"});
OpenLayers.Tile=OpenLayers.Class({EVENT_TYPES:["loadstart","loadend","reload","unload"],events:null,id:null,layer:null,url:null,bounds:null,size:null,position:null,isLoading:false,initialize:function(a,b,c,d,f,h){this.layer=a;this.position=b.clone();this.bounds=c.clone();this.url=d;this.size=f.clone();this.id=OpenLayers.Util.createUniqueID("Tile_");this.events=new OpenLayers.Events(this,null,this.EVENT_TYPES);OpenLayers.Util.extend(this,h)},unload:function(){if(this.isLoading){this.isLoading=false;
this.events.triggerEvent("unload")}},destroy:function(){this.position=this.size=this.bounds=this.layer=null;this.events.destroy();this.events=null},clone:function(a){if(a==null)a=new OpenLayers.Tile(this.layer,this.position,this.bounds,this.url,this.size);OpenLayers.Util.applyDefaults(a,this);return a},draw:function(){var a=this.layer.maxExtent;this.shouldDraw=a&&this.bounds.intersectsBounds(a,false)||this.layer.displayOutsideMaxExtent;this.clear();return this.shouldDraw},moveTo:function(a,b,c){if(c==
null)c=true;this.bounds=a.clone();this.position=b.clone();c&&this.draw()},clear:function(){},getBoundsFromBaseLayer:function(a){var b=OpenLayers.i18n("reprojectDeprecated",{layerName:this.layer.name});OpenLayers.Console.warn(b);b=this.layer.map.getLonLatFromLayerPx(a);a=a.clone();a.x+=this.size.w;a.y+=this.size.h;a=this.layer.map.getLonLatFromLayerPx(a);if(b.lon>a.lon)if(b.lon<0)b.lon=-180-(b.lon+180);else a.lon=180+a.lon+180;return new OpenLayers.Bounds(b.lon,a.lat,a.lon,b.lat)},showTile:function(){this.shouldDraw&&
this.show()},show:function(){},hide:function(){},CLASS_NAME:"OpenLayers.Tile"});
OpenLayers.Tile.Image=OpenLayers.Class(OpenLayers.Tile,{url:null,imgDiv:null,frame:null,layerAlphaHack:null,isBackBuffer:false,isFirstDraw:true,backBufferTile:null,maxGetUrlLength:null,initialize:function(a,b,c,d){OpenLayers.Tile.prototype.initialize.apply(this,arguments);this.maxGetUrlLength!=null&&OpenLayers.Util.extend(this,OpenLayers.Tile.Image.IFrame);this.url=d;this.frame=document.createElement("div");this.frame.style.overflow="hidden";this.frame.style.position="absolute";this.layerAlphaHack=
this.layer.alpha&&OpenLayers.Util.alphaHack()},destroy:function(){this.imgDiv!=null&&this.removeImgDiv();this.imgDiv=null;this.frame!=null&&this.frame.parentNode==this.layer.div&&this.layer.div.removeChild(this.frame);this.frame=null;if(this.backBufferTile){this.backBufferTile.destroy();this.backBufferTile=null}this.layer.events.unregister("loadend",this,this.resetBackBuffer);OpenLayers.Tile.prototype.destroy.apply(this,arguments)},clone:function(a){if(a==null)a=new OpenLayers.Tile.Image(this.layer,
this.position,this.bounds,this.url,this.size);a=OpenLayers.Tile.prototype.clone.apply(this,[a]);a.imgDiv=null;return a},draw:function(){if(this.layer!=this.layer.map.baseLayer&&this.layer.reproject)this.bounds=this.getBoundsFromBaseLayer(this.position);var a=OpenLayers.Tile.prototype.draw.apply(this,arguments);if(OpenLayers.Util.indexOf(this.layer.SUPPORTED_TRANSITIONS,this.layer.transitionEffect)!=-1||this.layer.singleTile)if(a){if(!this.backBufferTile){this.backBufferTile=this.clone();this.backBufferTile.hide();
this.backBufferTile.isBackBuffer=true;this.events.register("loadend",this,this.resetBackBuffer);this.layer.events.register("loadend",this,this.resetBackBuffer)}this.startTransition()}else this.backBufferTile&&this.backBufferTile.clear();else if(a&&this.isFirstDraw){this.events.register("loadend",this,this.showTile);this.isFirstDraw=false}if(!a)return false;if(this.isLoading)this.events.triggerEvent("reload");else{this.isLoading=true;this.events.triggerEvent("loadstart")}return this.renderTile()},
resetBackBuffer:function(){this.showTile();if(this.backBufferTile&&(this.isFirstDraw||!this.layer.numLoadingTiles)){this.isFirstDraw=false;var a=this.layer.maxExtent;if(a&&this.bounds.intersectsBounds(a,false)){this.backBufferTile.position=this.position;this.backBufferTile.bounds=this.bounds;this.backBufferTile.size=this.size;this.backBufferTile.imageSize=this.layer.getImageSize(this.bounds)||this.size;this.backBufferTile.imageOffset=this.layer.imageOffset;this.backBufferTile.resolution=this.layer.getResolution();
this.backBufferTile.renderTile()}this.backBufferTile.hide()}},renderTile:function(){if(this.layer.async){this.initImgDiv();this.layer.getURLasync(this.bounds,this,"url",this.positionImage)}else{this.url=this.layer.getURL(this.bounds);this.initImgDiv();this.positionImage()}return true},positionImage:function(){if(this.layer!==null){OpenLayers.Util.modifyDOMElement(this.frame,null,this.position,this.size);var a=this.layer.getImageSize(this.bounds);if(this.layerAlphaHack)OpenLayers.Util.modifyAlphaImageDiv(this.imgDiv,
null,null,a,this.url);else{OpenLayers.Util.modifyDOMElement(this.imgDiv,null,null,a);this.imgDiv.src=this.url}}},clear:function(){if(this.imgDiv){this.hide();if(OpenLayers.Tile.Image.useBlankTile)this.imgDiv.src=OpenLayers.Util.getImagesLocation()+"blank.gif"}},initImgDiv:function(){if(this.imgDiv==null){var a=this.layer.imageOffset,b=this.layer.getImageSize(this.bounds);this.imgDiv=this.layerAlphaHack?OpenLayers.Util.createAlphaImageDiv(null,a,b,null,"relative",null,null,null,true):OpenLayers.Util.createImage(null,
a,b,null,"relative",null,null,true);if(this.layer.url instanceof Array)this.imgDiv.urls=this.layer.url.slice();this.imgDiv.className="olTileImage";this.frame.style.zIndex=this.isBackBuffer?0:1;this.frame.appendChild(this.imgDiv);this.layer.div.appendChild(this.frame);this.layer.opacity!=null&&OpenLayers.Util.modifyDOMElement(this.imgDiv,null,null,null,null,null,null,this.layer.opacity);this.imgDiv.map=this.layer.map;var c=function(){if(this.isLoading){this.isLoading=false;this.events.triggerEvent("loadend")}};
this.layerAlphaHack?OpenLayers.Event.observe(this.imgDiv.childNodes[0],"load",OpenLayers.Function.bind(c,this)):OpenLayers.Event.observe(this.imgDiv,"load",OpenLayers.Function.bind(c,this));OpenLayers.Event.observe(this.imgDiv,"error",OpenLayers.Function.bind(function(){this.imgDiv._attempts>OpenLayers.IMAGE_RELOAD_ATTEMPTS&&c.call(this)},this))}this.imgDiv.viewRequestID=this.layer.map.viewRequestID},removeImgDiv:function(){OpenLayers.Event.stopObservingElement(this.imgDiv);if(this.imgDiv.parentNode==
this.frame){this.frame.removeChild(this.imgDiv);this.imgDiv.map=null}this.imgDiv.urls=null;var a=this.imgDiv.firstChild;if(a){OpenLayers.Event.stopObservingElement(a);this.imgDiv.removeChild(a);delete a}else this.imgDiv.src=OpenLayers.Util.getImagesLocation()+"blank.gif"},checkImgURL:function(){if(this.layer)OpenLayers.Util.isEquivalentUrl(this.layerAlphaHack?this.imgDiv.firstChild.src:this.imgDiv.src,this.url)||this.hide()},startTransition:function(){if(this.backBufferTile&&this.backBufferTile.imgDiv){var a=
1;if(this.backBufferTile.resolution)a=this.backBufferTile.resolution/this.layer.getResolution();if(a!=1){if(this.layer.transitionEffect=="resize"){var b=new OpenLayers.LonLat(this.backBufferTile.bounds.left,this.backBufferTile.bounds.top),c=new OpenLayers.Size(this.backBufferTile.size.w*a,this.backBufferTile.size.h*a);b=this.layer.map.getLayerPxFromLonLat(b);OpenLayers.Util.modifyDOMElement(this.backBufferTile.frame,null,b,c);c=this.backBufferTile.imageSize;c=new OpenLayers.Size(c.w*a,c.h*a);if(b=
this.backBufferTile.imageOffset)b=new OpenLayers.Pixel(b.x*a,b.y*a);OpenLayers.Util.modifyDOMElement(this.backBufferTile.imgDiv,null,b,c);this.backBufferTile.show()}}else this.layer.singleTile?this.backBufferTile.show():this.backBufferTile.hide()}},show:function(){this.frame.style.display="";if(OpenLayers.Util.indexOf(this.layer.SUPPORTED_TRANSITIONS,this.layer.transitionEffect)!=-1)if(OpenLayers.IS_GECKO===true)this.frame.scrollLeft=this.frame.scrollLeft},hide:function(){this.frame.style.display=
"none"},CLASS_NAME:"OpenLayers.Tile.Image"});OpenLayers.Tile.Image.useBlankTile=OpenLayers.BROWSER_NAME=="safari"||OpenLayers.BROWSER_NAME=="opera";
OpenLayers.Layer.WMS=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"},reproject:false,isBaseLayer:true,encodeBBOX:false,noMagic:false,yx:{"EPSG:4326":true},initialize:function(a,b,c,d){var f=[];c=OpenLayers.Util.upperCaseObject(c);if(parseFloat(c.VERSION)>=1.3&&!c.EXCEPTIONS)c.EXCEPTIONS="INIMAGE";f.push(a,b,c,d);OpenLayers.Layer.Grid.prototype.initialize.apply(this,f);OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS));
if(!this.noMagic&&this.params.TRANSPARENT&&this.params.TRANSPARENT.toString().toLowerCase()=="true"){if(d==null||!d.isBaseLayer)this.isBaseLayer=false;if(this.params.FORMAT=="image/jpeg")this.params.FORMAT=OpenLayers.Util.alphaHack()?"image/gif":"image/png"}},destroy:function(){OpenLayers.Layer.Grid.prototype.destroy.apply(this,arguments)},clone:function(a){if(a==null)a=new OpenLayers.Layer.WMS(this.name,this.url,this.params,this.getOptions());return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,
[a])},reverseAxisOrder:function(){return parseFloat(this.params.VERSION)>=1.3&&!!this.yx[this.map.getProjectionObject().getCode()]},getURL:function(a){a=this.adjustBounds(a);var b=this.getImageSize(),c={},d=this.reverseAxisOrder();c.BBOX=this.encodeBBOX?a.toBBOX(null,d):a.toArray(d);c.WIDTH=b.w;c.HEIGHT=b.h;return this.getFullRequestString(c)},mergeNewParams:function(a){a=[OpenLayers.Util.upperCaseObject(a)];return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,a)},getFullRequestString:function(){var a=
this.map.getProjectionObject();a=this.projection&&this.projection.equals(a)?this.projection.getCode():a.getCode();a=a=="none"?null:a;if(parseFloat(this.params.VERSION)>=1.3)this.params.CRS=a;else this.params.SRS=a;return OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.WMS"});
OpenLayers.Layer.XYZ=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:true,sphericalMercator:false,zoomOffset:0,serverResolutions:null,initialize:function(a,b,c){if(c&&c.sphericalMercator||this.sphericalMercator)c=OpenLayers.Util.extend({maxExtent:new OpenLayers.Bounds(-2.003750834E7,-2.003750834E7,2.003750834E7,2.003750834E7),maxResolution:156543.03390625,numZoomLevels:19,units:"m",projection:"EPSG:900913"},c);b=b||this.url;a=a||this.name;OpenLayers.Layer.Grid.prototype.initialize.apply(this,
[a,b,{},c])},clone:function(a){if(a==null)a=new OpenLayers.Layer.XYZ(this.name,this.url,this.getOptions());return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){a=this.getXYZ(a);var b=this.url;if(b instanceof Array)b=this.selectUrl(""+a.x+a.y+a.z,b);return OpenLayers.String.format(b,a)},getXYZ:function(a){var b=this.map.getResolution(),c=Math.round((a.left-this.maxExtent.left)/(b*this.tileSize.w));a=Math.round((this.maxExtent.top-a.top)/(b*this.tileSize.h));b=this.serverResolutions!=
null?OpenLayers.Util.indexOf(this.serverResolutions,b):this.map.getZoom()+this.zoomOffset;var d=Math.pow(2,b);if(this.wrapDateLine)c=(c%d+d)%d;return{x:c,y:a,z:b}},setMap:function(){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments);if(!this.tileOrigin)this.tileOrigin=new OpenLayers.LonLat(this.maxExtent.left,this.maxExtent.bottom)},CLASS_NAME:"OpenLayers.Layer.XYZ"});
OpenLayers.Layer.OSM=OpenLayers.Class(OpenLayers.Layer.XYZ,{name:"OpenStreetMap",attribution:"Data CC-By-SA by <a href='http://openstreetmap.org/'>OpenStreetMap</a>",sphericalMercator:true,url:"http://tile.openstreetmap.org/${z}/${x}/${y}.png",clone:function(a){if(a==null)a=new OpenLayers.Layer.OSM(this.name,this.url,this.getOptions());return a=OpenLayers.Layer.XYZ.prototype.clone.apply(this,[a])},wrapDateLine:true,CLASS_NAME:"OpenLayers.Layer.OSM"});
OpenLayers.Control.Geolocate=OpenLayers.Class(OpenLayers.Control,{EVENT_TYPES:["locationupdated","locationfailed","locationuncapable"],geolocation:navigator.geolocation,bind:true,watch:false,geolocationOptions:null,initialize:function(a){this.EVENT_TYPES=OpenLayers.Control.Geolocate.prototype.EVENT_TYPES.concat(OpenLayers.Control.prototype.EVENT_TYPES);this.geolocationOptions={};OpenLayers.Control.prototype.initialize.apply(this,[a])},destroy:function(){this.deactivate();OpenLayers.Control.prototype.destroy.apply(this,
arguments)},activate:function(){if(!this.geolocation){this.events.triggerEvent("locationuncapable");return false}if(OpenLayers.Control.prototype.activate.apply(this,arguments)){if(this.watch)this.watchId=this.geolocation.watchPosition(OpenLayers.Function.bind(this.geolocate,this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions);else this.getCurrentLocation();return true}return false},deactivate:function(){this.active&&this.watchId!==null&&this.geolocation.clearWatch(this.watchId);
return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},geolocate:function(a){var b=(new OpenLayers.LonLat(a.coords.longitude,a.coords.latitude)).transform(new OpenLayers.Projection("EPSG:4326"),this.map.getProjectionObject());this.bind&&this.map.setCenter(b);this.events.triggerEvent("locationupdated",{position:a,point:new OpenLayers.Geometry.Point(b.lon,b.lat)})},getCurrentLocation:function(){if(!this.active||this.watch)return false;this.geolocation.getCurrentPosition(OpenLayers.Function.bind(this.geolocate,
this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions);return true},failure:function(a){this.events.triggerEvent("locationfailed",{error:a})},CLASS_NAME:"OpenLayers.Control.Geolocate"});
OpenLayers.Renderer.Canvas=OpenLayers.Class(OpenLayers.Renderer,{hitDetection:true,hitOverflow:0,canvas:null,features:null,pendingRedraw:false,initialize:function(){OpenLayers.Renderer.prototype.initialize.apply(this,arguments);this.root=document.createElement("canvas");this.container.appendChild(this.root);this.canvas=this.root.getContext("2d");this.features={};if(this.hitDetection){this.hitCanvas=document.createElement("canvas");this.hitContext=this.hitCanvas.getContext("2d")}},eraseGeometry:function(a,
b){this.eraseFeatures(this.features[b][0])},supported:function(){return!!document.createElement("canvas").getContext},setSize:function(a){this.size=a.clone();var b=this.root;b.style.width=a.w+"px";b.style.height=a.h+"px";b.width=a.w;b.height=a.h;this.resolution=null;if(this.hitDetection){b=this.hitCanvas;b.style.width=a.w+"px";b.style.height=a.h+"px";b.width=a.w;b.height=a.h}},drawFeature:function(a,b){var c;if(a.geometry){b=this.applyDefaultSymbolizer(b||a.style);if(c=b.display!=="none"&&a.geometry.getBounds().intersectsBounds(this.extent))this.features[a.id]=
[a,b];else delete this.features[a.id];this.pendingRedraw=true}if(this.pendingRedraw&&!this.locked){this.redraw();this.pendingRedraw=false}return c},drawGeometry:function(a,b,c){var d=a.CLASS_NAME;if(d=="OpenLayers.Geometry.Collection"||d=="OpenLayers.Geometry.MultiPoint"||d=="OpenLayers.Geometry.MultiLineString"||d=="OpenLayers.Geometry.MultiPolygon")for(d=0;d<a.components.length;d++)this.drawGeometry(a.components[d],b,c);else switch(a.CLASS_NAME){case "OpenLayers.Geometry.Point":this.drawPoint(a,
b,c);break;case "OpenLayers.Geometry.LineString":this.drawLineString(a,b,c);break;case "OpenLayers.Geometry.LinearRing":this.drawLinearRing(a,b,c);break;case "OpenLayers.Geometry.Polygon":this.drawPolygon(a,b,c)}},drawExternalGraphic:function(a,b,c){var d=new Image;if(b.graphicTitle)d.title=b.graphicTitle;var f=b.graphicWidth||b.graphicHeight,h=b.graphicHeight||b.graphicWidth;f=f?f:b.pointRadius*2;h=h?h:b.pointRadius*2;var k=b.graphicXOffset!=undefined?b.graphicXOffset:-(0.5*f),o=b.graphicYOffset!=
undefined?b.graphicYOffset:-(0.5*h),n=b.graphicOpacity||b.fillOpacity;d.onload=OpenLayers.Function.bind(function(){if(this.features[c]){var s=this.getLocalXY(a),t=s[0];s=s[1];if(!isNaN(t)&&!isNaN(s)){t=t+k;s=s+o;var D=this.canvas;D.globalAlpha=n;var w=OpenLayers.Renderer.Canvas.drawImageScaleFactor||(OpenLayers.Renderer.Canvas.drawImageScaleFactor=/android 2.1/.test(navigator.userAgent.toLowerCase())?320/window.screen.width:1);D.drawImage(d,t*w,s*w,f*w,h*w);if(this.hitDetection){this.setHitContextStyle("fill",
c);this.hitContext.fillRect(t,s,f,h)}}}},this);d.src=b.externalGraphic},setCanvasStyle:function(a,b){if(a==="fill"){this.canvas.globalAlpha=b.fillOpacity;this.canvas.fillStyle=b.fillColor}else if(a==="stroke"){this.canvas.globalAlpha=b.strokeOpacity;this.canvas.strokeStyle=b.strokeColor;this.canvas.lineWidth=b.strokeWidth}else{this.canvas.globalAlpha=0;this.canvas.lineWidth=1}},featureIdToHex:function(a){a=Number(a.split("_").pop())+1;if(a>=16777216){this.hitOverflow=a-16777215;a=a%16777216+1}a="000000"+
a.toString(16);var b=a.length;return a="#"+a.substring(b-6,b)},setHitContextStyle:function(a,b,c){b=this.featureIdToHex(b);if(a=="fill"){this.hitContext.globalAlpha=1;this.hitContext.fillStyle=b}else if(a=="stroke"){this.hitContext.globalAlpha=1;this.hitContext.strokeStyle=b;this.hitContext.lineWidth=c.strokeWidth+2}else{this.hitContext.globalAlpha=0;this.hitContext.lineWidth=1}},drawPoint:function(a,b,c){if(b.graphic!==false)if(b.externalGraphic)this.drawExternalGraphic(a,b,c);else{var d=this.getLocalXY(a);
a=d[0];d=d[1];if(!isNaN(a)&&!isNaN(d)){var f=Math.PI*2,h=b.pointRadius;if(b.fill!==false){this.setCanvasStyle("fill",b);this.canvas.beginPath();this.canvas.arc(a,d,h,0,f,true);this.canvas.fill();if(this.hitDetection){this.setHitContextStyle("fill",c,b);this.hitContext.beginPath();this.hitContext.arc(a,d,h,0,f,true);this.hitContext.fill()}}if(b.stroke!==false){this.setCanvasStyle("stroke",b);this.canvas.beginPath();this.canvas.arc(a,d,h,0,f,true);this.canvas.stroke();if(this.hitDetection){this.setHitContextStyle("stroke",
c,b);this.hitContext.beginPath();this.hitContext.arc(a,d,h,0,f,true);this.hitContext.stroke()}this.setCanvasStyle("reset")}}}},drawLineString:function(a,b,c){b=OpenLayers.Util.applyDefaults({fill:false},b);this.drawLinearRing(a,b,c)},drawLinearRing:function(a,b,c){if(b.fill!==false){this.setCanvasStyle("fill",b);this.renderPath(this.canvas,a,b,c,"fill");if(this.hitDetection){this.setHitContextStyle("fill",c,b);this.renderPath(this.hitContext,a,b,c,"fill")}}if(b.stroke!==false){this.setCanvasStyle("stroke",
b);this.renderPath(this.canvas,a,b,c,"stroke");if(this.hitDetection){this.setHitContextStyle("stroke",c,b);this.renderPath(this.hitContext,a,b,c,"stroke")}}this.setCanvasStyle("reset")},renderPath:function(a,b,c,d,f){b=b.components;c=b.length;a.beginPath();d=this.getLocalXY(b[0]);var h=d[1];if(!isNaN(d[0])&&!isNaN(h)){a.moveTo(d[0],d[1]);for(d=1;d<c;++d){h=this.getLocalXY(b[d]);a.lineTo(h[0],h[1])}f==="fill"?a.fill():a.stroke()}},drawPolygon:function(a,b,c){a=a.components;var d=a.length;this.drawLinearRing(a[0],
b,c);for(var f=1;f<d;++f){this.canvas.globalCompositeOperation="destination-out";if(this.hitDetection)this.hitContext.globalCompositeOperation="destination-out";this.drawLinearRing(a[f],OpenLayers.Util.applyDefaults({stroke:false,fillOpacity:1},b),c);this.canvas.globalCompositeOperation="source-over";if(this.hitDetection)this.hitContext.globalCompositeOperation="source-over";this.drawLinearRing(a[f],OpenLayers.Util.applyDefaults({fill:false},b),c)}},drawText:function(a,b){b=OpenLayers.Util.extend({fontColor:"#000000",
labelAlign:"cm"},b);var c=this.getLocalXY(a);this.setCanvasStyle("reset");this.canvas.fillStyle=b.fontColor;this.canvas.globalAlpha=b.fontOpacity||1;var d=[b.fontStyle?b.fontStyle:"normal","normal",b.fontWeight?b.fontWeight:"normal",b.fontSize?b.fontSize:"1em",b.fontFamily?b.fontFamily:"sans-serif"].join(" "),f=b.label.split("\n"),h=f.length;if(this.canvas.fillText){this.canvas.font=d;this.canvas.textAlign=OpenLayers.Renderer.Canvas.LABEL_ALIGN[b.labelAlign[0]]||"center";this.canvas.textBaseline=
OpenLayers.Renderer.Canvas.LABEL_ALIGN[b.labelAlign[1]]||"middle";var k=OpenLayers.Renderer.Canvas.LABEL_FACTOR[b.labelAlign[1]];if(k==null)k=-0.5;d=this.canvas.measureText("Mg").height||this.canvas.measureText("xx").width;c[1]+=d*k*(h-1);for(k=0;k<h;k++)this.canvas.fillText(f[k],c[0],c[1]+d*k)}else if(this.canvas.mozDrawText){this.canvas.mozTextStyle=d;var o=OpenLayers.Renderer.Canvas.LABEL_FACTOR[b.labelAlign[0]];if(o==null)o=-0.5;k=OpenLayers.Renderer.Canvas.LABEL_FACTOR[b.labelAlign[1]];if(k==
null)k=-0.5;d=this.canvas.mozMeasureText("xx");c[1]+=d*(1+k*h);for(k=0;k<h;k++){var n=c[0]+o*this.canvas.mozMeasureText(f[k]),s=c[1]+k*d;this.canvas.translate(n,s);this.canvas.mozDrawText(f[k]);this.canvas.translate(-n,-s)}}this.setCanvasStyle("reset")},getLocalXY:function(a){var b=this.getResolution(),c=this.extent;return[a.x/b+-c.left/b,c.top/b-a.y/b]},clear:function(){var a=this.root.height,b=this.root.width;this.canvas.clearRect(0,0,b,a);this.features={};this.hitDetection&&this.hitContext.clearRect(0,
0,b,a)},getFeatureIdFromEvent:function(a){var b=null;if(this.hitDetection)if(!this.map.dragging){a=a.xy;a=this.hitContext.getImageData(a.x|0,a.y|0,1,1).data;if(a[3]===255)if(a=a[2]+256*(a[1]+256*a[0]))b=this.features["OpenLayers.Feature.Vector_"+(a-1+this.hitOverflow)][0]}return b},eraseFeatures:function(a){a instanceof Array||(a=[a]);for(var b=0;b<a.length;++b)delete this.features[a[b].id];this.redraw()},redraw:function(){if(!this.locked){var a=this.root.height,b=this.root.width;this.canvas.clearRect(0,
0,b,a);this.hitDetection&&this.hitContext.clearRect(0,0,b,a);a=[];var c,d;for(d in this.features)if(this.features.hasOwnProperty(d)){b=this.features[d][0];c=this.features[d][1];this.drawGeometry(b.geometry,c,b.id);c.label&&a.push([b,c])}b=0;for(c=a.length;b<c;++b){d=a[b];this.drawText(d[0].geometry.getCentroid(),d[1])}}},CLASS_NAME:"OpenLayers.Renderer.Canvas"});OpenLayers.Renderer.Canvas.LABEL_ALIGN={l:"left",r:"right",t:"top",b:"bottom"};OpenLayers.Renderer.Canvas.LABEL_FACTOR={l:0,r:-1,t:0,b:-1};
OpenLayers.Renderer.Canvas.drawImageScaleFactor=null;
OpenLayers.Geometry.MultiLineString=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LineString"],initialize:function(){OpenLayers.Geometry.Collection.prototype.initialize.apply(this,arguments)},split:function(a,b){for(var c=null,d=b&&b.mutual,f,h,k,o,n=[],s=[a],t=0,D=this.components.length;t<D;++t){h=this.components[t];k=false;for(var w=0;w<s.length;++w)if(f=h.split(s[w],b)){if(d){k=f[0];for(var G=0,L=k.length;G<L;++G)G===0&&n.length?n[n.length-1].addComponent(k[G]):
n.push(new OpenLayers.Geometry.MultiLineString([k[G]]));k=true;f=f[1]}if(f.length){f.unshift(w,1);Array.prototype.splice.apply(s,f);break}}if(!k)if(n.length)n[n.length-1].addComponent(h.clone());else n=[new OpenLayers.Geometry.MultiLineString(h.clone())]}if(n&&n.length>1)k=true;else n=[];if(s&&s.length>1)o=true;else s=[];if(k||o)c=d?[n,s]:s;return c},splitWith:function(a,b){var c=null,d=b&&b.mutual,f,h,k,o,n,s;if(a instanceof OpenLayers.Geometry.LineString){s=[];n=[a];for(var t=0,D=this.components.length;t<
D;++t){k=false;h=this.components[t];for(var w=0;w<n.length;++w)if(f=n[w].split(h,b)){if(d){k=f[0];if(k.length){k.unshift(w,1);Array.prototype.splice.apply(n,k);w+=k.length-2}f=f[1];if(f.length===0)f=[h.clone()]}k=0;for(var G=f.length;k<G;++k)k===0&&s.length?s[s.length-1].addComponent(f[k]):s.push(new OpenLayers.Geometry.MultiLineString([f[k]]));k=true}if(!k)if(s.length)s[s.length-1].addComponent(h.clone());else s=[new OpenLayers.Geometry.MultiLineString([h.clone()])]}}else c=a.split(this);if(n&&n.length>
1)o=true;else n=[];if(s&&s.length>1)k=true;else s=[];if(o||k)c=d?[n,s]:s;return c},CLASS_NAME:"OpenLayers.Geometry.MultiLineString"});OpenLayers.Geometry.MultiPolygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Polygon"],initialize:function(){OpenLayers.Geometry.Collection.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Geometry.MultiPolygon"});
OpenLayers.Format.GeoJSON=OpenLayers.Class(OpenLayers.Format.JSON,{ignoreExtraDims:false,read:function(a,b,c){b=b?b:"FeatureCollection";var d=null,f=null;if(f=typeof a=="string"?OpenLayers.Format.JSON.prototype.read.apply(this,[a,c]):a)if(typeof f.type!="string")OpenLayers.Console.error("Bad GeoJSON - no type: "+a);else{if(this.isValidType(f,b))switch(b){case "Geometry":try{d=this.parseGeometry(f)}catch(h){OpenLayers.Console.error(h)}break;case "Feature":try{d=this.parseFeature(f);d.type="Feature"}catch(k){OpenLayers.Console.error(k)}break;
case "FeatureCollection":d=[];switch(f.type){case "Feature":try{d.push(this.parseFeature(f))}catch(o){d=null;OpenLayers.Console.error(o)}break;case "FeatureCollection":a=0;for(b=f.features.length;a<b;++a)try{d.push(this.parseFeature(f.features[a]))}catch(n){d=null;OpenLayers.Console.error(n)}break;default:try{var s=this.parseGeometry(f);d.push(new OpenLayers.Feature.Vector(s))}catch(t){d=null;OpenLayers.Console.error(t)}}}}else OpenLayers.Console.error("Bad JSON: "+a);return d},isValidType:function(a,
b){var c=false;switch(b){case "Geometry":if(OpenLayers.Util.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],a.type)==-1)OpenLayers.Console.error("Unsupported geometry type: "+a.type);else c=true;break;case "FeatureCollection":c=true;break;default:if(a.type==b)c=true;else OpenLayers.Console.error("Cannot convert types from "+a.type+" to "+b)}return c},parseFeature:function(a){var b,c,d;c=a.properties?a.properties:{};d=a.geometry&&a.geometry.bbox||
a.bbox;try{b=this.parseGeometry(a.geometry)}catch(f){throw f;}b=new OpenLayers.Feature.Vector(b,c);if(d)b.bounds=OpenLayers.Bounds.fromArray(d);if(a.id)b.fid=a.id;return b},parseGeometry:function(a){if(a==null)return null;var b,c=false;if(a.type=="GeometryCollection"){if(!(a.geometries instanceof Array))throw"GeometryCollection must have geometries array: "+a;b=a.geometries.length;c=Array(b);for(var d=0;d<b;++d)c[d]=this.parseGeometry.apply(this,[a.geometries[d]]);b=new OpenLayers.Geometry.Collection(c);
c=true}else{if(!(a.coordinates instanceof Array))throw"Geometry must have coordinates array: "+a;if(!this.parseCoords[a.type.toLowerCase()])throw"Unsupported geometry type: "+a.type;try{b=this.parseCoords[a.type.toLowerCase()].apply(this,[a.coordinates])}catch(f){throw f;}}this.internalProjection&&this.externalProjection&&!c&&b.transform(this.externalProjection,this.internalProjection);return b},parseCoords:{point:function(a){if(this.ignoreExtraDims==false&&a.length!=2)throw"Only 2D points are supported: "+
a;return new OpenLayers.Geometry.Point(a[0],a[1])},multipoint:function(a){for(var b=[],c=null,d=0,f=a.length;d<f;++d){try{c=this.parseCoords.point.apply(this,[a[d]])}catch(h){throw h;}b.push(c)}return new OpenLayers.Geometry.MultiPoint(b)},linestring:function(a){for(var b=[],c=null,d=0,f=a.length;d<f;++d){try{c=this.parseCoords.point.apply(this,[a[d]])}catch(h){throw h;}b.push(c)}return new OpenLayers.Geometry.LineString(b)},multilinestring:function(a){for(var b=[],c=null,d=0,f=a.length;d<f;++d){try{c=
this.parseCoords.linestring.apply(this,[a[d]])}catch(h){throw h;}b.push(c)}return new OpenLayers.Geometry.MultiLineString(b)},polygon:function(a){for(var b=[],c,d,f=0,h=a.length;f<h;++f){try{d=this.parseCoords.linestring.apply(this,[a[f]])}catch(k){throw k;}c=new OpenLayers.Geometry.LinearRing(d.components);b.push(c)}return new OpenLayers.Geometry.Polygon(b)},multipolygon:function(a){for(var b=[],c=null,d=0,f=a.length;d<f;++d){try{c=this.parseCoords.polygon.apply(this,[a[d]])}catch(h){throw h;}b.push(c)}return new OpenLayers.Geometry.MultiPolygon(b)},
box:function(a){if(a.length!=2)throw"GeoJSON box coordinates must have 2 elements";return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(a[0][0],a[0][1]),new OpenLayers.Geometry.Point(a[1][0],a[0][1]),new OpenLayers.Geometry.Point(a[1][0],a[1][1]),new OpenLayers.Geometry.Point(a[0][0],a[1][1]),new OpenLayers.Geometry.Point(a[0][0],a[0][1])])])}},write:function(a,b){var c={type:null};if(a instanceof Array){c.type="FeatureCollection";var d=a.length;
c.features=Array(d);for(var f=0;f<d;++f){var h=a[f];if(!h instanceof OpenLayers.Feature.Vector)throw"FeatureCollection only supports collections of features: "+h;c.features[f]=this.extract.feature.apply(this,[h])}}else if(a.CLASS_NAME.indexOf("OpenLayers.Geometry")==0)c=this.extract.geometry.apply(this,[a]);else if(a instanceof OpenLayers.Feature.Vector){c=this.extract.feature.apply(this,[a]);if(a.layer&&a.layer.projection)c.crs=this.createCRSObject(a)}return OpenLayers.Format.JSON.prototype.write.apply(this,
[c,b])},createCRSObject:function(a){a=a.layer.projection.toString();var b={};if(a.match(/epsg:/i)){a=parseInt(a.substring(a.indexOf(":")+1));b=a==4326?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+a}}}return b},extract:{feature:function(a){var b=this.extract.geometry.apply(this,[a.geometry]);return{type:"Feature",id:a.fid==null?a.id:a.fid,properties:a.attributes,geometry:b}},geometry:function(a){if(a==null)return null;if(this.internalProjection&&
this.externalProjection){a=a.clone();a.transform(this.internalProjection,this.externalProjection)}var b=a.CLASS_NAME.split(".")[2];a=this.extract[b.toLowerCase()].apply(this,[a]);return b=="Collection"?{type:"GeometryCollection",geometries:a}:{type:b,coordinates:a}},point:function(a){return[a.x,a.y]},multipoint:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push(this.extract.point.apply(this,[a.components[c]]));return b},linestring:function(a){for(var b=[],c=0,d=a.components.length;c<
d;++c)b.push(this.extract.point.apply(this,[a.components[c]]));return b},multilinestring:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push(this.extract.linestring.apply(this,[a.components[c]]));return b},polygon:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push(this.extract.linestring.apply(this,[a.components[c]]));return b},multipolygon:function(a){for(var b=[],c=0,d=a.components.length;c<d;++c)b.push(this.extract.polygon.apply(this,[a.components[c]]));return b},collection:function(a){for(var b=
a.components.length,c=Array(b),d=0;d<b;++d)c[d]=this.extract.geometry.apply(this,[a.components[d]]);return c}},CLASS_NAME:"OpenLayers.Format.GeoJSON"});
OpenLayers.Layer.TileCache=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:true,format:"image/png",serverResolutions:null,initialize:function(a,b,c,d){this.layername=c;OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a,b,{},d]);this.extension=this.format.split("/")[1].toLowerCase();this.extension=this.extension=="jpg"?"jpeg":this.extension},clone:function(a){if(a==null)a=new OpenLayers.Layer.TileCache(this.name,this.url,this.layername,this.getOptions());return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,
[a])},getURL:function(a){function b(k,o){k=String(k);for(var n=[],s=0;s<o;++s)n.push("0");return n.join("").substring(0,o-k.length)+k}var c=this.map.getResolution(),d=this.maxExtent,f=this.tileSize,h=Math.round((a.left-d.left)/(c*f.w));a=Math.round((a.bottom-d.bottom)/(c*f.h));c=this.serverResolutions!=null?OpenLayers.Util.indexOf(this.serverResolutions,c):this.map.getZoom();h=[this.layername,b(c,2),b(parseInt(h/1E6),3),b(parseInt(h/1E3)%1E3,3),b(parseInt(h)%1E3,3),b(parseInt(a/1E6),3),b(parseInt(a/
1E3)%1E3,3),b(parseInt(a)%1E3,3)+"."+this.extension].join("/");c=this.url;if(c instanceof Array)c=this.selectUrl(h,c);c=c.charAt(c.length-1)=="/"?c:c+"/";return c+h},CLASS_NAME:"OpenLayers.Layer.TileCache"});
OpenLayers.Control.ArgParser=OpenLayers.Class(OpenLayers.Control,{center:null,zoom:null,layers:null,displayProjection:null,getParameters:function(a){a=a||window.location.href;var b=OpenLayers.Util.getParameters(a),c=a.indexOf("#");if(c>0){a="?"+a.substring(c+1,a.length);OpenLayers.Util.extend(b,OpenLayers.Util.getParameters(a))}return b},setMap:function(){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var a=0,b=this.map.controls.length;a<b;a++){var c=this.map.controls[a];if(c!=this&&
c.CLASS_NAME=="OpenLayers.Control.ArgParser"){if(c.displayProjection!=this.displayProjection)this.displayProjection=c.displayProjection;break}}if(a==this.map.controls.length){a=this.getParameters();if(a.layers){this.layers=a.layers;this.map.events.register("addlayer",this,this.configureLayers);this.configureLayers()}if(a.lat&&a.lon){this.center=new OpenLayers.LonLat(parseFloat(a.lon),parseFloat(a.lat));if(a.zoom)this.zoom=parseInt(a.zoom);this.map.events.register("changebaselayer",this,this.setCenter);
this.setCenter()}}},setCenter:function(){if(this.map.baseLayer){this.map.events.unregister("changebaselayer",this,this.setCenter);this.displayProjection&&this.center.transform(this.displayProjection,this.map.getProjectionObject());this.map.setCenter(this.center,this.zoom)}},configureLayers:function(){if(this.layers.length==this.map.layers.length){this.map.events.unregister("addlayer",this,this.configureLayers);for(var a=0,b=this.layers.length;a<b;a++){var c=this.map.layers[a],d=this.layers.charAt(a);
if(d=="B")this.map.setBaseLayer(c);else if(d=="T"||d=="F")c.setVisibility(d=="T")}}},CLASS_NAME:"OpenLayers.Control.ArgParser"});
OpenLayers.Control.Permalink=OpenLayers.Class(OpenLayers.Control,{argParserClass:OpenLayers.Control.ArgParser,element:null,anchor:false,base:"",displayProjection:null,initialize:function(a,b,c){if(a!==null&&typeof a=="object"&&!OpenLayers.Util.isElement(a)){c=a;this.base=document.location.href;OpenLayers.Control.prototype.initialize.apply(this,[c]);if(this.element!=null)this.element=OpenLayers.Util.getElement(this.element)}else{OpenLayers.Control.prototype.initialize.apply(this,[c]);this.element=
OpenLayers.Util.getElement(a);this.base=b||document.location.href}},destroy:function(){this.element.parentNode==this.div&&this.div.removeChild(this.element);this.element=null;this.map.events.unregister("moveend",this,this.updateLink);OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var a=0,b=this.map.controls.length;a<b;a++){var c=this.map.controls[a];if(c.CLASS_NAME==this.argParserClass.CLASS_NAME){if(c.displayProjection!=
this.displayProjection)this.displayProjection=c.displayProjection;break}}a==this.map.controls.length&&this.map.addControl(new this.argParserClass({displayProjection:this.displayProjection}))},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);if(!this.element&&!this.anchor){this.element=document.createElement("a");this.element.innerHTML=OpenLayers.i18n("permalink");this.element.href="";this.div.appendChild(this.element)}this.map.events.on({moveend:this.updateLink,changelayer:this.updateLink,
changebaselayer:this.updateLink,scope:this});this.updateLink();return this.div},updateLink:function(){var a=this.anchor?"#":"?",b=this.base;if(b.indexOf(a)!=-1)b=b.substring(0,b.indexOf(a));b+=a+OpenLayers.Util.getParameterString(this.createParams());if(this.anchor&&!this.element)window.location.href=b;else this.element.href=b},createParams:function(a,b,c){a=a||this.map.getCenter();var d=OpenLayers.Util.getParameters(this.base);if(a){d.zoom=b||this.map.getZoom();b=a.lat;a=a.lon;if(this.displayProjection){b=
OpenLayers.Projection.transform({x:a,y:b},this.map.getProjectionObject(),this.displayProjection);a=b.x;b=b.y}d.lat=Math.round(b*1E5)/1E5;d.lon=Math.round(a*1E5)/1E5;c=c||this.map.layers;d.layers="";a=0;for(b=c.length;a<b;a++){var f=c[a];d.layers+=f.isBaseLayer?f==this.map.baseLayer?"B":"0":f.getVisibility()?"T":"F"}}return d},CLASS_NAME:"OpenLayers.Control.Permalink"});
OpenLayers.Layer.SphericalMercator={getExtent:function(){var a=null;return a=this.sphericalMercator?this.map.calculateBounds():OpenLayers.Layer.FixedZoomLevels.prototype.getExtent.apply(this)},getLonLatFromViewPortPx:function(){return OpenLayers.Layer.prototype.getLonLatFromViewPortPx.apply(this,arguments)},getViewPortPxFromLonLat:function(){return OpenLayers.Layer.prototype.getViewPortPxFromLonLat.apply(this,arguments)},initMercatorParameters:function(){this.RESOLUTIONS=[];for(var a=0;a<=this.MAX_ZOOM_LEVEL;++a)this.RESOLUTIONS[a]=
156543.03390625/Math.pow(2,a);this.units="m";this.projection=this.projection||"EPSG:900913"},forwardMercator:function(a,b){var c=a*2.003750834E7/180,d=Math.log(Math.tan((90+b)*Math.PI/360))/(Math.PI/180);d=d*2.003750834E7/180;return new OpenLayers.LonLat(c,d)},inverseMercator:function(a,b){var c=a/2.003750834E7*180,d=b/2.003750834E7*180;d=180/Math.PI*(2*Math.atan(Math.exp(d*Math.PI/180))-Math.PI/2);return new OpenLayers.LonLat(c,d)},projectForward:function(a){var b=OpenLayers.Layer.SphericalMercator.forwardMercator(a.x,
a.y);a.x=b.lon;a.y=b.lat;return a},projectInverse:function(a){var b=OpenLayers.Layer.SphericalMercator.inverseMercator(a.x,a.y);a.x=b.lon;a.y=b.lat;return a}};(function(){var a=["EPSG:900913","EPSG:3857","EPSG:102113","EPSG:102100"],b=OpenLayers.Projection.addTransform,c=OpenLayers.Layer.SphericalMercator,d=OpenLayers.Projection.nullTransform,f,h,k,o,n;f=0;for(h=a.length;f<h;++f){k=a[f];b("EPSG:4326",k,c.projectForward);b(k,"EPSG:4326",c.projectInverse);for(n=f+1;n<h;++n){o=a[n];b(k,o,d);b(o,k,d)}}})();
OpenLayers.Control.SelectFeature=OpenLayers.Class(OpenLayers.Control,{EVENT_TYPES:["beforefeaturehighlighted","featurehighlighted","featureunhighlighted"],multipleKey:null,toggleKey:null,multiple:false,clickout:true,toggle:false,hover:false,highlightOnly:false,box:false,onBeforeSelect:function(){},onSelect:function(){},onUnselect:function(){},scope:null,geometryTypes:null,layer:null,layers:null,callbacks:null,selectStyle:null,renderIntent:"select",handlers:null,initialize:function(a,b){this.EVENT_TYPES=
OpenLayers.Control.SelectFeature.prototype.EVENT_TYPES.concat(OpenLayers.Control.prototype.EVENT_TYPES);OpenLayers.Control.prototype.initialize.apply(this,[b]);if(this.scope===null)this.scope=this;this.initLayer(a);var c={click:this.clickFeature,clickout:this.clickoutFeature};if(this.hover){c.over=this.overFeature;c.out=this.outFeature}this.callbacks=OpenLayers.Util.extend(c,this.callbacks);this.handlers={feature:new OpenLayers.Handler.Feature(this,this.layer,this.callbacks,{geometryTypes:this.geometryTypes})};
if(this.box)this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},{boxDivClassName:"olHandlerBoxSelectFeature"})},initLayer:function(a){if(a instanceof Array){this.layers=a;this.layer=new OpenLayers.Layer.Vector.RootContainer(this.id+"_container",{layers:a})}else this.layer=a},destroy:function(){this.active&&this.layers&&this.map.removeLayer(this.layer);OpenLayers.Control.prototype.destroy.apply(this,arguments);this.layers&&this.layer.destroy()},activate:function(){if(!this.active){this.layers&&
this.map.addLayer(this.layer);this.handlers.feature.activate();this.box&&this.handlers.box&&this.handlers.box.activate()}return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){if(this.active){this.handlers.feature.deactivate();this.handlers.box&&this.handlers.box.deactivate();this.layers&&this.map.removeLayer(this.layer)}return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},unselectAll:function(a){for(var b=this.layers||[this.layer],c,d,f=0;f<b.length;++f){c=
b[f];for(var h=c.selectedFeatures.length-1;h>=0;--h){d=c.selectedFeatures[h];if(!a||a.except!=d)this.unselect(d)}}},clickFeature:function(a){if(!this.hover)if(OpenLayers.Util.indexOf(a.layer.selectedFeatures,a)>-1)if(this.toggleSelect())this.unselect(a);else this.multipleSelect()||this.unselectAll({except:a});else{this.multipleSelect()||this.unselectAll({except:a});this.select(a)}},multipleSelect:function(){return this.multiple||this.handlers.feature.evt&&this.handlers.feature.evt[this.multipleKey]},
toggleSelect:function(){return this.toggle||this.handlers.feature.evt&&this.handlers.feature.evt[this.toggleKey]},clickoutFeature:function(){!this.hover&&this.clickout&&this.unselectAll()},overFeature:function(a){var b=a.layer;if(this.hover)if(this.highlightOnly)this.highlight(a);else OpenLayers.Util.indexOf(b.selectedFeatures,a)==-1&&this.select(a)},outFeature:function(a){if(this.hover)if(this.highlightOnly){if(a._lastHighlighter==this.id)if(a._prevHighlighter&&a._prevHighlighter!=this.id){delete a._lastHighlighter;
var b=this.map.getControl(a._prevHighlighter);b&&b.highlight(a)}else this.unhighlight(a)}else this.unselect(a)},highlight:function(a){var b=a.layer;if(this.events.triggerEvent("beforefeaturehighlighted",{feature:a})!==false){a._prevHighlighter=a._lastHighlighter;a._lastHighlighter=this.id;b.drawFeature(a,this.selectStyle||this.renderIntent);this.events.triggerEvent("featurehighlighted",{feature:a})}},unhighlight:function(a){var b=a.layer;if(a._prevHighlighter==undefined)delete a._lastHighlighter;
else{if(a._prevHighlighter!=this.id)a._lastHighlighter=a._prevHighlighter;delete a._prevHighlighter}b.drawFeature(a,a.style||a.layer.style||"default");this.events.triggerEvent("featureunhighlighted",{feature:a})},select:function(a){var b=this.onBeforeSelect.call(this.scope,a),c=a.layer;if(b!==false){b=c.events.triggerEvent("beforefeatureselected",{feature:a});if(b!==false){c.selectedFeatures.push(a);this.highlight(a);if(!this.handlers.feature.lastFeature)this.handlers.feature.lastFeature=c.selectedFeatures[0];
c.events.triggerEvent("featureselected",{feature:a});this.onSelect.call(this.scope,a)}}},unselect:function(a){var b=a.layer;this.unhighlight(a);OpenLayers.Util.removeItem(b.selectedFeatures,a);b.events.triggerEvent("featureunselected",{feature:a});this.onUnselect.call(this.scope,a)},selectBox:function(a){if(a instanceof OpenLayers.Bounds){var b=this.map.getLonLatFromPixel(new OpenLayers.Pixel(a.left,a.bottom));a=this.map.getLonLatFromPixel(new OpenLayers.Pixel(a.right,a.top));b=new OpenLayers.Bounds(b.lon,
b.lat,a.lon,a.lat);this.multipleSelect()||this.unselectAll();a=this.multiple;this.multiple=true;for(var c=this.layers||[this.layer],d,f=0;f<c.length;++f){d=c[f];for(var h=0,k=d.features.length;h<k;++h){var o=d.features[h];if(o.getVisibility())if(this.geometryTypes==null||OpenLayers.Util.indexOf(this.geometryTypes,o.geometry.CLASS_NAME)>-1)b.toGeometry().intersects(o.geometry)&&OpenLayers.Util.indexOf(d.selectedFeatures,o)==-1&&this.select(o)}}this.multiple=a}},setMap:function(a){this.handlers.feature.setMap(a);
this.box&&this.handlers.box.setMap(a);OpenLayers.Control.prototype.setMap.apply(this,arguments)},setLayer:function(a){var b=this.active;this.unselectAll();this.deactivate();if(this.layers){this.layer.destroy();this.layers=null}this.initLayer(a);this.handlers.feature.layer=this.layer;b&&this.activate()},CLASS_NAME:"OpenLayers.Control.SelectFeature"});app=window.app||{};
$(document).ready(function(){OpenLayers.Lang.setCode(app.lang);$.mobile.defaultTransition="flip";window.location.hash&&window.location.hash!="#mappage"&&$.mobile.changePage("mappage","flip");$(".toggle").hide();OpenLayers.Util.onImageLoadError=function(){this.style.display="none";this.src=app.blankImageURL};var a=new app.Map({div:"map",popup:"popup"}),b=app.map=a.map;new app.Search({form:"search_form",list:"search_results",alert:"search_alert",callback:a.addMarker});$("#plus .ui-btn-inner").unbind().click(function(c){b.zoomIn();c.stopPropagation();
c.preventDefault()});$("#minus .ui-btn-inner").unbind().click(function(c){b.zoomOut();c.stopPropagation();c.preventDefault()});new app.LayerSelector({layerselector:"layerselector",layergroup:"layergroup",floorselector:"floorselector",switchFloor:a.switchFloor,switchBaseLayer:a.switchBaseLayer});new app.POISelector({poiselector:"poiselector",mapManager:a});new app.ZoneSelector({list:"zones-list",mapManager:a});navigator.geolocation?$("#locate .ui-btn-inner").unbind().click(function(){a.toggleGeolocate()?
$(this).css("background","red"):$(this).css("background","inherit")}):$("#locate").hide()});app=window.app||{};
app.Map=function(a){var b=a.div;$("#"+a.popup);a=null;var c=["locaux_h","locaux_labels","batiments_routes_labels"];a=["-4","-3","-2","-1","0","1","2","3","4","5","6","7","8","all"];var d=new OpenLayers.Map({div:b,theme:null,projection:new OpenLayers.Projection("EPSG:900913"),numZoomLevels:23,maxResolution:156543.0339,maxExtent:new OpenLayers.Bounds(-2.00375083392E7,-2.00375083392E7,2.00375083392E7,2.00375083392E7),units:"m",controls:[new OpenLayers.Control.TouchNavigation({dragPanOptions:{interval:1,enableKinetic:true}})]});
b=new app.OSM({name:"plan",url:["http://plan-osm-tile0.epfl.ch/${z}/${x}/${y}.png","http://plan-osm-tile1.epfl.ch/${z}/${x}/${y}.png","http://plan-osm-tile2.epfl.ch/${z}/${x}/${y}.png"]});var f=new OpenLayers.Layer.TileCache("ortho","http://plan-demo.epfl.ch/tilecache","ortho-merc",{format:"image/jpeg",isBaseLayer:true,visibility:false,maxExtent:new OpenLayers.Bounds(-2.00375083427892E7,-2.00375083427892E7,2.00375083427892E7,2.00375083427892E7)}),h=new app.SwitchableTileCache("background",["http://plan-demo.epfl.ch/tilecache"],
"batiments",{format:"image/png",isBaseLayer:false,switches:a,postfix:"-merc",maxExtent:new OpenLayers.Bounds(-2.00375083427892E7,-2.00375083427892E7,2.00375083427892E7,2.00375083427892E7)});h.doSwitch("all");var k=Array.prototype.concat.call(["parkings_publics","arrets_metro","information"],c),o=new app.SwitchableWMS("pois","http://plan.epfl.ch/wms_themes",{layers:k,format:"image/png",transparent:"true",LOCALID:"-1"},{singleTile:true,visibility:true,notSwitchable:["batiments_routes_labels"],switches:a,
transitionEffect:"resize"});o.doSwitch("all");var n=new OpenLayers.Layer.Vector("vector");d.addLayers([b,f,h,o,n]);n.renderer.canvas.shadowOffsetX=0;n.renderer.canvas.shadowOffsetY=0;n.renderer.canvas.shadowBlur=3;n.renderer.canvas.shadowColor="rgba(255, 255, 255, 1)";var s=new OpenLayers.Control.Geolocate({id:"locate-control",geolocationOptions:{enableHighAccuracy:false,maximumAge:0,timeout:7E3},eventListeners:{locationupdated:function(t){n.destroyFeatures();n.addFeatures([new OpenLayers.Feature.Vector(t.point,
{},{graphicName:"cross",strokeColor:"#f00",strokeWidth:2,fillOpacity:0,pointRadius:10}),new OpenLayers.Feature.Vector(OpenLayers.Geometry.Polygon.createRegularPolygon(new OpenLayers.Geometry.Point(t.point.x,t.point.y),t.position.coords.accuracy/2,50,0),{},{fillOpacity:0.1,fillColor:"#000",strokeColor:"#f00",strokeOpacity:0.6})]);d.zoomToExtent(n.getDataExtent())},scope:this}});d.addControl(s);d.zoomToExtent(new OpenLayers.Bounds(729830.30059377,5863139.2779838,732878.22709622,5864882.9976914));this.map=
d;this.toggleGeolocate=function(){if(s.active){s.deactivate();n.destroyFeatures();return false}else{s.activate();return true}};this.switchBaseLayer=function(){for(var t=d.getLayersBy("isBaseLayer",true),D=0,w=t.length,G;D<w;D++){G=t[D];if(G!==d.baseLayer)break}d.setBaseLayer(G)};this.addMarker=function(t,D){var w=t.geometry.getCentroid();d.setCenter(new OpenLayers.LonLat(w.x,w.y),18);n.destroyFeatures();t.style={graphicWidth:21,graphicHeight:25,graphicYOffset:-28,externalGraphic:app.markerURL,label:D};
n.addFeatures([t])};this.mergePOILayers=function(t){t=Array.prototype.concat.call(t,c);o.mergeNewParams({layers:t})};this.switchFloor=function(t){h.doSwitch(t);o.doSwitch(t)}};app=window.app||{};
app.Search=function(a){var b=$("#"+a.form),c=$("#"+a.list),d=$("#"+a.alert),f=a.callback,h=$("#"+a.list+" a"),k=new OpenLayers.Format.GeoJSON;a=null;b.find("a[data-icon=delete]").click(function(n){n.preventDefault();n.stopPropagation();b.children(":not(.toggle)").show();b.children(".toggle").hide()});var o=function(n){var s=k.read(app.results[n])[0];$.ajax({url:app.infoURL,data:{lang:app.lang,layer:s.attributes.layer,id:s.attributes.id},dataType:"jsonp",jsonp:"cb",crossDomain:true,success:function(t){var D=
[];$(t.properties.content).find(".griddescr").each(function(){var w=$(this).text().replace(/\n/,"");w!==""&&D.push(w)});if(s.attributes.layer==="Batiments_epfl")t="";else{t=s.attributes.text;t+=D.length===0?"":" ("+D.join(", ")+")"}f(s,t);b.children(":not(.toggle)").hide();b.children(".toggle").show()}})};b.die("submit");b.live("submit",function(n){$("#keyword").blur();n.preventDefault();$.mobile.pageLoading();c.empty();d.empty();$.ajax({url:b.attr("action")+"?"+b.serialize(),dataType:"jsonp",jsonp:"cb",
success:function(s){app.results={};if(s.features.length===0)$("<div>"+OpenLayers.i18n("no_results")+"</div>").appendTo(d);else{var t={};$(s.features).each(function(D,w){t[w.properties.layer]||(t[w.properties.layer]=[]);t[w.properties.layer].push(w);app.results[w.id]=w});$.each(t,function(D,w){c.append($('<li data-role="list-divider">'+D+"</li>"));$(w).each(function(G,L){c.append($('<li><a href="#" id="f_'+L.id+'">'+L.properties.text+"</a></li>"))})});if(1===s.features.length)o(s.features[0].id);else{$.mobile.changePage("searchpage");
c.listview("refresh")}}$.mobile.pageLoading(true)}})});h.live("click",function(){$.mobile.changePage("mappage","flip");o($(this).attr("id").substr(2))})};app.OSM=OpenLayers.Class(OpenLayers.Layer.OSM,{initialize:function(a){a.numZoomLevels=23;OpenLayers.Layer.OSM.prototype.initialize.apply(this,[a.name,a.url,a]);this.attribution="Data CC-By-SA by OpenStreetMap"},getURL:function(){return this.map.getZoom()>18?app.blankImageURL:OpenLayers.Layer.OSM.prototype.getURL.apply(this,arguments)},CLASS_NAME:"app.OSM"});app.SwitchableTileCache=OpenLayers.Class(OpenLayers.Layer.TileCache,{switches:null,newSwitch:null,postfix:"",getURL:function(a){var b=this.layername;this.layername+=this.newSwitch+this.postfix;a=OpenLayers.Layer.TileCache.prototype.getURL.apply(this,[a]);this.layername=b;return a},doSwitch:function(a){if(a==9)a="all";this.newSwitch=a;return this.redraw()},CLASS_NAME:"app.SwitchableTileCache"});app.SwitchableWMS=OpenLayers.Class(OpenLayers.Layer.WMS,{switches:null,notSwitchable:null,newSwitch:null,initialize:function(){this.notSwitchable=[];OpenLayers.Layer.WMS.prototype.initialize.apply(this,arguments)},getFullRequestString:function(a,b){a.LAYERS=this.getSwitchedLayers();return OpenLayers.Layer.WMS.prototype.getFullRequestString.apply(this,[a,b])},arrayify:function(a){return a==""||a==null?[]:a instanceof Array?a:a.split(",")},getSwitchedLayers:function(){var a=this.arrayify(this.params.LAYERS),
b,c,d=a.length,f=Array(d);for(c=0;c<d;c++){b=a[c];f[c]=this.notSwitchable.indexOf(b)>-1?b:b+this.newSwitch}return f},doSwitch:function(a){if(a==9)a="all";this.newSwitch=a;return this.redraw()},CLASS_NAME:"app.SwitchableWMS"});app.POISelector=function(a){var b=$("#"+a.poiselector+" input[type='checkbox']");b.change(function(){var d=[];b.each(function(){this.checked&&d.push(this.name)});a.mapManager.mergePOILayers(d)});var c=function(d){var f=$(this).closest(".ui-checkbox");f.hasClass("expanded")?f.find(".ui-btn-text p").hide():f.find(".ui-btn-text p").show();f.toggleClass("expanded");d.preventDefault();d.stopPropagation()};$("#"+a.poiselector+" a.ui-link").unbind().click(c).tap(c)};app.LayerSelector=function(a){var b=$("#"+a.floorselector).parent().parent(),c=$("#"+a.floorselector),d=$("#"+a.layergroup);layerselector=$("#"+a.layerselector);switchFloor=a.switchFloor;switchBaseLayer=a.switchBaseLayer;a=null;layerselector.find(".ui-btn-text").text(OpenLayers.i18n("ortho"));layerselector.unbind().click(function(f){f.preventDefault();f.stopPropagation();$(this).removeClass("ui-btn-active");if($(this).attr("href")==="ortho"){f="plan";b.hide().appendTo(document.body)}else{f="ortho";
b.show().prependTo(d);$(this).removeClass("ui-corner-left")}$(this).attr("href",f);$(this).find(".ui-btn-text").text(OpenLayers.i18n(f));switchBaseLayer();c.select("refresh");d.controlgroup("refresh")});b.change(function(){switchFloor($(this).find("select").val());window.scrollTo(0,1)})};app=window.app||{};app.ZoneSelector=function(a){var b={s_campus:[730154.802927831,5863118.72088469,733325.224489161,5865045.8547912],s_neuchatel:[772223,5940834,773758,5941915],s_ecal:[732792,5866418,734046,5867381],s_aula:[736385,5862548,737667,5863377],s_me:[6206739,2957591,6212180,2959626]};$("#"+a.list+" a").bind("click",function(){$.mobile.changePage("mappage","pop");a.mapManager.map.zoomToExtent(new OpenLayers.Bounds.fromArray(b[$(this).attr("id")]));a.mapManager.switchFloor(19)})};
